<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="fantasykai`blog"><title>10ç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ | æ«å“²'sæ–‡æ –å°ç­‘</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + '2bb92548008bd1f1f88213efd40c8dad';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">10ç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h1><a id="logo" href="/.">æ«å“²'sæ–‡æ –å°ç­‘</a><p class="description">å›å­ç»ˆæ—¥ä¹¾ä¹¾ï¼Œå¤•æƒ•è‹¥å‰ï¼Œæ— å’</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/tags/"><i class="fa fa-tag"> æ ‡ç­¾</i></a><a href="/timeline/"><i class="fa fa-book"> å†å²</i></a><a href="/blogroll/"><i class="fa fa-external-link"> æ”¶è—é“¾æ¥</i></a><a href="/2048/"><i class="fa fa-gamepad"> æ”¾æ¾ä¸‹</i></a><a href="/guestbook/"><i class="fa fa-comments"> ç•™è¨€</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">10ç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ</h1><div class="post-meta">2020-04-14<span> | </span><span class="category"><a href="/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/">æŠ€æœ¯å°æ ˆ</a></span></div><a class="disqus-comment-count" href="/2020/04/14/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/10%E7%A7%8D%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/#vcomment"><span class="waline-comment-count" id="/2020/04/14/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/10%E7%A7%8D%E8%B7%A8%E5%9F%9F%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"></span><span> æ¡è¯„è®º</span></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2"><span class="toc-number">1.</span> <span class="toc-text">å†™åœ¨å‰é¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%B7%A8%E5%9F%9F%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">2.</span> <span class="toc-text">ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%8C%E6%BA%90%E7%AD%96%E7%95%A5"><span class="toc-number">2.1.</span> <span class="toc-text">1.åŒæºç­–ç•¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%90%8C%E6%BA%90%E7%A4%BA%E4%BE%8B"><span class="toc-number">2.2.</span> <span class="toc-text">2.åŒæºç¤ºä¾‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%EF%BC%9F"><span class="toc-number">3.</span> <span class="toc-text">äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-CORS"><span class="toc-number">3.1.</span> <span class="toc-text">1.CORS</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.1.</span> <span class="toc-text">a.ç®€å•è¯·æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E9%9D%9E%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.2.</span> <span class="toc-text">b.éç®€å•è¯·æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-Node-%E4%B8%AD%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">3.1.3.</span> <span class="toc-text">c.Node ä¸­çš„è§£å†³æ–¹æ¡ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8E%9F%E7%94%9F%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">åŸç”Ÿæ–¹å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-cors-%E7%9A%84-cookie-%E9%97%AE%E9%A2%98"><span class="toc-number">3.1.3.3.</span> <span class="toc-text">å…³äº cors çš„ cookie é—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#d-%E5%89%8D%E7%AB%AF%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.1.4.</span> <span class="toc-text">d.å‰ç«¯ç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.4.1.</span> <span class="toc-text">ç®€å•è¯·æ±‚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%9E%E7%AE%80%E5%8D%95%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.4.2.</span> <span class="toc-text">éç®€å•è¯·æ±‚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">3.1.4.3.</span> <span class="toc-text">å°ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Node-%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">3.2.</span> <span class="toc-text">2.Node æ­£å‘ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-cli-%E5%B7%A5%E5%85%B7%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%90%86"><span class="toc-number">3.2.1.</span> <span class="toc-text">a.cli å·¥å…·ä¸­çš„ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-Webpack-4-x"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">1) Webpack (4.x)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-Vue-cli-2-x"><span class="toc-number">3.2.1.2.</span> <span class="toc-text">2) Vue-cli 2.x</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-Vue-cli-3-x"><span class="toc-number">3.2.1.3.</span> <span class="toc-text">3) Vue-cli 3.x</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-Parcel-2-x"><span class="toc-number">3.2.1.4.</span> <span class="toc-text">4) Parcel (2.x)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E4%BD%BF%E7%94%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BB%A3%E7%90%86%E5%B7%A5%E5%85%B7"><span class="toc-number">3.2.2.</span> <span class="toc-text">b.ä½¿ç”¨è‡ªå·±çš„ä»£ç†å·¥å…·</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-charles"><span class="toc-number">3.2.3.</span> <span class="toc-text">c.charles</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">å‰ç«¯ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-number">3.2.3.3.</span> <span class="toc-text">åç«¯ä»£ç </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%88%E6%9E%9C"><span class="toc-number">3.2.3.4.</span> <span class="toc-text">æ•ˆæœ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Nginx-%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86"><span class="toc-number">3.3.</span> <span class="toc-text">3.Nginx åå‘ä»£ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D-1"><span class="toc-number">3.3.0.1.</span> <span class="toc-text">ä»‹ç»</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0"><span class="toc-number">3.3.0.2.</span> <span class="toc-text">å®ç°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%88%E6%9E%9C-1"><span class="toc-number">3.3.0.3.</span> <span class="toc-text">æ•ˆæœ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-JSONP"><span class="toc-number">3.4.</span> <span class="toc-text">4.JSONP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Websocket"><span class="toc-number">3.5.</span> <span class="toc-text">5.Websocket</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-window-postMessage"><span class="toc-number">3.6.</span> <span class="toc-text">6.window.postMessage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E9%80%94"><span class="toc-number">3.6.1.</span> <span class="toc-text">ç”¨é€”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%B3%95"><span class="toc-number">3.6.2.</span> <span class="toc-text">ç”¨æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">3.6.3.</span> <span class="toc-text">ç¤ºä¾‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-document-domain-Iframe"><span class="toc-number">3.7.</span> <span class="toc-text">7.document.domain + Iframe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-window-location-hash-Iframe"><span class="toc-number">3.8.</span> <span class="toc-text">8.window.location.hash + Iframe</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">3.8.1.</span> <span class="toc-text">å®ç°åŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%B5%81%E7%A8%8B"><span class="toc-number">3.8.2.</span> <span class="toc-text">å®ç°æµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-window-name-Iframe"><span class="toc-number">3.9.</span> <span class="toc-text">9.window.name + Iframe</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E6%B5%8F%E8%A7%88%E5%99%A8%E5%BC%80%E5%90%AF%E8%B7%A8%E5%9F%9F%EF%BC%88%E7%BB%88%E6%9E%81%E6%96%B9%E6%A1%88%EF%BC%89"><span class="toc-number">3.10.</span> <span class="toc-text">10.æµè§ˆå™¨å¼€å¯è·¨åŸŸï¼ˆç»ˆææ–¹æ¡ˆï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Windows"><span class="toc-number">3.10.1.</span> <span class="toc-text">Windows</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Mac"><span class="toc-number">3.10.2.</span> <span class="toc-text">Mac</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E5%B1%95%E7%A4%BA"><span class="toc-number">3.10.3.</span> <span class="toc-text">æ•ˆæœå±•ç¤º</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E8%B7%A8%E5%9F%9F%EF%BC%9F"><span class="toc-number">4.</span> <span class="toc-text">ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%99%90%E5%88%B6%E4%B8%8D%E5%90%8C%E6%BA%90%E7%9A%84%E8%AF%B7%E6%B1%82"><span class="toc-number">4.1.</span> <span class="toc-text">1.é™åˆ¶ä¸åŒæºçš„è¯·æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%99%90%E5%88%B6-dom-%E6%93%8D%E4%BD%9C"><span class="toc-number">4.2.</span> <span class="toc-text">2.é™åˆ¶ dom æ“ä½œ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E"><span class="toc-number">5.</span> <span class="toc-text">å†™åœ¨æœ€å</span></a></li></ol></div></div><div class="post-content"><p>10ç§è·¨åŸŸè§£å†³æ–¹æ¡ˆ</p>
<h2 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h2><p>å—¯ã€‚åˆæ¥äº†ï¼Œåˆè¯´åˆ°è·¨åŸŸäº†ï¼Œè¿™æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œä»¥å‰æˆ‘è§‰å¾—è¿™ç§åŸºç¡€æ–‡ç« æ²¡æœ‰ä»€ä¹ˆå¥½å†™çš„ï¼Œä¼šæƒ³ç€ä½ å»äº†è§£åº•å±‚å•Šï¼Œä¸æ˜¯å¾ˆç®€å•å—ã€‚ä½†æ˜¯æœ€è¿‘åœ¨å¼€å‘ä¸€ä¸ª <strong>ã€Œvscode æ’ä»¶ã€</strong> å‘ç°ï¼Œå½“ä½ åˆšå…¥é—¨ä¸€æ ·ä¸œè¥¿çš„æ—¶å€™ï¼Œä½ ä¸ä¼šæƒ³è¿™ä¹ˆå¤šï¼Œå› ä¸ºä½ å¯¹ä»–ä¸ç†Ÿæ‚‰ï¼Œå½“ä½ é‡åˆ°ä¸ä¼šçš„ä¸œè¥¿ï¼Œä½ å°±æ˜¯æƒ³å…ˆæ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œç„¶åé€šè¿‡è¿™ä¸ªè§£å†³æ–¹æ¡ˆå†å»æ·±å…¥ç†è§£ã€‚å°±æ¯”å¦‚è·¨åŸŸï¼Œæ–°äººæˆ–è€…åˆšæ¥è§¦çš„äººå¯¹å®ƒå¹¶ä¸æ˜¯é‚£ä¹ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥è¯´åˆ—å‡ºä¸€äº›è‡ªå·±ç§¯ç´¯çš„æ–¹æ¡ˆï¼Œä»¥åŠä¸€äº›å¸¸ç”¨çš„åœºæ™¯æ¥ç»™ä»–äººå¸¦æ¥ä¸€äº›è§£å†³é—®é¢˜çš„æ€è·¯ï¼Œè¿™ä»¶äº‹æ˜¯æœ‰æ„ä¹‰çš„ã€‚ï¼ˆå†™å®Œä¹‹åè¿˜å‘ç°çœŸé¦™ã€‚ä»¥åå¿˜äº†è¿˜èƒ½å›æ¥çœ‹çœ‹ï¼‰</p>
<p>å…¶å®ç°åœ¨çš„ç¯å¢ƒå¯¹äºåˆšå…¥é—¨çš„å‰ç«¯æ¥è¯´ï¼Œéå¸¸çš„ä¸å‹å¥½ï¼Œä¸€æ–¹é¢å§ï¼Œå¾ˆå¤šåˆšæ–°äººæ²¡æœ‰ç»å†è¿‡å·¥å…·çš„å˜æ›´æ—¶ä»£ï¼Œå¦ä¸€æ–¹é¢æ¡†æ¶çš„è¿­ä»£æ›´æ–°é€Ÿåº¦å¾ˆå¿«ã€‚åœ¨ä»¥å‰ä½ å¯èƒ½æŒæ¡å‡ ç§å¸¸è§çš„æ‰‹æ³•å°±å¥½äº†ã€‚ä½†æ˜¯ç°åœ¨ <code>webpack-dev-server</code>ã€<code>vue-cli</code>ã€<code>parcel</code>ï¼Œè¿™äº›è„šæ‰‹æ¶éƒ½è¿›è¡Œäº†ä¸€å±‚å°è£…ï¼Œå¯¹äºç†Ÿæ‚‰çš„äººå¯èƒ½å¾ˆç®€å•ï¼Œä½†æ˜¯å¯¹äºè¿˜æœªå…¥é—¨çš„äººæ¥è¯´ï¼Œç®€ç›´å°±æ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œè™½ç„¶ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯æŸä¸€å¤©é‡åˆ°äº†é—®é¢˜ï¼Œä½ å¯¹å®ƒä¸ç†Ÿæ‚‰ï¼Œä½ å°±ä¼šä¸çŸ¥é“æ‰€é”™ã€‚ï¼ˆä½†æ˜¯åˆ«æ…Œï¼Œä¸»æµ cli çš„è·¨åŸŸæ–¹å¼æˆ‘éƒ½ä¼šè®²åˆ°ï¼‰</p>
<p>è®²ç€è®²ç€æœ‰ç‚¹åç¦»æ–¹å‘ï¼Œå¯èƒ½æˆ‘è®²çš„ä¹Ÿå¹¶ä¸ä¸€å®šæ˜¯æ­£ç¡®çš„ã€‚ä¸‹é¢åˆ‡å…¥æ­£é¢˜ã€‚</p>
<p>æœ¬æ–‡ä¼šä»¥ <strong>ã€Œã€ŒWhat-How-Whyã€ã€</strong> çš„æ–¹å¼æ¥è¿›è¡Œè®²è§£ã€‚è€Œåœ¨åœ¨ How ï¼ˆå¦‚ä½•è§£å†³è·¨åŸŸï¼Œå°†ä¼šæä¾›æ ‡é¢˜çš„ 11 ç§æ–¹æ¡ˆã€‚ï¼‰</p>
<p><strong>ã€Œé‡è¦çš„è¯´æ˜: åœ¨æ–‡ä¸­ï¼Œweb ç«¯åœ°å€ä¸º localhost:8000 æœåŠ¡ç«¯åœ°å€ä¸º localhost:8080,è¿™ä¸€ç‚¹å¸Œæœ›ä½ èƒ½è®°ä½ï¼Œä¼šè´¯ç©¿å…¨æ–‡ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠæ­¤å¤„çš„ä¸¤ç«¯çš„åœ°å€ä»£å…¥ä½ è‡ªå·±çš„åœ°å€ã€‚ã€</strong></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c4fcc8371~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="cors">cors</p>
<p>ä»¥ä¸‹æ‰€æœ‰ä»£ç å‡åœ¨ <a href="https://link.juejin.cn/?target=https://github.com/hua1995116/node-demo/tree/master/node-cors">github.com&#x2F;hua1995116&#x2F;â€¦</a></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c535d5dbe~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200413192431636">image-20200413192431636</p>
<h2 id="ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ"></a>ä¸€ã€è·¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="1-åŒæºç­–ç•¥"><a href="#1-åŒæºç­–ç•¥" class="headerlink" title="1.åŒæºç­–ç•¥"></a>1.åŒæºç­–ç•¥</h3><p>è·¨åŸŸé—®é¢˜å…¶å®å°±æ˜¯æµè§ˆå™¨çš„åŒæºç­–ç•¥æ‰€å¯¼è‡´çš„ã€‚</p>
<blockquote>
<p>â</p>
<p><strong>ã€ŒåŒæºç­–ç•¥ã€</strong>æ˜¯ä¸€ä¸ªé‡è¦çš„å®‰å…¨ç­–ç•¥ï¼Œå®ƒç”¨äºé™åˆ¶ä¸€ä¸ª<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Glossary/%E6%BA%90">origin</a>çš„æ–‡æ¡£æˆ–è€…å®ƒåŠ è½½çš„è„šæœ¬å¦‚ä½•èƒ½ä¸å¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚å®ƒèƒ½å¸®åŠ©é˜»éš”æ¶æ„æ–‡æ¡£ï¼Œå‡å°‘å¯èƒ½è¢«æ”»å‡»çš„åª’ä»‹ã€‚</p>
<p>â€“æ¥æº MDN</p>
<p>â</p>
</blockquote>
<p>å½“è·¨åŸŸæ—¶ä¼šæ”¶åˆ°ä»¥ä¸‹é”™è¯¯</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c54607698~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200413205559124">image-20200413205559124</p>
<h3 id="2-åŒæºç¤ºä¾‹"><a href="#2-åŒæºç¤ºä¾‹" class="headerlink" title="2.åŒæºç¤ºä¾‹"></a>2.åŒæºç¤ºä¾‹</h3><p>é‚£ä¹ˆå¦‚ä½•æ‰ç®—æ˜¯åŒæºå‘¢ï¼Ÿå…ˆæ¥çœ‹çœ‹ url çš„ç»„æˆéƒ¨åˆ†</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.example.com:80/path/to/myfile.html?key1=value1&amp;key2=value2#SomewhereInTheDocument</span><br></pre></td></tr></table></figure>

<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c9498fb98~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412171942421">image-20200412171942421</p>
<p>åªæœ‰å½“</p>
<p><strong>ã€Œprotocolï¼ˆåè®®ï¼‰ã€domainï¼ˆåŸŸåï¼‰ã€portï¼ˆç«¯å£ï¼‰ä¸‰è€…ä¸€è‡´ã€‚ã€</strong></p>
<p><strong>ã€Œprotocolï¼ˆåè®®ï¼‰ã€domainï¼ˆåŸŸåï¼‰ã€portï¼ˆç«¯å£ï¼‰ä¸‰è€…ä¸€è‡´ã€‚ã€</strong></p>
<p><strong>ã€Œprotocolï¼ˆåè®®ï¼‰ã€domainï¼ˆåŸŸåï¼‰ã€portï¼ˆç«¯å£ï¼‰ä¸‰è€…ä¸€è‡´ã€‚ã€</strong></p>
<p>æ‰æ˜¯åŒæºã€‚</p>
<p>ä»¥ä¸‹åè®®ã€åŸŸåã€ç«¯å£ä¸€è‡´ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/a.js">http://www.example.com:80/a.js</a></p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/b.js">http://www.example.com:80/b.js</a></p>
<p>ä»¥ä¸‹è¿™ç§çœ‹ä¸Šå»å†ç›¸ä¼¼ä¹Ÿæ²¡æœ‰ç”¨ï¼Œéƒ½ä¸æ˜¯åŒæºã€‚</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com:8080/">http://www.example.com:8080</a></p>
<p><a target="_blank" rel="noopener" href="http://www2.example.com/">http://www2.example.com:80</a></p>
<p>åœ¨è¿™é‡Œæ³¨æ„ä¸€ä¸‹å•Šï¼Œè¿™é‡Œæ˜¯ä¸ºäº†çªå‡ºç«¯å£çš„åŒºåˆ«æ‰å†™ä¸Šç«¯å£ã€‚åœ¨é»˜è®¤æƒ…å†µä¸‹ http å¯ä»¥çœç•¥ç«¯å£ 80ï¼Œ https çœç•¥ 443ã€‚è¿™åˆ«åˆ°æ—¶å€™é—¹ç¬‘è¯äº†ï¼Œä½ å’Œæˆ‘è¯´ <a target="_blank" rel="noopener" href="http://www.example.com/">http://www.example.com:80</a> å’Œ <a target="_blank" rel="noopener" href="http://www.example.com/">http://www.example.com</a> ä¸æ˜¯åŒæºï¼Œä»–ä¿©æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/">http://www.example.com:80</a> &#x3D;&#x3D;&#x3D; <a target="_blank" rel="noopener" href="http://www.example.com/">http://www.example.com</a></p>
<p><a target="_blank" rel="noopener" href="https://www.example.com/">https://www.example.com:443</a> &#x3D;&#x3D;&#x3D; <a target="_blank" rel="noopener" href="https://www.example.com/">https://www.example.com</a></p>
<p>å””ï¼Œè¿˜æ˜¯è¦è¯´æ˜ä¸€ä¸‹ã€‚</p>
<h2 id="äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ"><a href="#äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ" class="headerlink" title="äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ"></a>äºŒã€å¦‚ä½•è§£å†³è·¨åŸŸï¼Ÿ</h2><h3 id="1-CORS"><a href="#1-CORS" class="headerlink" title="1.CORS"></a>1.CORS</h3><p>è·¨åŸŸèµ„æºå…±äº«(<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Glossary/CORS">CORS</a>) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Glossary/HTTP">HTTP</a> å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„ Web åº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚å½“ä¸€ä¸ªèµ„æºä»ä¸è¯¥èµ„æºæœ¬èº«æ‰€åœ¨çš„æœåŠ¡å™¨<strong>ã€Œä¸åŒçš„åŸŸã€åè®®æˆ–ç«¯å£ã€</strong>è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œèµ„æºä¼šå‘èµ·ä¸€ä¸ª<strong>ã€Œè·¨åŸŸ HTTP è¯·æ±‚ã€</strong>ã€‚</p>
<p>è€Œåœ¨ cors ä¸­ä¼šæœ‰ <code>ç®€å•è¯·æ±‚</code> å’Œ <code>å¤æ‚è¯·æ±‚</code>çš„æ¦‚å¿µã€‚</p>
<p><strong>ã€Œæµè§ˆå™¨æ”¯æŒæƒ…å†µã€</strong></p>
<p>å½“ä½ ä½¿ç”¨ IE&lt;&#x3D;9, Opera&lt;12, or Firefox&lt;3.5 æˆ–è€…æ›´åŠ è€çš„æµè§ˆå™¨ï¼Œè¿™ä¸ªæ—¶å€™è¯·ä½¿ç”¨ JSONP ã€‚</p>
<h4 id="a-ç®€å•è¯·æ±‚"><a href="#a-ç®€å•è¯·æ±‚" class="headerlink" title="a.ç®€å•è¯·æ±‚"></a>a.ç®€å•è¯·æ±‚</h4><p>ä¸ä¼šè§¦å‘ <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS%23Preflighted_requests">CORS é¢„æ£€è¯·æ±‚</a>ã€‚è¿™æ ·çš„è¯·æ±‚ä¸ºâ€œç®€å•è¯·æ±‚â€ï¼Œè¯·æ³¨æ„ï¼Œè¯¥æœ¯è¯­å¹¶ä¸å±äº <a href="https://link.juejin.cn/?target=https://fetch.spec.whatwg.org/">Fetch</a> ï¼ˆå…¶ä¸­å®šä¹‰äº† CORSï¼‰è§„èŒƒã€‚è‹¥è¯·æ±‚æ»¡è¶³æ‰€æœ‰ä¸‹è¿°æ¡ä»¶ï¼Œåˆ™è¯¥è¯·æ±‚å¯è§†ä¸ºâ€œç®€å•è¯·æ±‚â€ï¼š</p>
<p>æƒ…å†µä¸€: ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•(æ„æ€å°±æ˜¯ä»¥ä¸‹è¯·æ±‚ä»¥å¤–çš„éƒ½æ˜¯éç®€å•è¯·æ±‚)</p>
<ul>
<li><a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/GET"><code>GET</code></a></li>
<li><a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/HEAD"><code>HEAD</code></a></li>
<li><a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/POST"><code>POST</code></a></li>
</ul>
<p>æƒ…å†µäºŒ: äººä¸ºè®¾ç½®ä»¥ä¸‹é›†åˆå¤–çš„è¯·æ±‚å¤´</p>
<ul>
<li><a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept"><code>Accept</code></a></li>
<li><a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Accept-Language"><code>Accept-Language</code></a></li>
<li><a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Language"><code>Content-Language</code></a></li>
<li><a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code></a> ï¼ˆéœ€è¦æ³¨æ„é¢å¤–çš„é™åˆ¶ï¼‰</li>
<li><code>DPR</code></li>
<li><code>Downlink</code></li>
<li><code>Save-Data</code></li>
<li><code>Viewport-Width</code></li>
<li><code>Width</code></li>
</ul>
<p>æƒ…å†µä¸‰ï¼š<code>Content-Type</code>çš„å€¼ä»…é™äºä¸‹åˆ—ä¸‰è€…ä¹‹ä¸€ï¼š(ä¾‹å¦‚ application&#x2F;json ä¸ºéç®€å•è¯·æ±‚)</p>
<ul>
<li><code>text/plain</code></li>
<li><code>multipart/form-data</code></li>
<li><code>application/x-www-form-urlencoded</code></li>
</ul>
<p>æƒ…å†µå››:</p>
<p>è¯·æ±‚ä¸­çš„ä»»æ„<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestUpload"><code>XMLHttpRequestUpload</code></a> å¯¹è±¡å‡æ²¡æœ‰æ³¨å†Œä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼›<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequestUpload"><code>XMLHttpRequestUpload</code></a> å¯¹è±¡å¯ä»¥ä½¿ç”¨ <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/upload"><code>XMLHttpRequest.upload</code></a> å±æ€§è®¿é—®ã€‚</p>
<p>æƒ…å†µäº”:</p>
<p>è¯·æ±‚ä¸­æ²¡æœ‰ä½¿ç”¨ <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/API/ReadableStream"><code>ReadableStream</code></a> å¯¹è±¡ã€‚</p>
<h4 id="b-éç®€å•è¯·æ±‚"><a href="#b-éç®€å•è¯·æ±‚" class="headerlink" title="b.éç®€å•è¯·æ±‚"></a>b.éç®€å•è¯·æ±‚</h4><p>é™¤ä»¥ä¸Šæƒ…å†µå¤–çš„ã€‚</p>
<h4 id="c-Node-ä¸­çš„è§£å†³æ–¹æ¡ˆ"><a href="#c-Node-ä¸­çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="c.Node ä¸­çš„è§£å†³æ–¹æ¡ˆ"></a>c.Node ä¸­çš„è§£å†³æ–¹æ¡ˆ</h4><h5 id="åŸç”Ÿæ–¹å¼"><a href="#åŸç”Ÿæ–¹å¼" class="headerlink" title="åŸç”Ÿæ–¹å¼"></a>åŸç”Ÿæ–¹å¼</h5><p>æˆ‘ä»¬æ¥çœ‹ä¸‹åç«¯éƒ¨åˆ†çš„è§£å†³æ–¹æ¡ˆã€‚<code>Node</code> ä¸­ <code>CORS</code> çš„è§£å†³ä»£ç .</p>
<figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">app.use(<span class="keyword">async</span> (ctx, <span class="keyword">next</span>) =&gt; &#123;</span><br><span class="line">  ctx.<span class="keyword">set</span>(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, ctx.headers.origin);</span><br><span class="line">  ctx.<span class="keyword">set</span>(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">  ctx.<span class="keyword">set</span>(<span class="string">&quot;Access-Control-Request-Method&quot;</span>, <span class="string">&quot;PUT,POST,GET,DELETE,OPTIONS&quot;</span>);</span><br><span class="line">  ctx.<span class="keyword">set</span>(</span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Headers&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Origin, X-Requested-With, Content-Type, Accept, cc&quot;</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">if</span> (ctx.method === <span class="string">&quot;OPTIONS&quot;</span>) &#123;</span><br><span class="line">    ctx.status = <span class="number">204</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">await</span> <span class="keyword">next</span>();</span><br><span class="line">&#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"><a href="#ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶" class="headerlink" title="ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶"></a>ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶</h5><p>ä¸ºäº†æ–¹ä¾¿ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸­é—´ä»¶</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const <span class="attr">cors</span> = require(<span class="string">&quot;koa-cors&quot;</span>)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">app.use(cors())<span class="comment">;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="å…³äº-cors-çš„-cookie-é—®é¢˜"><a href="#å…³äº-cors-çš„-cookie-é—®é¢˜" class="headerlink" title="å…³äº cors çš„ cookie é—®é¢˜"></a>å…³äº cors çš„ cookie é—®é¢˜</h5><p>æƒ³è¦ä¼ é€’ <code>cookie</code> éœ€è¦æ»¡è¶³ 3 ä¸ªæ¡ä»¶</p>
<p>1.web è¯·æ±‚è®¾ç½®<code>withCredentials</code></p>
<p>è¿™é‡Œé»˜è®¤æƒ…å†µä¸‹åœ¨è·¨åŸŸè¯·æ±‚ï¼Œæµè§ˆå™¨æ˜¯ä¸å¸¦ cookie çš„ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½® <code>withCredentials</code> æ¥è¿›è¡Œä¼ é€’ <code>cookie</code>.</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// åŸç”Ÿ xml çš„è®¾ç½®æ–¹å¼</span><br><span class="line">var <span class="attr">xhr</span> = new XMLHttpRequest()<span class="comment">;</span></span><br><span class="line"><span class="attr">xhr.withCredentials</span> = <span class="literal">true</span><span class="comment">;</span></span><br><span class="line">// axios è®¾ç½®æ–¹å¼</span><br><span class="line"><span class="attr">axios.defaults.withCredentials</span> = <span class="literal">true</span><span class="comment">;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>2.<code>Access-Control-Allow-Credentials</code> ä¸º <code>true</code></p>
<p>3.<code>Access-Control-Allow-Origin</code>ä¸ºé <code>*</code></p>
<p>è¿™é‡Œè¯·æ±‚çš„æ–¹å¼ï¼Œåœ¨ <code>chrome</code> ä¸­æ˜¯èƒ½çœ‹åˆ°è¿”å›å€¼çš„ï¼Œä½†æ˜¯åªè¦ä¸æ»¡è¶³ä»¥ä¸Šå…¶ä¸€ï¼Œæµè§ˆå™¨ä¼šæŠ¥é”™ï¼Œè·å–ä¸åˆ°è¿”å›å€¼ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c93623a0c~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412201424024">image-20200412201424024</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Access to XMLHttpRequest at <span class="string">&#x27;http://127.0.0.1:8080/api/corslist&#x27;</span> <span class="keyword">from</span> origin <span class="string">&#x27;http://127.0.0.1:8000&#x27;</span> has been blocked <span class="keyword">by</span> CORS policy: The <span class="keyword">value</span> of the <span class="string">&#x27;Access-Control-Allow-Credentials&#x27;</span> header <span class="keyword">in</span> the response <span class="keyword">is</span> <span class="string">&#x27;&#x27;</span> which must be <span class="string">&#x27;true&#x27;</span> <span class="keyword">when</span> the request<span class="string">&#x27;s credentials mode is &#x27;</span>include<span class="string">&#x27;. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.</span></span><br><span class="line"><span class="string">å¤åˆ¶ä»£ç </span></span><br></pre></td></tr></table></figure>

<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c5d57082e~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412201411481">image-20200412201411481</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Access to XMLHttpRequest at <span class="string">&#x27;http://127.0.0.1:8080/api/corslist&#x27;</span> <span class="keyword">from</span> origin <span class="string">&#x27;http://127.0.0.1:8000&#x27;</span> has been blocked <span class="keyword">by</span> CORS policy: The <span class="keyword">value</span> of the <span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span> header <span class="keyword">in</span> the response must <span class="keyword">not</span> be the wildcard <span class="string">&#x27;*&#x27;</span> <span class="keyword">when</span> the request<span class="string">&#x27;s credentials mode is &#x27;</span>include<span class="string">&#x27;. The credentials mode of requests initiated by the XMLHttpRequest is controlled by the withCredentials attribute.</span></span><br><span class="line"><span class="string">å¤åˆ¶ä»£ç </span></span><br></pre></td></tr></table></figure>

<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c4eaefff4~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412201530087">image-20200412201530087</p>
<h4 id="d-å‰ç«¯ç¤ºä¾‹"><a href="#d-å‰ç«¯ç¤ºä¾‹" class="headerlink" title="d.å‰ç«¯ç¤ºä¾‹"></a>d.å‰ç«¯ç¤ºä¾‹</h4><p>åˆ†åˆ«æ¼”ç¤ºä¸€ä¸‹å‰ç«¯éƒ¨åˆ† <code>ç®€å•è¯·æ±‚</code> å’Œ <code>éç®€å•è¯·æ±‚</code></p>
<h5 id="ç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/axios/0.19.2/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  axios.<span class="title function_">get</span>(<span class="string">&quot;http://127.0.0.1:8080/api/corslist&quot;</span>);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="éç®€å•è¯·æ±‚"><a href="#éç®€å•è¯·æ±‚" class="headerlink" title="éç®€å•è¯·æ±‚"></a>éç®€å•è¯·æ±‚</h5><p>è¿™é‡Œæˆ‘ä»¬åŠ å…¥äº†ä¸€ä¸ªéé›†åˆå†…çš„ <code>headers</code> å¤´ <code>cc</code> æ¥è¾¾åˆ°éç®€å•è¯·æ±‚çš„ç›®çš„ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/axios/0.19.2/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  axios.<span class="title function_">get</span>(<span class="string">&quot;http://127.0.0.1:8080/api/corslist&quot;</span>, &#123; <span class="attr">headers</span>: &#123; <span class="attr">cc</span>: <span class="string">&quot;xxx&quot;</span> &#125; &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c5360c403~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412201158778">image-20200412201158778</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c9140192e~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412195829232">image-20200412195829232</p>
<h5 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h5><p>1ã€ åœ¨æ–°ç‰ˆçš„ chrome ä¸­ï¼Œå¦‚æœä½ å‘é€äº†å¤æ‚è¯·æ±‚ï¼Œä½ å´çœ‹ä¸åˆ° <code>options</code> è¯·æ±‚ã€‚å¯ä»¥åœ¨è¿™é‡Œè®¾ç½® <code>chrome://flags/#out-of-blink-cors</code> è®¾ç½®æˆ <code>disbale</code> ï¼Œé‡å¯æµè§ˆå™¨ã€‚å¯¹äºéç®€å•è¯·æ±‚å°±èƒ½çœ‹åˆ° <code>options</code> è¯·æ±‚äº†ã€‚</p>
<p>2ã€ ä¸€èˆ¬æƒ…å†µä¸‹åç«¯æ¥å£æ˜¯ä¸ä¼šå¼€å¯è¿™ä¸ªè·¨åŸŸå¤´çš„ï¼Œé™¤éæ˜¯ä¸€äº›ä¸ç”¨æˆ·æ— å…³çš„ä¸å¤ªé‡è¦çš„æ¥å£ã€‚</p>
<h3 id="2-Node-æ­£å‘ä»£ç†"><a href="#2-Node-æ­£å‘ä»£ç†" class="headerlink" title="2.Node æ­£å‘ä»£ç†"></a>2.Node æ­£å‘ä»£ç†</h3><p>ä»£ç†çš„æ€è·¯ä¸ºï¼Œåˆ©ç”¨æœåŠ¡ç«¯è¯·æ±‚ä¸ä¼šè·¨åŸŸçš„ç‰¹æ€§ï¼Œè®©æ¥å£å’Œå½“å‰ç«™ç‚¹åŒåŸŸã€‚</p>
<p><strong>ã€Œä»£ç†å‰ã€</strong></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441c9f004d9b~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412202320482">image-20200412202320482</p>
<p><strong>ã€Œä»£ç†åã€</strong></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cb6c9453f~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412202358759">image-20200412202358759</p>
<p>è¿™æ ·ï¼Œæ‰€æœ‰çš„èµ„æºä»¥åŠè¯·æ±‚éƒ½åœ¨ä¸€ä¸ªåŸŸåä¸‹äº†ã€‚</p>
<h4 id="a-cli-å·¥å…·ä¸­çš„ä»£ç†"><a href="#a-cli-å·¥å…·ä¸­çš„ä»£ç†" class="headerlink" title="a.cli å·¥å…·ä¸­çš„ä»£ç†"></a>a.cli å·¥å…·ä¸­çš„ä»£ç†</h4><h5 id="1-Webpack-4-x"><a href="#1-Webpack-4-x" class="headerlink" title="1) Webpack (4.x)"></a>1) Webpack (4.x)</h5><p>åœ¨<code>webpack</code>ä¸­å¯ä»¥é…ç½®<code>proxy</code>æ¥å¿«é€Ÿè·å¾—æ¥å£ä»£ç†çš„èƒ½åŠ›ã€‚</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">const path = <span class="built_in">require</span>(&quot;path&quot;);</span><br><span class="line">const HtmlWebpackPlugin = <span class="built_in">require</span>(&quot;html-webpack-plugin&quot;);</span><br><span class="line"></span><br><span class="line">module<span class="selector-class">.exports</span> = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    index: <span class="string">&quot;./index.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&quot;bundle.js&quot;</span>,</span><br><span class="line">    path: path.<span class="built_in">resolve</span>(__dirname, <span class="string">&quot;dist&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    port: <span class="number">8000</span>,</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      &quot;/api&quot;: &#123;</span><br><span class="line">        target: <span class="string">&quot;http://localhost:8080&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    new <span class="built_in">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      filename: <span class="string">&quot;index.html&quot;</span>,</span><br><span class="line">      template: <span class="string">&quot;webpack.html&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å‰ç«¯æ¥å£è¯·æ±‚æ–¹å¼ï¼Œæ”¹ä¸ºä¸å¸¦åŸŸåã€‚ï¼ˆå› ä¸ºç°åœ¨æ˜¯åŒåŸŸè¯·æ±‚äº†ï¼‰</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;button <span class="attr">id</span>=<span class="string">&quot;getlist&quot;</span>&gt;è·å–åˆ—è¡¨&lt;/button&gt;</span><br><span class="line">&lt;button <span class="attr">id</span>=<span class="string">&quot;login&quot;</span>&gt;ç™»å½•&lt;/button&gt;</span><br><span class="line">&lt;script <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/axios/0.19.2/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="attr">axios.defaults.withCredentials</span> = <span class="literal">true</span><span class="comment">;</span></span><br><span class="line">  <span class="attr">getlist.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios.get(&quot;/api/corslist&quot;).then(<span class="attr">res</span> =&gt; &#123;</span><br><span class="line">      console.log(res.data)<span class="comment">;</span></span><br><span class="line">    &#125;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">  <span class="attr">login.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios.post(&quot;/api/login&quot;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="2-Vue-cli-2-x"><a href="#2-Vue-cli-2-x" class="headerlink" title="2) Vue-cli 2.x"></a>2) Vue-cli 2.x</h5><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config/index.js</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">proxyTable: &#123;</span><br><span class="line">  &#x27;/api&#x27;: &#123;</span><br><span class="line">     target: <span class="string">&#x27;http://localhost:8080&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="3-Vue-cli-3-x"><a href="#3-Vue-cli-3-x" class="headerlink" title="3) Vue-cli 3.x"></a>3) Vue-cli 3.x</h5><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js å¦‚æœæ²¡æœ‰å°±æ–°å»º</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line"><span class="keyword">module</span>.exports = &#123;</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    port: <span class="number">8000</span>,</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">&quot;/api&quot;</span>: &#123;</span><br><span class="line">        target: <span class="string">&quot;http://localhost:8080&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="4-Parcel-2-x"><a href="#4-Parcel-2-x" class="headerlink" title="4) Parcel (2.x)"></a>4) Parcel (2.x)</h5><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .proxyrc</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;/api&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°è¿™é‡Œï¼Œå¿ƒé‡Œä¸€å¥ xxx å°±ä¼šè„±å£è€Œå‡ºï¼Œä¸€ä¼šå†™é…ç½®æ–‡ä»¶ï¼Œä¸€ä¼š proxyTable ï¼Œä¸€ä¼š proxyï¼Œæ€ä¹ˆè¿™ä¹ˆå¤šçš„å½¢å¼ï¼Ÿå­¦ä¸åŠ¨äº†å­¦ä¸åŠ¨äº†ã€‚ã€‚ã€‚ä¸è¿‡ä¹Ÿä¸ç”¨æ…Œï¼Œè¿˜æ˜¯æœ‰æ–¹æ³•çš„ã€‚ä»¥ä¸Šæ‰€æœ‰é…ç½®éƒ½æ˜¯æœ‰ç€å…±åŒçš„åº•å±‚åŒ… <a href="https://link.juejin.cn/?target=https://github.com/chimurai/http-proxy-middleware">http-proxy-middleware</a> .é‡Œé¢éœ€è¦ç”¨åˆ°çš„å„ç§ <code>websocket</code> ï¼Œ<code>rewrite</code> ç­‰åŠŸèƒ½ï¼Œç›´æ¥çœ‹è¿™ä¸ªåº“çš„é…ç½®å°±å¯ä»¥äº†ã€‚å…³äº http-proxy-middleware è¿™ä¸ªåº“çš„åŸç†å¯ä»¥çœ‹æˆ‘è¿™ç¯‡æ–‡ç«  <a href="https://link.juejin.cn/?target=https://github.com/hua1995116/proxy">github.com&#x2F;hua1995116&#x2F;â€¦</a> å½“ç„¶äº†ã€‚ã€‚ã€‚å¯¹äºé…ç½®çš„ä½ç½®å…¥å£è¿˜æ˜¯éç»Ÿä¸€çš„ã€‚æ•™ä¸€ä¸ªæœç´¢çš„æŠ€å·§å§ï¼Œä¸Šé¢é…ç½®å†™å“ªé‡Œéƒ½ä¸ç”¨è®°çš„ï¼Œæƒ³è¦å“ªä¸ªæ¡†æ¶çš„ ç›´æ¥ google æœç´¢ xxx proxy å°±è¡Œäº†ã€‚</p>
<p>ä¾‹å¦‚ vue-cli 2 proxy ã€ webpack proxy ç­‰ç­‰â€¦.åŸºæœ¬ä¼šæœåˆ°æœ‰å®˜ç½‘çš„é…ç½®ç­”æ¡ˆï¼Œé€šç”¨ä¸” niceã€‚</p>
<h4 id="b-ä½¿ç”¨è‡ªå·±çš„ä»£ç†å·¥å…·"><a href="#b-ä½¿ç”¨è‡ªå·±çš„ä»£ç†å·¥å…·" class="headerlink" title="b.ä½¿ç”¨è‡ªå·±çš„ä»£ç†å·¥å…·"></a>b.ä½¿ç”¨è‡ªå·±çš„ä»£ç†å·¥å…·</h4><p><a href="https://link.juejin.cn/?target=https://github.com/Rob--W/cors-anywhere">cors-anywhere</a></p>
<p><strong>ã€ŒæœåŠ¡ç«¯ã€</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Listen on a specific host via the HOST environment variable</span></span><br><span class="line"><span class="keyword">var</span> host = process.<span class="property">env</span>.<span class="property">HOST</span> || <span class="string">&quot;0.0.0.0&quot;</span>;</span><br><span class="line"><span class="comment">// Listen on a specific port via the PORT environment variable</span></span><br><span class="line"><span class="keyword">var</span> port = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">7777</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cors_proxy = <span class="built_in">require</span>(<span class="string">&quot;cors-anywhere&quot;</span>);</span><br><span class="line">cors_proxy</span><br><span class="line">  .<span class="title function_">createServer</span>(&#123;</span><br><span class="line">    <span class="attr">originWhitelist</span>: [], <span class="comment">// Allow all origins</span></span><br><span class="line">    <span class="attr">requireHeader</span>: [<span class="string">&quot;origin&quot;</span>, <span class="string">&quot;x-requested-with&quot;</span>],</span><br><span class="line">    <span class="attr">removeHeaders</span>: [<span class="string">&quot;cookie&quot;</span>, <span class="string">&quot;cookie2&quot;</span>]</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">listen</span>(port, host, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Running CORS Anywhere on &quot;</span> + host + <span class="string">&quot;:&quot;</span> + port);</span><br><span class="line">  &#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>ã€Œå‰ç«¯ä»£ç ã€</strong></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/axios/0.19.2/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="attr">axios.defaults.withCredentials</span> = <span class="literal">true</span><span class="comment">;</span></span><br><span class="line">  <span class="attr">getlist.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios</span><br><span class="line">      .get(&quot;http://127.0.0.1:7777/http://127.0.0.1:8080/api/corslist&quot;)</span><br><span class="line">      .then(<span class="attr">res</span> =&gt; &#123;</span><br><span class="line">        console.log(res.data)<span class="comment">;</span></span><br><span class="line">      &#125;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">  <span class="attr">login.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios.post(&quot;http://127.0.0.1:7777/http://127.0.0.1:8080/api/login&quot;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>ã€Œæ•ˆæœå±•ç¤ºã€</strong></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cb6f2bc19~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200413161243734">image-20200413161243734</p>
<p><strong>ã€Œç¼ºç‚¹ã€</strong></p>
<p>æ— æ³•ä¸“é€’ cookieï¼ŒåŸå› æ˜¯å› ä¸ºè¿™ä¸ªæ˜¯ä¸€ä¸ªä»£ç†åº“ï¼Œä½œè€…è§‰å¾—ä¸­é—´ä¼ é€’ cookie å¤ªä¸å®‰å…¨äº†ã€‚<a target="_blank" rel="noopener" href="https://github.com/Rob--W/cors-anywhere/issues/208#issuecomment-575254153">https://github.com/Rob--W/cors-anywhere/issues/208#issuecomment-575254153</a></p>
<h4 id="c-charles"><a href="#c-charles" class="headerlink" title="c.charles"></a>c.charles</h4><h5 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h5><p>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ã€å¼€å‘çš„ç¥å™¨ã€‚<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903665304600589">ä»‹ç»ä¸ä½¿ç”¨</a></p>
<p>åˆ©ç”¨ charles è¿›è¡Œè·¨åŸŸï¼Œæœ¬è´¨å°±æ˜¯è¯·æ±‚çš„æ‹¦æˆªä¸ä»£ç†ã€‚</p>
<p>åœ¨ <code>tools/map remote</code> ä¸­è®¾ç½®ä»£ç†</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cc6dd6025~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412232733437">image-20200412232733437</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cbaceed71~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412232724518">image-20200412232724518</p>
<h5 id="å‰ç«¯ä»£ç "><a href="#å‰ç«¯ä»£ç " class="headerlink" title="å‰ç«¯ä»£ç "></a>å‰ç«¯ä»£ç </h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;button <span class="attr">id</span>=<span class="string">&quot;getlist&quot;</span>&gt;è·å–åˆ—è¡¨&lt;/button&gt;</span><br><span class="line">&lt;button <span class="attr">id</span>=<span class="string">&quot;login&quot;</span>&gt;ç™»å½•&lt;/button&gt;</span><br><span class="line">&lt;script <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/axios/0.19.2/axios.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="attr">axios.defaults.withCredentials</span> = <span class="literal">true</span><span class="comment">;</span></span><br><span class="line">  <span class="attr">getlist.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios.get(&quot;/api/corslist&quot;).then(<span class="attr">res</span> =&gt; &#123;</span><br><span class="line">      console.log(res.data)<span class="comment">;</span></span><br><span class="line">    &#125;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">  <span class="attr">login.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios.post(&quot;/api/login&quot;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="åç«¯ä»£ç "><a href="#åç«¯ä»£ç " class="headerlink" title="åç«¯ä»£ç "></a>åç«¯ä»£ç </h5><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">router.get(&quot;/api/corslist&quot;, async <span class="attr">ctx</span> =&gt; &#123;</span><br><span class="line">  <span class="attr">ctx.body</span> = &#123;</span><br><span class="line">    data: <span class="section">[&#123; name: &quot;ç§‹é£çš„ç¬”è®°&quot; &#125;]</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">router.post(&quot;/api/login&quot;, async <span class="attr">ctx</span> =&gt; &#123;</span><br><span class="line">  ctx.cookies.set(&quot;token&quot;, token, &#123;</span><br><span class="line">    expires: new Date(+new Date() + 1000 * 60 * 60 * 24 * 7)</span><br><span class="line">  &#125;)<span class="comment">;</span></span><br><span class="line">  <span class="attr">ctx.body</span> = &#123;</span><br><span class="line">    msg: &quot;æˆåŠŸ&quot;,</span><br><span class="line">    code: 0</span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h5><p>è®¿é—® <a target="_blank" rel="noopener" href="http://localhost:8000/charles">http://localhost:8000/charles</a></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cbec7ed57~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412232231554">image-20200412232231554</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cd9e700b2~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412232752837">image-20200412232752837</p>
<p>å®Œç¾è§£å†³ã€‚</p>
<p>å””ã€‚è¿™é‡Œåˆæœ‰ä¸€ä¸ªæ³¨æ„ç‚¹ã€‚åœ¨ <code>Mac mojave 10.14</code> ä¸­ä¼šå‡ºç° <code>charles</code> æŠ“ä¸åˆ°æœ¬åœ°åŒ…çš„æƒ…å†µã€‚è¿™ä¸ªæ—¶å€™éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªåŸŸåï¼Œç„¶åé…ç½®<code>hosts</code>æŒ‡å®šåˆ°<code>127.0.0.1</code>ã€‚ç„¶åä¿®æ”¹è®¿é—®æ–¹å¼ <code>http://localhost.charlesproxy.com:8000/charles</code>ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cdd4ea97d~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412233258107">image-20200412233258107</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cc31c4e9f~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412233317027">image-20200412233317027</p>
<h3 id="3-Nginx-åå‘ä»£ç†"><a href="#3-Nginx-åå‘ä»£ç†" class="headerlink" title="3.Nginx åå‘ä»£ç†"></a>3.Nginx åå‘ä»£ç†</h3><h5 id="ä»‹ç»-1"><a href="#ä»‹ç»-1" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h5><p>Nginx åˆ™æ˜¯é€šè¿‡åå‘ä»£ç†çš„æ–¹å¼ï¼Œï¼ˆè¿™é‡Œä¹Ÿéœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªåŸŸåï¼‰è¿™é‡Œå°±æ˜¯ä¿è¯æˆ‘å½“å‰åŸŸï¼Œèƒ½è·å–åˆ°é™æ€èµ„æºå’Œæ¥å£ï¼Œä¸å…³å¿ƒæ˜¯æ€ä¹ˆè·å–çš„ã€‚<a href="https://link.juejin.cn/?target=https://blog.csdn.net/diaojw090/article/details/89135073">nginx å®‰è£…æ•™ç¨‹</a></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441ced140b98~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200412233536522">image-20200412233536522</p>
<p>é…ç½®ä¸‹ hosts</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 local.test</span><br></pre></td></tr></table></figure>

<p>é…ç½® nginx</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen 80<span class="comment">;</span></span><br><span class="line">        server_name local.test<span class="comment">;</span></span><br><span class="line">        location /api &#123;</span><br><span class="line">            proxy_pass http://localhost:8080<span class="comment">;</span></span><br><span class="line">        &#125;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http://localhost:8000<span class="comment">;</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ nginx</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx</span><br></pre></td></tr></table></figure>

<p>é‡å¯ nginx</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s reload</span><br></pre></td></tr></table></figure>

<h5 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h5><p>å‰ç«¯ä»£ç </p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="attr">axios.defaults.withCredentials</span> = <span class="literal">true</span><span class="comment">;</span></span><br><span class="line">  <span class="attr">getlist.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios.get(&quot;/api/corslist&quot;).then(<span class="attr">res</span> =&gt; &#123;</span><br><span class="line">      console.log(res.data)<span class="comment">;</span></span><br><span class="line">    &#125;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">  <span class="attr">login.onclick</span> = () =&gt; &#123;</span><br><span class="line">    axios.post(&quot;/api/login&quot;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åç«¯ä»£ç </p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">router.get(&quot;/api/corslist&quot;, async <span class="attr">ctx</span> =&gt; &#123;</span><br><span class="line">  <span class="attr">ctx.body</span> = &#123;</span><br><span class="line">    data: <span class="section">[&#123; name: &quot;ç§‹é£çš„ç¬”è®°&quot; &#125;]</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">router.post(&quot;/api/login&quot;, async <span class="attr">ctx</span> =&gt; &#123;</span><br><span class="line">  ctx.cookies.set(&quot;token&quot;, token, &#123;</span><br><span class="line">    expires: new Date(+new Date() + 1000 * 60 * 60 * 24 * 7)</span><br><span class="line">  &#125;)<span class="comment">;</span></span><br><span class="line">  <span class="attr">ctx.body</span> = &#123;</span><br><span class="line">    msg: &quot;æˆåŠŸ&quot;,</span><br><span class="line">    code: 0</span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h5 id="æ•ˆæœ-1"><a href="#æ•ˆæœ-1" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h5><p>è®¿é—® <code>http://local.test/charles</code></p>
<p>æµè§ˆå™¨æ˜¾ç¤º</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441ced0491cf~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200413000229326">image-20200413000229326</p>
<h3 id="4-JSONP"><a href="#4-JSONP" class="headerlink" title="4.JSONP"></a>4.JSONP</h3><p><code>JSONP</code> ä¸»è¦å°±æ˜¯åˆ©ç”¨äº† <code>script</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„è¿™ä¸ªç‰¹æ€§æ¥å®Œæˆçš„ã€‚</p>
<p><strong>ã€Œä½¿ç”¨é™åˆ¶ã€</strong></p>
<p>ä»…æ”¯æŒ GET æ–¹æ³•ï¼Œå¦‚æœæƒ³ä½¿ç”¨å®Œæ•´çš„ REST æ¥å£ï¼Œè¯·ä½¿ç”¨ CORS æˆ–è€…å…¶ä»–ä»£ç†æ–¹å¼ã€‚</p>
<p><strong>ã€Œæµç¨‹è§£æã€</strong></p>
<p>1.å‰ç«¯å®šä¹‰è§£æå‡½æ•°ï¼ˆä¾‹å¦‚ jsonpCallback&#x3D;function(){â€¦.}ï¼‰</p>
<p>2.é€šè¿‡ params å½¢å¼åŒ…è£…è¯·æ±‚å‚æ•°ï¼Œå¹¶ä¸”å£°æ˜æ‰§è¡Œå‡½æ•°(ä¾‹å¦‚ cb&#x3D;jsonpCallback)</p>
<p>3.åç«¯è·å–å‰ç«¯å£°æ˜çš„æ‰§è¡Œå‡½æ•°ï¼ˆjsonpCallbackï¼‰ï¼Œå¹¶ä»¥å¸¦ä¸Šå‚æ•°å¹¶è°ƒç”¨æ‰§è¡Œå‡½æ•°çš„æ–¹å¼ä¼ é€’ç»™å‰ç«¯ã€‚</p>
<p><strong>ã€Œä½¿ç”¨ç¤ºä¾‹ã€</strong></p>
<p>åç«¯å®ç°</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const <span class="attr">Koa</span> = require(<span class="string">&quot;koa&quot;</span>)<span class="comment">;</span></span><br><span class="line">const <span class="attr">fs</span> = require(<span class="string">&quot;fs&quot;</span>)<span class="comment">;</span></span><br><span class="line">const <span class="attr">app</span> = new Koa()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">app.use(async (ctx, next) =&gt; &#123;</span><br><span class="line">  if (<span class="attr">ctx.path</span> === <span class="string">&quot;/api/jsonp&quot;</span>) &#123;</span><br><span class="line">    const &#123; cb, msg &#125; = ctx.query<span class="comment">;</span></span><br><span class="line">    <span class="attr">ctx.body</span> = `<span class="variable">$&#123;cb&#125;</span>(<span class="variable">$&#123;JSON.stringify(&#123; msg &#125;</span>)&#125;)`<span class="comment">;</span></span><br><span class="line">    return<span class="comment">;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">app.listen(8080)<span class="comment">;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ™®é€š js ç¤ºä¾‹</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line">  <span class="attr">window.jsonpCallback</span> = function(res) &#123;</span><br><span class="line">    console.log(res)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script</span><br><span class="line">  <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080/api/jsonp?msg=hello&amp;cb=jsonpCallback&quot;</span></span><br><span class="line">  <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span></span><br><span class="line">&gt;&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>JQuery Ajax ç¤ºä¾‹</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/jquery/3.5.0/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">url</span>: <span class="string">&quot;http://localhost:8080/api/jsonp&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">dataType</span>: <span class="string">&quot;jsonp&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">type</span>: <span class="string">&quot;get&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">msg</span>: <span class="string">&quot;hello&quot;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">jsonp</span>: <span class="string">&quot;cb&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">success</span>: <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>ã€ŒåŸç†è§£æã€</strong></p>
<p>å…¶å®è¿™å°±æ˜¯ js çš„é­”æ³•</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹æœ€ç®€å•çš„ js è°ƒç”¨ã€‚å—¯ï¼Œå¾ˆè‡ªç„¶çš„è°ƒç”¨ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">jsonpCallback</span> = <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  jsonpCallback(&#123; a: 1 &#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç¨ç¨æ”¹é€ ä¸€ä¸‹ï¼Œå¤–é“¾çš„å½¢å¼ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">jsonpCallback</span> = <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080/api/a.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// http://localhost:8080/api/a.js jsonpCallback(&#123;a:1&#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å†æ”¹é€ ä¸€ä¸‹ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¤–é“¾çš„ js å°±å½“åšæ˜¯ä¸€ä¸ªåŠ¨æ€çš„æ¥å£ï¼Œå› ä¸ºæœ¬èº«èµ„æºå’Œæ¥å£ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªè¯·æ±‚ï¼Œä¹ŸåŒ…å«å„ç§å‚æ•°ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€åŒ–è¿”å›ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">jsonpCallback</span> = <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080/api/a.js?a=123&amp;cb=sonpCallback&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// http://localhost:8080/api/a.js jsonpCallback(&#123;a:123&#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä½ ä»”ç»†å“ï¼Œç»†ç»†å“ï¼Œæ˜¯ä¸æ˜¯ jsonp æœ‰çš„ä¼˜åŠ¿å°±æ˜¯ script åŠ è½½ js çš„ä¼˜åŠ¿ï¼ŒåŠ è½½çš„æ–¹å¼åªä¸è¿‡æ¢äº†ä¸€ç§è¯´æ³•ã€‚è¿™ä¹Ÿå‘Šè¯‰æˆ‘ä»¬ä¸€ä¸ªé“ç†ï¼Œå¾ˆå¤šä¸œè¥¿å¹¶æ²¡æœ‰é‚£ä¹ˆç¥å¥‡ï¼Œæ˜¯åœ¨ä½ æ‰€å­¦çš„çŸ¥è¯†èŒƒå›´å†…ã€‚å°±å¥½æ¯”ï¼Œæ¡ƒæ ‘å’ŒæŸ³æ ‘ï¼Œå¦‚æœä½ æŠŠä»–ä»¬å½“æˆå¾ˆå¤§è·¨åº¦çš„ä¸œè¥¿å»è®°å¿†ç†è§£ï¼Œé‚£ä¹ˆä¸–ä¸Šè¿™ä¹ˆå¤šæ ‘ï¼Œä½ çœŸçš„è¦ç´¯æ­»äº†ï¼Œä½ æŠŠä»–ä»¬éƒ½å½“æˆæ˜¯æ ‘ï¼Œå“¦å¼ï¼Ÿä½ ä¼šçªç„¶å‘ç°ï¼Œä½ å¯¹ä¸–ç•Œä¸Šæ‰€æœ‰çš„æ ‘éƒ½æœ‰æ‰€äº†è§£ï¼Œä»–ä»¬éƒ½ä¼šé•¿å¶å­ï¼Œå…‰åˆä½œç”¨â€¦.å½“ç„¶ä¹Ÿæœ‰ä¸ªä¾‹ï¼Œä½†æ˜¯ä½ åªéœ€è¦å»è®°å¿†è¿™äº›ç»†å¾®çš„å·®åˆ«ï¼ŒæŠ“ä½ä¸»å¹²ã€‚ã€‚ã€‚å—¯ï¼Œåæ­£å°±è¿™ä¹ˆä¸ªé“ç†ã€‚</p>
<h3 id="5-Websocket"><a href="#5-Websocket" class="headerlink" title="5.Websocket"></a>5.Websocket</h3><p><a href="https://link.juejin.cn/?target=http://dev.w3.org/html5/websockets/">WebSocket</a> è§„èŒƒå®šä¹‰äº†ä¸€ç§ APIï¼Œå¯åœ¨ç½‘ç»œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹â€œå¥—æ¥å­—â€è¿æ¥ã€‚ç®€å•åœ°è¯´ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å­˜åœ¨æŒä¹…çš„è¿æ¥ï¼Œè€Œä¸”åŒæ–¹éƒ½å¯ä»¥éšæ—¶å¼€å§‹å‘é€æ•°æ®ã€‚è¯¦ç»†æ•™ç¨‹å¯ä»¥çœ‹ <a target="_blank" rel="noopener" href="https://www.html5rocks.com/zh/tutorials/websockets/basics/">https://www.html5rocks.com/zh/tutorials/websockets/basics/</a></p>
<p>è¿™ç§æ–¹å¼æœ¬è´¨æ²¡æœ‰ä½¿ç”¨äº† HTTP çš„å“åº”å¤´, å› æ­¤ä¹Ÿæ²¡æœ‰è·¨åŸŸçš„é™åˆ¶ï¼Œæ²¡æœ‰ä»€ä¹ˆè¿‡å¤šçš„è§£é‡Šç›´æ¥ä¸Šä»£ç å§ã€‚</p>
<p>å‰ç«¯éƒ¨åˆ†</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  let <span class="attr">socket</span> = new WebSocket(<span class="string">&quot;ws://localhost:8080&quot;</span>)<span class="comment">;</span></span><br><span class="line">  <span class="attr">socket.onopen</span> = function() &#123;</span><br><span class="line">    socket.send(&quot;ç§‹é£çš„ç¬”è®°&quot;)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">  <span class="attr">socket.onmessage</span> = function(e) &#123;</span><br><span class="line">    console.log(e.data)<span class="comment">;</span></span><br><span class="line">  &#125;<span class="comment">;</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åç«¯éƒ¨åˆ†</p>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> WebSocket = require(<span class="string">&quot;ws&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">server</span> = <span class="keyword">new</span> WebSocket.<span class="built_in">Server</span>(&#123; port: <span class="number">8080</span> &#125;);</span><br><span class="line"><span class="built_in">server</span>.<span class="keyword">on</span>(<span class="string">&quot;connection&quot;</span>, <span class="keyword">function</span>(socket) &#123;</span><br><span class="line">  socket.<span class="keyword">on</span>(<span class="string">&quot;message&quot;</span>, <span class="keyword">function</span>(data) &#123;</span><br><span class="line">    socket.send(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="6-window-postMessage"><a href="#6-window-postMessage" class="headerlink" title="6.window.postMessage"></a>6.window.postMessage</h3><p><strong>ã€Œwindow.postMessage()ã€</strong> æ–¹æ³•å¯ä»¥å®‰å…¨åœ°å®ç°è·¨æºé€šä¿¡ã€‚é€šå¸¸ï¼Œå¯¹äºä¸¤ä¸ªä¸åŒé¡µé¢çš„è„šæœ¬ï¼Œåªæœ‰å½“æ‰§è¡Œå®ƒä»¬çš„é¡µé¢ä½äºå…·æœ‰ç›¸åŒçš„åè®®ï¼ˆé€šå¸¸ä¸º httpsï¼‰ï¼Œç«¯å£å·ï¼ˆ443 ä¸º https çš„é»˜è®¤å€¼ï¼‰ï¼Œä»¥åŠä¸»æœº (ä¸¤ä¸ªé¡µé¢çš„æ¨¡æ•° <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/API/Document/domain"><code>Document.domain</code></a>è®¾ç½®ä¸ºç›¸åŒçš„å€¼) æ—¶ï¼Œè¿™ä¸¤ä¸ªè„šæœ¬æ‰èƒ½ç›¸äº’é€šä¿¡ã€‚<strong>ã€Œwindow.postMessage()ã€</strong> æ–¹æ³•æä¾›äº†ä¸€ç§å—æ§æœºåˆ¶æ¥è§„é¿æ­¤é™åˆ¶ï¼Œåªè¦æ­£ç¡®çš„ä½¿ç”¨ï¼Œè¿™ç§æ–¹æ³•å°±å¾ˆå®‰å…¨ã€‚</p>
<h4 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h4><p>1.é¡µé¢å’Œå…¶æ‰“å¼€çš„æ–°çª—å£çš„æ•°æ®ä¼ é€’</p>
<p>2.å¤šçª—å£ä¹‹é—´æ¶ˆæ¯ä¼ é€’</p>
<p>3.é¡µé¢ä¸åµŒå¥—çš„ iframe æ¶ˆæ¯ä¼ é€’</p>
<h4 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h4><p>è¯¦ç»†ç”¨æ³•çœ‹ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage">https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">otherWindow.postMessage(message, targetOrigin, [transfer]);</span><br></pre></td></tr></table></figure>

<ul>
<li>otherWindow: å…¶ä»–çª—å£çš„ä¸€ä¸ªå¼•ç”¨ï¼Œæ¯”å¦‚ iframe çš„ contentWindow å±æ€§ã€æ‰§è¡Œ<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/en-US/docs/DOM/window.open">window.open</a>è¿”å›çš„çª—å£å¯¹è±¡ã€æˆ–è€…æ˜¯å‘½åè¿‡æˆ–æ•°å€¼ç´¢å¼•çš„<a href="https://link.juejin.cn/?target=https://developer.mozilla.org/en-US/docs/DOM/window.frames">window.frames</a>ã€‚</li>
<li>message: å°†è¦å‘é€åˆ°å…¶ä»– window çš„æ•°æ®ã€‚</li>
<li>targetOrigin: é€šè¿‡çª—å£çš„ origin å±æ€§æ¥æŒ‡å®šå“ªäº›çª—å£èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯äº‹ä»¶.</li>
<li>transfer(å¯é€‰) : æ˜¯ä¸€ä¸²å’Œ message åŒæ—¶ä¼ é€’çš„ <a href="https://link.juejin.cn/?target=https://developer.mozilla.org/zh-CN/docs/Web/API/Transferable"><code>Transferable</code></a> å¯¹è±¡. è¿™äº›å¯¹è±¡çš„æ‰€æœ‰æƒå°†è¢«è½¬ç§»ç»™æ¶ˆæ¯çš„æ¥æ”¶æ–¹ï¼Œè€Œå‘é€ä¸€æ–¹å°†ä¸å†ä¿æœ‰æ‰€æœ‰æƒ</li>
</ul>
<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p>index.html</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;iframe</span><br><span class="line">  <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080&quot;</span></span><br><span class="line">  <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span></span><br><span class="line">  <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span></span><br><span class="line">  <span class="attr">onload</span>=<span class="string">&quot;load()&quot;</span></span><br><span class="line">&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function load() &#123;</span><br><span class="line">    iframe.contentWindow.postMessage(&quot;ç§‹é£çš„ç¬”è®°&quot;, &quot;http://localhost:8080&quot;)<span class="comment">;</span></span><br><span class="line">    <span class="attr">window.onmessage</span> = e =&gt; &#123;</span><br><span class="line">      console.log(e.data)<span class="comment">;</span></span><br><span class="line">    &#125;<span class="comment">;</span></span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>another.html</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onmessage</span> = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">data</span>); <span class="comment">// ç§‹é£çš„ç¬”è®°</span></span></span><br><span class="line"><span class="language-javascript">    e.<span class="property">source</span>.<span class="title function_">postMessage</span>(e.<span class="property">data</span>, e.<span class="property">origin</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="7-document-domain-Iframe"><a href="#7-document-domain-Iframe" class="headerlink" title="7.document.domain + Iframe"></a>7.document.domain + Iframe</h3><p>ä»ç¬¬ 7 ç§åˆ°ç¬¬ 9 ç§æ–¹å¼ï¼Œæˆ‘è§‰å¾—åˆ«äººçš„å†™çš„å·²ç»å¾ˆå¥½äº†ï¼Œä¸ºäº†å®Œæ•´æ€§ï¼Œæˆ‘å°±æ‹¿åˆ«äººçš„äº†ã€‚å¦‚æœ‰é›·åŒâ€¦.ï¼ˆä¸å¯¹ï¼Œå°±æ˜¯é›·åŒâ€¦.ï¼‰ä¸è¦è¯´ä¸å‡ºæ¥ã€‚</p>
<p><strong>ã€Œè¯¥æ–¹å¼åªèƒ½ç”¨äºäºŒçº§åŸŸåç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚ <code>a.test.com</code> å’Œ <code>b.test.com</code> é€‚ç”¨äºè¯¥æ–¹å¼ã€</strong>ã€‚ åªéœ€è¦ç»™é¡µé¢æ·»åŠ  <code>document.domain =&#39;test.com&#39;</code> è¡¨ç¤ºäºŒçº§åŸŸåéƒ½ç›¸åŒå°±å¯ä»¥å®ç°è·¨åŸŸã€‚</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">www.   baidu.  com     .</span><br><span class="line">ä¸‰çº§åŸŸ  äºŒçº§åŸŸ   é¡¶çº§åŸŸ   æ ¹åŸŸ</span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line">// a.test.com</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  helloa</span><br><span class="line">  &lt;iframe</span><br><span class="line">    src=<span class="string">&quot;http://b.test.com/b.html&quot;</span></span><br><span class="line">    frameborder=<span class="string">&quot;0&quot;</span></span><br><span class="line">    onload=<span class="string">&quot;load()&quot;</span></span><br><span class="line">    id=<span class="string">&quot;frame&quot;</span></span><br><span class="line">  &gt;&lt;/iframe&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    document.domain = <span class="string">&quot;test.com&quot;</span>;</span><br><span class="line">    function load() &#123;</span><br><span class="line">      console.log(frame.contentWindow.a);</span><br><span class="line">    &#125;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line">// b.test.com</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  hellob</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    document.domain = <span class="string">&quot;test.com&quot;</span>;</span><br><span class="line">    var a = <span class="number">100</span>;</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="8-window-location-hash-Iframe"><a href="#8-window-location-hash-Iframe" class="headerlink" title="8.window.location.hash + Iframe"></a>8.window.location.hash + Iframe</h3><h4 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h4><p>åŸç†å°±æ˜¯é€šè¿‡ url å¸¦ hash ï¼Œé€šè¿‡ä¸€ä¸ªéè·¨åŸŸçš„ä¸­é—´é¡µé¢æ¥ä¼ é€’æ•°æ®ã€‚</p>
<h4 id="å®ç°æµç¨‹"><a href="#å®ç°æµç¨‹" class="headerlink" title="å®ç°æµç¨‹"></a>å®ç°æµç¨‹</h4><p>ä¸€å¼€å§‹ a.html ç»™ c.html ä¼ ä¸€ä¸ª hash å€¼ï¼Œç„¶å c.html æ”¶åˆ° hash å€¼åï¼Œå†æŠŠ hash å€¼ä¼ é€’ç»™ b.htmlï¼Œæœ€å b.html å°†ç»“æœæ”¾åˆ° a.html çš„ hash å€¼ä¸­ã€‚ åŒæ ·çš„ï¼Œa.html å’Œ b.htm l æ˜¯åŒåŸŸçš„ï¼Œéƒ½æ˜¯ <code>http://localhost:8000</code>ï¼Œè€Œ c.html æ˜¯<code>http://localhost:8080</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">// a.html</span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080/hash/c.html#name1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">hash</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onhashchange</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">hash</span>);</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line">// b.html</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">parent</span>.<span class="property">parent</span>.<span class="property">location</span>.<span class="property">hash</span> = location.<span class="property">hash</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line">// c.html</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">hash</span>);</span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> iframe = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;iframe&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  iframe.<span class="property">src</span> = <span class="string">&quot;http://localhost:8000/hash/b.html#name2&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(iframe);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="9-window-name-Iframe"><a href="#9-window-name-Iframe" class="headerlink" title="9.window.name + Iframe"></a>9.window.name + Iframe</h3><p>window å¯¹è±¡çš„ name å±æ€§æ˜¯ä¸€ä¸ªå¾ˆç‰¹åˆ«çš„å±æ€§ï¼Œå½“è¯¥ window çš„ location å˜åŒ–ï¼Œç„¶åé‡æ–°åŠ è½½ï¼Œå®ƒçš„ name å±æ€§å¯ä»¥ä¾ç„¶ä¿æŒä¸å˜ã€‚</p>
<p>å…¶ä¸­ a.html å’Œ b.html æ˜¯åŒåŸŸçš„ï¼Œéƒ½æ˜¯<code>http://localhost:8000</code>ï¼Œè€Œ c.html æ˜¯<code>http://localhost:8080</code></p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// a.html</span><br><span class="line">&lt;iframe</span><br><span class="line">  <span class="attr">src</span>=<span class="string">&quot;http://localhost:8080/name/c.html&quot;</span></span><br><span class="line">  <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span></span><br><span class="line">  <span class="attr">onload</span>=<span class="string">&quot;load()&quot;</span></span><br><span class="line">  <span class="attr">id</span>=<span class="string">&quot;iframe&quot;</span></span><br><span class="line">&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let <span class="attr">first</span> = <span class="literal">true</span><span class="comment">;</span></span><br><span class="line">  // onloadäº‹ä»¶ä¼šè§¦å‘2æ¬¡ï¼Œç¬¬1æ¬¡åŠ è½½è·¨åŸŸé¡µï¼Œå¹¶ç•™å­˜æ•°æ®äºwindow.name</span><br><span class="line">  function load() &#123;</span><br><span class="line">    if (first) &#123;</span><br><span class="line">      // ç¬¬1æ¬¡onload(è·¨åŸŸé¡µ)æˆåŠŸåï¼Œåˆ‡æ¢åˆ°åŒåŸŸä»£ç†é¡µé¢</span><br><span class="line">      <span class="attr">iframe.src</span> = <span class="string">&quot;http://localhost:8000/name/b.html&quot;</span><span class="comment">;</span></span><br><span class="line">      <span class="attr">first</span> = <span class="literal">false</span><span class="comment">;</span></span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      // ç¬¬2æ¬¡onload(åŒåŸŸb.htmlé¡µ)æˆåŠŸåï¼Œè¯»å–åŒåŸŸwindow.nameä¸­æ•°æ®</span><br><span class="line">      console.log(iframe.contentWindow.name)<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>b.html ä¸ºä¸­é—´ä»£ç†é¡µï¼Œä¸ a.html åŒåŸŸï¼Œå†…å®¹ä¸ºç©ºã€‚</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// <span class="selector-tag">b</span><span class="selector-class">.html</span></span><br><span class="line">&lt;<span class="selector-tag">div</span>&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br><span class="line">// c<span class="selector-class">.html</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  window<span class="selector-class">.name</span> = &quot;ç§‹é£çš„ç¬”è®°&quot;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ iframe çš„ src å±æ€§ç”±å¤–åŸŸè½¬å‘æœ¬åœ°åŸŸï¼Œè·¨åŸŸæ•°æ®å³ç”± iframe çš„ window.name ä»å¤–åŸŸä¼ é€’åˆ°æœ¬åœ°åŸŸã€‚è¿™ä¸ªå°±å·§å¦™åœ°ç»•è¿‡äº†æµè§ˆå™¨çš„è·¨åŸŸè®¿é—®é™åˆ¶ï¼Œä½†åŒæ—¶å®ƒåˆæ˜¯å®‰å…¨æ“ä½œã€‚</p>
<h3 id="10-æµè§ˆå™¨å¼€å¯è·¨åŸŸï¼ˆç»ˆææ–¹æ¡ˆï¼‰"><a href="#10-æµè§ˆå™¨å¼€å¯è·¨åŸŸï¼ˆç»ˆææ–¹æ¡ˆï¼‰" class="headerlink" title="10.æµè§ˆå™¨å¼€å¯è·¨åŸŸï¼ˆç»ˆææ–¹æ¡ˆï¼‰"></a>10.æµè§ˆå™¨å¼€å¯è·¨åŸŸï¼ˆç»ˆææ–¹æ¡ˆï¼‰</h3><p>å…¶å®è®²ä¸‹å…¶å®è·¨åŸŸé—®é¢˜æ˜¯æµè§ˆå™¨ç­–ç•¥ï¼Œæºå¤´æ˜¯ä»–ï¼Œé‚£ä¹ˆèƒ½å¦èƒ½å…³é—­è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p>
<p><strong>ã€Œæ³¨æ„äº‹é¡¹: å› ä¸ºæµè§ˆå™¨æ˜¯ä¼—å¤š web é¡µé¢å…¥å£ã€‚æˆ‘ä»¬æ˜¯å¦ä¹Ÿå¯ä»¥åƒå®¢æˆ·ç«¯é‚£ç§ï¼Œå°±æ˜¯ç”¨ä¸€ä¸ªå•ç‹¬çš„ä¸“é—¨å®¿ä¸»æµè§ˆå™¨ï¼Œæ¥æ‰“å¼€è°ƒè¯•æˆ‘ä»¬çš„å¼€å‘é¡µé¢ã€‚ä¾‹å¦‚è¿™é‡Œä»¥ chrome canary ä¸ºä¾‹ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä¸“é—¨è°ƒè¯•é¡µé¢çš„æµè§ˆå™¨ï¼Œä¸ä¼šç”¨å®ƒæ¥è®¿é—®å…¶ä»– web urlã€‚å› æ­¤å®ƒä¹Ÿç›¸å¯¹äºå®‰å…¨ä¸€äº›ã€‚å½“ç„¶è¿™ä¸ªæ–¹å¼ï¼Œåªé™äºå½“ä½ çœŸçš„è¢«è·¨åŸŸæŠ˜ç£¨åœ°å´©æºƒçš„æ—¶å€™æ‰å»ºè®®ä½¿ç”¨ä»¥ä¸‹ã€‚ä½¿ç”¨åï¼Œè¯·ä»¥æ­£å¸¸çš„æ–¹å¼å°†ä»–æ‰“å¼€ï¼Œä»¥å…ä½ ä¸å°å¿ƒç”¨è¿™ä¸ªæ¨¡å¼å¹²äº†å…¶ä»–çš„äº‹ã€‚ã€</strong></p>
<h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ‰¾åˆ°ä½ å®‰è£…çš„ç›®å½•</span><br><span class="line">.\Google\Chrome\Application\chrome<span class="selector-class">.exe</span> <span class="attr">--disable-web-security</span> <span class="attr">--user-data-dir</span>=xxxx</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h4 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h4><p><code>~/Downloads/chrome-data</code> è¿™ä¸ªç›®å½•å¯ä»¥è‡ªå®šä¹‰.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Google\ Chrome\ Canary<span class="selector-class">.app</span>/Contents/MacOS/Google\ Chrome\ Canary  <span class="attr">--disable-web-security</span> <span class="attr">--user-data-dir</span>=~/Downloads/chrome-data</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h4 id="æ•ˆæœå±•ç¤º"><a href="#æ•ˆæœå±•ç¤º" class="headerlink" title="æ•ˆæœå±•ç¤º"></a>æ•ˆæœå±•ç¤º</h4><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441ced02165c~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200413143102377">image-20200413143102377</p>
<p>å—¯ï¼Œä½¿ç”¨èµ·æ¥å¾ˆé¦™ï¼Œä½†æ˜¯å†æ¬¡æé†’ï¼Œä¸€èˆ¬æƒ…å†µåƒä¸‡åˆ«è½»æ˜“ä½¿ç”¨è¿™ä¸ªæ–¹å¼ï¼Œè¿™ä¸ªæ–¹å¼å¥½æ¯”ä¸ƒä¼¤æ‹³ï¼Œä½¿ç”¨çš„å¥½å¨åŠ›æ— æ¯”ï¼Œä½¿ç”¨ä¸å¥½ï¼Œå¾ˆå®¹æ˜“ä¼¤åˆ°è‡ªå·±ã€‚</p>
<h2 id="ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸï¼Ÿ"><a href="#ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸï¼Ÿ" class="headerlink" title="ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸï¼Ÿ"></a>ä¸‰ã€ä¸ºä»€ä¹ˆéœ€è¦è·¨åŸŸï¼Ÿ</h2><p>åœ¨æœ€ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬çŸ¥é“äº†ï¼Œè·¨åŸŸåªå­˜åœ¨äºæµè§ˆå™¨ç«¯ã€‚è€Œæµè§ˆå™¨ä¸º web æä¾›è®¿é—®å…¥å£ã€‚æˆ‘ä»¬åœ¨å¯ä»¥æµè§ˆå™¨å†…æ‰“å¼€å¾ˆå¤šé¡µé¢ã€‚æ­£æ˜¯è¿™æ ·çš„å¼€æ”¾å½¢æ€ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹ä»–æœ‰æ‰€é™åˆ¶ã€‚å°±æ¯”å¦‚æ—å­å¤§äº†ï¼Œä»€ä¹ˆé¸Ÿéƒ½æœ‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªç»Ÿä¸€çš„è§„èŒƒæ¥è¿›è¡Œçº¦å®šæ‰èƒ½ä¿éšœè¿™ä¸ªå®‰å…¨æ€§ã€‚</p>
<h3 id="1-é™åˆ¶ä¸åŒæºçš„è¯·æ±‚"><a href="#1-é™åˆ¶ä¸åŒæºçš„è¯·æ±‚" class="headerlink" title="1.é™åˆ¶ä¸åŒæºçš„è¯·æ±‚"></a>1.é™åˆ¶ä¸åŒæºçš„è¯·æ±‚</h3><p>è¿™é‡Œè¿˜æ˜¯ç”¨æœ€å¸¸ç”¨çš„æ–¹å¼æ¥è®²è§£ï¼Œä¾‹å¦‚ç”¨æˆ·ç™»å½• a ç½‘ç«™ï¼ŒåŒæ—¶æ–°å¼€ tab æ‰“å¼€äº† b ç½‘ç«™ï¼Œå¦‚æœä¸é™åˆ¶åŒæºï¼Œ b å¯ä»¥åƒ a ç½‘ç«™å‘èµ·ä»»ä½•è¯·æ±‚ï¼Œä¼šè®©ä¸æ³•åˆ†å­æœ‰æœºå¯è¶ã€‚</p>
<h3 id="2-é™åˆ¶-dom-æ“ä½œ"><a href="#2-é™åˆ¶-dom-æ“ä½œ" class="headerlink" title="2.é™åˆ¶ dom æ“ä½œ"></a>2.é™åˆ¶ dom æ“ä½œ</h3><p>æˆ‘ä¸¾ä¸ªä¾‹å­å§, ä½ å…ˆç™»å½•ä¸‹ <a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> ,ç„¶åè®¿é—®æˆ‘è¿™ä¸ªç½‘å€ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://zerolty.com/node-demo/index.html">https://zerolty.com/node-demo/index.html</a></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/1717441cf1366618~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="image-20200413190413758">image-20200413190413758</p>
<p>ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªå’ŒçœŸå®çš„ç™¾åº¦ä¸€æ¨¡ä¸€æ ·ï¼Œå¦‚æœå†æŠŠåŸŸåæçš„ç›¸ä¼¼ä¸€äº›ï¼Œæ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“è¢«éª—ï¼Œå¦‚æœå¯ä»¥è¿›è¡Œ dom æ“ä½œâ€¦é‚£ä¹ˆå¤§å®¶çš„ä¿¡æ¯åœ¨è¿™ç§é’“é±¼ç½‘ç«™çœ¼é‡Œéƒ½æ˜¯ä¸€é¢—é¢—å°ç™½èœï¼Œç­‰ç€è¢«æ”¶å‰²ã€‚</p>
<blockquote>
<p>â</p>
<p>å¯ä»¥åœ¨ http è¿”å›å¤´ æ·»åŠ <code>X-Frame-Options: SAMEORIGIN</code> é˜²æ­¢è¢«åˆ«äººæ·»åŠ è‡³ iframeã€‚</p>
<p>â</p>
</blockquote>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>ä»¥ä¸Šæœ€å¸¸ç”¨çš„å°±æ˜¯å‰ 4 ç§æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯ç¬¬ 2 ç§éå¸¸å¸¸è§ï¼Œæˆ‘é‡Œé¢ä¹Ÿæåˆ°äº†å¤šç§ç¤ºä¾‹ï¼Œå¤§å®¶å¯ä»¥æ…¢æ…¢æ¶ˆåŒ–ä¸€ä¸‹ã€‚å¸Œæœ›æœªæ¥æœ‰æ›´åŠ å®‰å…¨çš„æ–¹å¼æ¥é™åˆ¶ web ï¼Œè§£å†³è·¨åŸŸçš„å¤´ç–¼ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚</p>
<p>ä½œè€…ï¼šç¨‹åºå‘˜ç§‹é£<br>é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844904126246027278">https://juejin.cn/post/6844904126246027278</a><br>æ¥æºï¼šç¨€åœŸæ˜é‡‘</p>
</div><div class="tags"><a href="/tags/å‰ç«¯"><i class="fa fa-tag">å‰ç«¯</i></a></div><div class="post-nav"><a class="pre" href="/2020/04/15/java/Spring%20Boot%20%E7%9A%84%2016%20%E6%9D%A1%E5%AE%9E%E8%B7%B5%E8%A7%A3%E8%AF%BB/">Spring Boot çš„ 16 æ¡å®è·µè§£è¯»</a><a class="next" href="/2020/03/09/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/%E8%81%8A%E8%81%8AAPI%E7%BD%91%E5%85%B3%E7%9A%84%E4%BD%9C%E7%94%A8/">èŠèŠAPIç½‘å…³çš„ä½œç”¨</a></div><div id="waline"></div><script src="//unpkg.com/@waline/client@v2/dist/waline.js"></script><link rel="stylesheet" type="text/css" href="//unpkg.com/@waline/client@v2/dist/waline.css"><script>let metaInfo = ['nick', 'mail', 'link']
let requiredMeta = 'nick,mail'.split(',').filter(item => {
  return metaInfo.indexOf(item) > -1
})
Waline.init({
  el: '#waline',
  comment: true,
  serverURL: 'https://comment.aimak.cn',
  pageSize: '30',
  wordLimit: '500',
  requiredMeta,
})
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img src="/img/avatar.png"/></a><p>è®¤çœŸç”Ÿæ´».</p><a class="info-icon" href="https://twitter.com/fantasykaicc" title="Twitter" target="_blank" style="margin-inline:5px"> <i class="fa fa-twitter-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:makren@126.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/fantasykai" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/">AI</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%B9%E5%99%A8/">å®¹å™¨</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</a><span class="category-list-count">34</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/">æŠ€æœ¯å°æ ˆ</a><span class="category-list-count">113</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%AE%B0/">æ‚è®°</a><span class="category-list-count">70</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">æµ‹è¯•</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%93%E5%AD%98/">ç¼“å­˜</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">ç½‘ç»œ</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%AD%E5%BD%95/">è¯­å½•</a><span class="category-list-count">16</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">æ·±åº¦å­¦ä¹ </a> <a href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" style="font-size: 15px;">çŸ¥è¯†å›¾è°±</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/Chrome-%E6%95%88%E7%8E%87%E6%8F%92%E4%BB%B6/" style="font-size: 15px;">Chrome æ•ˆç‡æ’ä»¶</a> <a href="/tags/idea/" style="font-size: 15px;">idea</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 15px;">è¿ç»´</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">å·¥å…·</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/Mysql/" style="font-size: 15px;">Mysql</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 15px;">ç¼“å­˜</a> <a href="/tags/Jenkins/" style="font-size: 15px;">Jenkins</a> <a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 15px;">å®¹å™¨</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/restful/" style="font-size: 15px;">restful</a> <a href="/tags/IPv6/" style="font-size: 15px;">IPv6</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/PMO/" style="font-size: 15px;">PMO</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">å‰ç«¯</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/" style="font-size: 15px;">æŠ€æœ¯å°æ ˆ</a> <a href="/tags/CAP/" style="font-size: 15px;">CAP</a> <a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 15px;">æ¶æ„</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/ideas/" style="font-size: 15px;">ideas</a> <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">é«˜å¹¶å‘</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">å¹¶å‘</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 15px;">æµ‹è¯•</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 15px;">æ—¥å¿—</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/SDN/" style="font-size: 15px;">SDN</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">ç½‘ç»œ</a> <a href="/tags/%E6%8A%A5%E5%91%8A%E5%88%86%E4%BA%AB/" style="font-size: 15px;">æŠ¥å‘Šåˆ†äº«</a> <a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 15px;">æ‚è®°</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%9B%A2%E9%98%9F/" style="font-size: 15px;">æŠ€æœ¯å›¢é˜Ÿ</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87/" style="font-size: 15px;">å¼€å‘æ•ˆç‡</a> <a href="/tags/thymeleaf/" style="font-size: 15px;">thymeleaf</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/%E8%AF%AD%E5%BD%95/" style="font-size: 15px;">è¯­å½•</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2024/03/26/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/%E5%9F%BA%E4%BA%8E%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BD%91%E7%BB%9C%E6%B5%81%E9%87%8F%E9%A2%84%E6%B5%8B/">åŸºäºç¥ç»ç½‘ç»œçš„ç½‘ç»œæµé‡é¢„æµ‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/01/06/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/2023%20%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E6%8A%80%E6%9C%AF%E7%B2%BE%E9%80%89%E6%8A%80%E6%9C%AF%E5%B9%B2%E8%B4%A7/">2023 å“”å“©å“”å“©æŠ€æœ¯ç²¾é€‰æŠ€æœ¯å¹²è´§</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/12/28/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/2023%20%E4%B8%AD%E5%9B%BD%E5%BC%80%E6%BA%90%E5%BC%80%E5%8F%91%E8%80%85%E6%8A%A5%E5%91%8A/">2023 ä¸­å›½å¼€æºå¼€å‘è€…æŠ¥å‘Š</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/11/23/%E6%9D%82%E8%AE%B0/%E7%B3%BB%E7%BB%9F%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87%E8%A7%84%E8%8C%83/">ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡è§„èŒƒ</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/16/%E6%9D%82%E8%AE%B0/%E8%BF%90%E5%8A%A8%E7%9A%84%E6%9D%A0%E6%9D%86%EF%BC%9A%E7%9C%9F%E6%AD%A3%E6%9C%89%E6%95%88%E7%9A%84%E9%94%BB%E7%82%BC%E6%96%B9%E6%B3%95%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F/">å¾—åˆ°ç²¾é€‰ï½œè¿åŠ¨çš„æ æ†ï¼šçœŸæ­£æœ‰æ•ˆçš„é”»ç‚¼æ–¹æ³•æ˜¯ä»€ä¹ˆ</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/08/%E7%BD%91%E7%BB%9C/%E8%BF%90%E8%90%A5%E5%95%86%E7%9A%84%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E6%98%AF%E4%BB%80%E4%B9%88/">è¿è¥å•†çš„ç½‘ç»œæ¶æ„</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/01/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/%E5%BC%80%E6%BA%90%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7%E7%AE%80%E4%BB%8B/">å¼€æºç³»ç»Ÿç›‘æ§å·¥å…·ç®€ä»‹</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/09/21/%E5%B7%A5%E5%85%B7/%E4%BD%BF%E7%94%A8%E8%84%9A%E6%9C%AC%E6%8E%A9%E7%9B%96MBP%E9%97%AA%E7%83%81%E9%97%AE%E9%A2%98/">ä½¿ç”¨è„šæœ¬æ©ç›–MBPé—ªçƒé—®é¢˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/09/08/%E8%AF%AD%E5%BD%95/%E5%8F%B2%E9%93%81%E7%94%9F%E8%AF%AD%E5%BD%9502/">å²é“ç”Ÿè¯­å½•02</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/09/07/%E8%AF%AD%E5%BD%95/%E5%8F%B2%E9%93%81%E7%94%9F%E8%AF%AD%E5%BD%9501/">å²é“ç”Ÿè¯­å½•01</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><div id="widget-waline-list"></div><script type="text/javascript" id="recent-comment" serverURL="https://comment.aimak.cn" count="5" src="/js/recent-comments.js?v=1.0.0" async="async"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://landscape.cncf.io/" title="CNCF" target="_blank">CNCF</a><ul></ul><a href="https://segmentfault.com/" title="SegmentFault" target="_blank">SegmentFault</a><ul></ul><a href="https://blog.csdn.net/junbaozi/category_11649936_3.html" title="CloudNative" target="_blank">CloudNative</a><ul></ul><a href="https://excalidraw.com/" title="excalidraw" target="_blank">excalidraw</a><ul></ul><a href="https://tudan.blog.csdn.net/?type=lately" title="ç‹å¦" target="_blank">ç‹å¦</a><ul></ul><a href="https://aspoem.com/zh-Hans" target="_blank"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2024 <a href="/." rel="nofollow">æ«å“²'sæ–‡æ –å°ç­‘.</a><a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">ï½œè‹ICPå¤‡18013756å·-1</a><!--a(rel='nofollow', target='_blank', href='https://github.com/tufu9441/maupassant-hexo')  Theme--><!--|  by--><!--a(rel='nofollow', target='_blank', href='https://github.com/pagecho')  Cho.--></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>