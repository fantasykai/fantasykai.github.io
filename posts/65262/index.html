<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="fantasykai`blog"><title>Javaå¤šçº¿ç¨‹æ€»ç»“ | æ«å“²'sæ–‡æ –å°ç­‘</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + '2bb92548008bd1f1f88213efd40c8dad';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Javaå¤šçº¿ç¨‹æ€»ç»“</h1><a id="logo" href="/.">æ«å“²'sæ–‡æ –å°ç­‘</a><p class="description">å›å­ç»ˆæ—¥ä¹¾ä¹¾ï¼Œå¤•æƒ•è‹¥å‰ï¼Œæ— å’</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/tags/"><i class="fa fa-tag"> æ ‡ç­¾</i></a><a href="/timeline/"><i class="fa fa-book"> å†å²</i></a><a href="/blogroll/"><i class="fa fa-external-link"> æ”¶è—é“¾æ¥</i></a><a href="/2048/"><i class="fa fa-gamepad"> æ”¾æ¾ä¸‹</i></a><a href="/guestbook/"><i class="fa fa-comments"> ç•™è¨€</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Javaå¤šçº¿ç¨‹æ€»ç»“</h1><div class="post-meta">2019-09-23<span> | </span><span class="category"><a href="/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/">æŠ€æœ¯å°æ ˆ</a></span></div><a class="disqus-comment-count" href="/posts/65262/#vcomment"><span class="waline-comment-count" id="/posts/65262/"></span><span> æ¡è¯„è®º</span></a><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98"><span class="toc-number">1.</span> <span class="toc-text">ä¸€ã€å¤šçº¿ç¨‹ä¸ºä»€ä¹ˆä¼šæœ‰å¹¶å‘é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Java-%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B%EF%BC%88JMM%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">äºŒã€Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%B9%B6%E5%8F%91%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="toc-number">3.</span> <span class="toc-text">ä¸‰ã€å¹¶å‘ä¸‰è¦ç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%8C%E6%89%8D%E8%83%BD%E8%A7%A3%E5%86%B3%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98%EF%BC%9F%EF%BC%88%E9%87%8D%E7%82%B9%EF%BC%89"><span class="toc-number">4.</span> <span class="toc-text">å››ã€æ€ä¹ˆåšï¼Œæ‰èƒ½è§£å†³å¹¶å‘é—®é¢˜ï¼Ÿï¼ˆé‡ç‚¹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81volatile"><span class="toc-number">4.1.</span> <span class="toc-text">ä¸€ã€volatile</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-volatile-%E7%89%B9%E6%80%A7"><span class="toc-number">4.1.1.</span> <span class="toc-text">1.1 volatile ç‰¹æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">4.1.2.</span> <span class="toc-text">1.2 ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%8D%95%E4%BE%8B%E5%8F%8C%E9%87%8D%E9%94%81%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E5%88%B0volatile%EF%BC%9F"><span class="toc-number">4.1.3.</span> <span class="toc-text">1.3 å•ä¾‹åŒé‡é”ä¸ºä»€ä¹ˆè¦ç”¨åˆ°volatileï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-volatile-%E5%8E%9F%E7%90%86"><span class="toc-number">4.1.4.</span> <span class="toc-text">1.4 volatile åŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-5-volatile-%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7"><span class="toc-number">4.1.5.</span> <span class="toc-text">1.5 volatile çš„å±€é™æ€§</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81Synchronized"><span class="toc-number">4.2.</span> <span class="toc-text">äºŒã€Synchronized</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-Synchronized-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">4.2.1.</span> <span class="toc-text">2.1 Synchronized ä½¿ç”¨åœºæ™¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-Synchronized-%E5%8E%9F%E7%90%86"><span class="toc-number">4.2.2.</span> <span class="toc-text">2.2 Synchronized åŸç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-Synchronized-%E9%94%81%E7%9A%84%E5%8D%87%E7%BA%A7"><span class="toc-number">4.2.3.</span> <span class="toc-text">2.3 Synchronized é”çš„å‡çº§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-Synchronized-%E7%BC%BA%E7%82%B9"><span class="toc-number">4.2.4.</span> <span class="toc-text">2.4  Synchronized ç¼ºç‚¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81ReentrantLock"><span class="toc-number">4.3.</span> <span class="toc-text">ä¸‰ã€ReentrantLock</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-ReentrantLock-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.3.1.</span> <span class="toc-text">3.1 ReentrantLock çš„ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Condition-%E6%9D%A1%E4%BB%B6"><span class="toc-number">4.3.2.</span> <span class="toc-text">3.2 Condition æ¡ä»¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%85%AC%E5%B9%B3%E9%94%81%E4%B8%8E%E9%9D%9E%E5%85%AC%E5%B9%B3%E9%94%81"><span class="toc-number">4.3.3.</span> <span class="toc-text">3.3 å…¬å¹³é”ä¸éå…¬å¹³é”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-ReentrantLock-%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">4.3.4.</span> <span class="toc-text">3.4 ReentrantLock  æ³¨æ„ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%B9%B6%E5%8F%91%E5%8C%85"><span class="toc-number">4.4.</span> <span class="toc-text">å››ã€å¹¶å‘åŒ…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-ConcurrentHashMap"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.1 ConcurrentHashMap</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-LinkBlockingQueue"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.2 LinkBlockingQueue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E5%8E%9F%E5%AD%90%E6%93%8D%E4%BD%9C%E7%B1%BB%EF%BC%9AAtomicInteger"><span class="toc-number">4.4.3.</span> <span class="toc-text">4.3  åŸå­æ“ä½œç±»ï¼šAtomicInteger</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">5.</span> <span class="toc-text">äº”ã€æ€»ç»“</span></a></li></ol></div></div><div class="post-content"><p>è¿™ç¯‡æ–‡ç« å°†æ€»ç»“å¤šçº¿ç¨‹å¹¶å‘çš„å„ç§å¤„ç†æ–¹å¼ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 id="ä¸€ã€å¤šçº¿ç¨‹ä¸ºä»€ä¹ˆä¼šæœ‰å¹¶å‘é—®é¢˜"><a href="#ä¸€ã€å¤šçº¿ç¨‹ä¸ºä»€ä¹ˆä¼šæœ‰å¹¶å‘é—®é¢˜" class="headerlink" title="ä¸€ã€å¤šçº¿ç¨‹ä¸ºä»€ä¹ˆä¼šæœ‰å¹¶å‘é—®é¢˜"></a>ä¸€ã€å¤šçº¿ç¨‹ä¸ºä»€ä¹ˆä¼šæœ‰å¹¶å‘é—®é¢˜</h2><p>ä¸ºä»€ä¹ˆå¤šçº¿ç¨‹åŒæ—¶è®¿é—®ï¼ˆè¯»å†™ï¼‰åŒä¸ªå˜é‡ï¼Œä¼šæœ‰å¹¶å‘é—®é¢˜ï¼Ÿ</p>
<blockquote>
<ol>
<li>Java å†…å­˜æ¨¡å‹è§„å®šäº†æ‰€æœ‰çš„å˜é‡éƒ½å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯æ¡çº¿ç¨‹æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ã€‚</li>
<li>çº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ä¿å­˜äº†è¯¥çº¿ç¨‹ä¸­ç”¨åˆ°çš„å˜é‡çš„ä¸»å†…å­˜å‰¯æœ¬æ‹·è´ï¼Œçº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥è¯»å†™ä¸»å†…å­˜ã€‚</li>
<li>çº¿ç¨‹è®¿é—®ä¸€ä¸ªå˜é‡ï¼Œé¦–å…ˆå°†å˜é‡ä»ä¸»å†…å­˜æ‹·è´åˆ°å·¥ä½œå†…å­˜ï¼Œå¯¹å˜é‡çš„å†™æ“ä½œï¼Œä¸ä¼šé©¬ä¸ŠåŒæ­¥åˆ°ä¸»å†…å­˜ã€‚</li>
<li>ä¸åŒçš„çº¿ç¨‹ä¹‹é—´ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®å¯¹æ–¹å·¥ä½œå†…å­˜ä¸­çš„å˜é‡ï¼Œçº¿ç¨‹é—´å˜é‡çš„ä¼ é€’å‡éœ€è¦è‡ªå·±çš„å·¥ä½œå†…å­˜å’Œä¸»å­˜ä¹‹é—´è¿›è¡Œæ•°æ®åŒæ­¥è¿›è¡Œã€‚</li>
</ol>
</blockquote>
<h2 id="äºŒã€Java-å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰"><a href="#äºŒã€Java-å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰" class="headerlink" title="äºŒã€Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰"></a>äºŒã€Java å†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰</h2><p>Java å†…å­˜æ¨¡å‹(JMM) ä½œç”¨äºå·¥ä½œå†…å­˜ï¼ˆæœ¬åœ°å†…å­˜ï¼‰å’Œä¸»å­˜ä¹‹é—´æ•°æ®åŒæ­¥è¿‡ç¨‹ï¼Œå®ƒè§„å®šäº†å¦‚ä½•åšæ•°æ®åŒæ­¥ä»¥åŠä»€ä¹ˆæ—¶å€™åšæ•°æ®åŒæ­¥ï¼Œå¦‚ä¸‹å›¾ã€‚</p>
<p><img src="https://aimak.cn/blog_img/java/jmm-model.jpg" alt="JMM"></p>
<h2 id="ä¸‰ã€å¹¶å‘ä¸‰è¦ç´ "><a href="#ä¸‰ã€å¹¶å‘ä¸‰è¦ç´ " class="headerlink" title="ä¸‰ã€å¹¶å‘ä¸‰è¦ç´ "></a>ä¸‰ã€å¹¶å‘ä¸‰è¦ç´ </h2><p><strong>åŸå­æ€§</strong>ï¼šåœ¨ä¸€ä¸ªæ“ä½œä¸­ï¼ŒCPU ä¸å¯ä»¥åœ¨ä¸­é€”æš‚åœç„¶åå†è°ƒåº¦ï¼Œå³ä¸è¢«ä¸­æ–­æ“ä½œï¼Œè¦ä¹ˆæ‰§è¡Œå®Œæˆï¼Œè¦ä¹ˆå°±ä¸æ‰§è¡Œã€‚</p>
<p><strong>å¯è§æ€§</strong>ï¼šå¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼ã€‚</p>
<p><strong>æœ‰åºæ€§</strong>ï¼šç¨‹åºæ‰§è¡Œçš„é¡ºåºæŒ‰ç…§ä»£ç çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</p>
<h2 id="å››ã€æ€ä¹ˆåšï¼Œæ‰èƒ½è§£å†³å¹¶å‘é—®é¢˜ï¼Ÿï¼ˆé‡ç‚¹ï¼‰"><a href="#å››ã€æ€ä¹ˆåšï¼Œæ‰èƒ½è§£å†³å¹¶å‘é—®é¢˜ï¼Ÿï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="å››ã€æ€ä¹ˆåšï¼Œæ‰èƒ½è§£å†³å¹¶å‘é—®é¢˜ï¼Ÿï¼ˆé‡ç‚¹ï¼‰"></a>å››ã€æ€ä¹ˆåšï¼Œæ‰èƒ½è§£å†³å¹¶å‘é—®é¢˜ï¼Ÿï¼ˆé‡ç‚¹ï¼‰</h2><p>ä¸‹é¢ç»“åˆä¸åŒåœºæ™¯åˆ†æè§£å†³å¹¶å‘é—®é¢˜çš„å¤„ç†æ–¹å¼ã€‚</p>
<h3 id="ä¸€ã€volatile"><a href="#ä¸€ã€volatile" class="headerlink" title="ä¸€ã€volatile"></a>ä¸€ã€volatile</h3><h4 id="1-1-volatile-ç‰¹æ€§"><a href="#1-1-volatile-ç‰¹æ€§" class="headerlink" title="1.1 volatile ç‰¹æ€§"></a>1.1 volatile ç‰¹æ€§</h4><p><strong>ä¿è¯å¯è§æ€§ï¼Œä¸ä¿è¯åŸå­æ€§</strong></p>
<blockquote>
<ol>
<li>å½“å†™ä¸€ä¸ªvolatileå˜é‡æ—¶ï¼ŒJVMä¼šæŠŠæœ¬åœ°å†…å­˜çš„å˜é‡å¼ºåˆ¶åˆ·æ–°åˆ°ä¸»å†…å­˜ä¸­</li>
<li>è¿™ä¸ªå†™æ“ä½œå¯¼è‡´å…¶ä»–çº¿ç¨‹ä¸­çš„ç¼“å­˜æ— æ•ˆï¼Œå…¶ä»–çº¿ç¨‹è¯»ï¼Œä¼šä»ä¸»å†…å­˜è¯»ã€‚volatileçš„å†™æ“ä½œå¯¹å…¶å®ƒçº¿ç¨‹å®æ—¶å¯è§ã€‚</li>
</ol>
</blockquote>
<p><strong>ç¦æ­¢æŒ‡ä»¤é‡æ’åº</strong> æŒ‡ä»¤é‡æ’åºæ˜¯æŒ‡ç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ºäº†ä¼˜åŒ–ç¨‹åºæ€§èƒ½å¯¹æŒ‡ä»¤è¿›è¡Œæ’åºçš„ä¸€ç§æ‰‹æ®µï¼Œéœ€è¦éµå®ˆä¸€å®šè§„åˆ™ï¼š</p>
<blockquote>
<ol>
<li>ä¸ä¼šå¯¹å­˜åœ¨ä¾èµ–å…³ç³»çš„æŒ‡ä»¤é‡æ’åºï¼Œä¾‹å¦‚ a &#x3D; 1;b &#x3D; a;  a å’Œbå­˜åœ¨ä¾èµ–å…³ç³»ï¼Œä¸ä¼šè¢«é‡æ’åº</li>
<li>ä¸èƒ½å½±å“å•çº¿ç¨‹ä¸‹çš„æ‰§è¡Œç»“æœã€‚æ¯”å¦‚ï¼ša&#x3D;1;b&#x3D;2;c&#x3D;a+bè¿™ä¸‰ä¸ªæ“ä½œ,å‰ä¸¤ä¸ªæ“ä½œå¯ä»¥é‡æ’åºï¼Œä½†æ˜¯c&#x3D;a+bä¸ä¼šè¢«é‡æ’åºï¼Œå› ä¸ºè¦ä¿è¯ç»“æœæ˜¯3</li>
</ol>
</blockquote>
<h4 id="1-2-ä½¿ç”¨åœºæ™¯"><a href="#1-2-ä½¿ç”¨åœºæ™¯" class="headerlink" title="1.2 ä½¿ç”¨åœºæ™¯"></a>1.2 ä½¿ç”¨åœºæ™¯</h4><p>å¯¹äºä¸€ä¸ªå˜é‡ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå†™æ“ä½œï¼Œå…¶å®ƒçº¿ç¨‹éƒ½æ˜¯è¯»æ“ä½œï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨ volatile ä¿®é¥°è¿™ä¸ªå˜é‡ã€‚</p>
<h4 id="1-3-å•ä¾‹åŒé‡é”ä¸ºä»€ä¹ˆè¦ç”¨åˆ°volatileï¼Ÿ"><a href="#1-3-å•ä¾‹åŒé‡é”ä¸ºä»€ä¹ˆè¦ç”¨åˆ°volatileï¼Ÿ" class="headerlink" title="1.3 å•ä¾‹åŒé‡é”ä¸ºä»€ä¹ˆè¦ç”¨åˆ°volatileï¼Ÿ"></a>1.3 å•ä¾‹åŒé‡é”ä¸ºä»€ä¹ˆè¦ç”¨åˆ°volatileï¼Ÿ</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TestInstance</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> TestInstance mInstance;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> TestInstance <span class="title">getInstance</span>()</span>&#123;       <span class="comment">//1</span></span><br><span class="line">    <span class="keyword">if</span> (mInstance == <span class="literal">null</span>)&#123;                     <span class="comment">//2</span></span><br><span class="line">        synchronized (TestInstance.<span class="keyword">class</span>)&#123;      <span class="comment">//3</span></span><br><span class="line">            <span class="keyword">if</span> (mInstance == <span class="literal">null</span>)&#123;             <span class="comment">//4</span></span><br><span class="line">                mInstance = <span class="keyword">new</span> TestInstance(); <span class="comment">//5</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> mInstance;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>}</p>
<p>å‡å¦‚æ²¡æœ‰ç”¨volatileï¼Œå¹¶å‘æƒ…å†µä¸‹ä¼šå‡ºç°é—®é¢˜ï¼Œçº¿ç¨‹Aæ‰§è¡Œåˆ°æ³¨é‡Š5 <code>new TestInstance()</code> çš„æ—¶å€™ï¼Œåˆ†ä¸ºå¦‚ä¸‹å‡ ä¸ªå‡ æ­¥æ“ä½œï¼š</p>
<ol>
<li>åˆ†é…å†…å­˜</li>
<li>åˆå§‹åŒ–å¯¹è±¡</li>
<li>mInstance æŒ‡å‘å†…å­˜</li>
</ol>
<p>è¿™æ—¶å€™å¦‚æœå‘ç”ŸæŒ‡ä»¤é‡æ’ï¼Œæ‰§è¡Œé¡ºåºæ˜¯132ï¼Œæ‰§è¡Œåˆ°ç¬¬3çš„æ—¶å€™ï¼Œçº¿ç¨‹Båˆšå¥½è¿›æ¥äº†ï¼Œå¹¶ä¸”æ‰§è¡Œåˆ°æ³¨é‡Š2ï¼Œè¿™æ—¶å€™åˆ¤æ–­mInstance ä¸ä¸ºç©ºï¼Œç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªåˆå§‹åŒ–çš„å¯¹è±¡ã€‚æ‰€ä»¥ä½¿ç”¨volatileå…³é”®å­—æ¥ç¦æ­¢æŒ‡ä»¤é‡æ’åºã€‚</p>
<h4 id="1-4-volatile-åŸç†"><a href="#1-4-volatile-åŸç†" class="headerlink" title="1.4 volatile åŸç†"></a>1.4 volatile åŸç†</h4><p>åœ¨JVMåº•å±‚volatileæ˜¯é‡‡ç”¨<strong>å†…å­˜å±éšœ</strong>æ¥å®ç°çš„ï¼Œå†…å­˜å±éšœä¼šæä¾›3ä¸ªåŠŸèƒ½ï¼š</p>
<blockquote>
<ol>
<li>å®ƒç¡®ä¿æŒ‡ä»¤é‡æ’åºæ—¶ä¸ä¼šæŠŠå…¶åé¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ï¼Œä¹Ÿä¸ä¼šæŠŠå‰é¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœçš„åé¢ï¼›å³åœ¨æ‰§è¡Œåˆ°å†…å­˜å±éšœè¿™å¥æŒ‡ä»¤æ—¶ï¼Œåœ¨å®ƒå‰é¢çš„æ“ä½œå·²ç»å…¨éƒ¨å®Œæˆï¼›</li>
<li>å®ƒä¼šå¼ºåˆ¶å°†ç¼“å­˜çš„ä¿®æ”¹æ“ä½œç«‹å³å†™åˆ°ä¸»å†…å­˜</li>
<li>å†™æ“ä½œä¼šå¯¼è‡´å…¶å®ƒCPUä¸­çš„ç¼“å­˜è¡Œå¤±æ•ˆï¼Œå†™ä¹‹åï¼Œå…¶å®ƒçº¿ç¨‹çš„è¯»æ“ä½œä¼šä»ä¸»å†…å­˜è¯»ã€‚</li>
</ol>
</blockquote>
<h4 id="1-5-volatile-çš„å±€é™æ€§"><a href="#1-5-volatile-çš„å±€é™æ€§" class="headerlink" title="1.5 volatile çš„å±€é™æ€§"></a>1.5 volatile çš„å±€é™æ€§</h4><p><strong>volatile åªèƒ½ä¿è¯å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§</strong>å†™æ“ä½œå¯¹å…¶å®ƒçº¿ç¨‹å¯è§ï¼Œä½†æ˜¯ä¸èƒ½è§£å†³å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™çš„é—®é¢˜ã€‚</p>
<h3 id="äºŒã€Synchronized"><a href="#äºŒã€Synchronized" class="headerlink" title="äºŒã€Synchronized"></a>äºŒã€Synchronized</h3><h4 id="2-1-Synchronized-ä½¿ç”¨åœºæ™¯"><a href="#2-1-Synchronized-ä½¿ç”¨åœºæ™¯" class="headerlink" title="2.1 Synchronized ä½¿ç”¨åœºæ™¯"></a>2.1 Synchronized ä½¿ç”¨åœºæ™¯</h4><p>å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™ä¸€ä¸ªå˜é‡ã€‚</p>
<p>ä¾‹å¦‚å”®ç¥¨ï¼Œä½™ç¥¨æ˜¯100å¼ ï¼Œçª—å£Aå’Œçª—å£BåŒæ—¶å„å–å‡ºä¸€å¼ ç¥¨ï¼Œ å‡å¦‚ä½™ç¥¨å˜é‡ç”¨ volatile ä¿®é¥°ï¼Œæ˜¯æœ‰é—®é¢˜çš„ã€‚<br> Açª—å£è·å–ä½™ç¥¨æ˜¯100ï¼ŒBçª—å£è·å–ä½™ç¥¨ä¹Ÿæ˜¯100ï¼ŒAå–å‡ºä¸€å¼ å˜æˆ99ï¼Œåˆ·æ–°å›ä¸»å†…å­˜ï¼ŒåŒæ—¶Bå–å‡ºä¸€å¼ å˜æˆ99ï¼Œä¹Ÿåˆ·æ–°å›ä¸»å†…å­˜ï¼Œä¼šå¯¼è‡´æœ€ç»ˆä¸»å†…å­˜ä½™ç¥¨æ˜¯99è€Œä¸æ˜¯98ã€‚</p>
<p>å‰é¢è¯´åˆ° volatile çš„å±€é™æ€§ï¼Œå°±æ˜¯å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸€èˆ¬å¯ä»¥ä½¿ç”¨<strong>Synchronized</strong>ã€‚</p>
<p><strong>Synchronized å¯ä»¥ä¿è¯åŒä¸€æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯æ‰§è¡ŒæŸä¸ªæ–¹æ³•æˆ–æŸä¸ªä»£ç å—ã€‚</strong></p>
<h4 id="2-2-Synchronized-åŸç†"><a href="#2-2-Synchronized-åŸç†" class="headerlink" title="2.2 Synchronized åŸç†"></a>2.2 Synchronized åŸç†</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">SynchronizedTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line">    synchronized (SynchronizedTest.<span class="keyword">class</span>) &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    method();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">method</span>()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å°†è¿™æ®µä»£ç å…ˆç”¨<code>javac</code>å‘½ä»¤ç¼–è¯‘ï¼Œå†<code>java p -v SynchronizedTest.class</code>å‘½ä»¤æŸ¥çœ‹å­—èŠ‚ç ï¼Œéƒ¨åˆ†å­—èŠ‚ç å¦‚ä¸‹</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">public</span> <span class="string">static</span> <span class="string">void</span> <span class="string">main(java.lang.String[]);</span></span><br><span class="line"><span class="attr">descriptor:</span> <span class="string">([Ljava/lang/String;)V</span></span><br><span class="line"><span class="attr">flags:</span> <span class="string">ACC_PUBLIC,</span> <span class="string">ACC_STATIC</span></span><br><span class="line"><span class="attr">Code:</span></span><br><span class="line">  <span class="string">stack=2,</span> <span class="string">locals=3,</span> <span class="string">args_size=1</span></span><br><span class="line">     <span class="attr">0:</span> <span class="string">ldc</span>           <span class="comment">#2                  // class com/lanshifu/opengldemo/test/SynchronizedTest</span></span><br><span class="line">     <span class="attr">2:</span> <span class="string">dup</span></span><br><span class="line">     <span class="attr">3:</span> <span class="string">astore_1</span></span><br><span class="line">     <span class="attr">4:</span> <span class="string">monitorenter</span></span><br><span class="line">     <span class="attr">5:</span> <span class="string">getstatic</span>     <span class="comment">#3                  // Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">     <span class="attr">8:</span> <span class="string">ldc</span>           <span class="comment">#4                  // String 123</span></span><br><span class="line">    <span class="attr">10:</span> <span class="string">invokevirtual</span> <span class="comment">#5                  // Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">    <span class="attr">13:</span> <span class="string">aload_1</span></span><br><span class="line">    <span class="attr">14:</span> <span class="string">monitorexit</span></span><br><span class="line">    <span class="attr">15:</span> <span class="string">goto</span>          <span class="number">23</span></span><br><span class="line">    <span class="attr">18:</span> <span class="string">astore_2</span></span><br><span class="line">    <span class="attr">19:</span> <span class="string">aload_1</span></span><br><span class="line">    <span class="attr">20:</span> <span class="string">monitorexit</span></span><br><span class="line">    <span class="attr">21:</span> <span class="string">aload_2</span></span><br><span class="line">    <span class="attr">22:</span> <span class="string">athrow</span></span><br><span class="line">    <span class="attr">23:</span> <span class="string">invokestatic</span>  <span class="comment">#6                  // Method method:()V</span></span><br><span class="line">    <span class="attr">26:</span> <span class="string">return</span></span><br><span class="line"><span class="string">å¤åˆ¶ä»£ç </span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° <code>4: monitorenter</code> å’Œ <code>14: monitorexit</code>ï¼Œä¸­é—´æ˜¯æ‰“å°çš„è¯­å¥ã€‚</p>
<p>æ‰§è¡ŒåŒæ­¥ä»£ç å—ï¼Œé¦–å…ˆä¼šæ‰§è¡Œ<code>monitorenter</code>æŒ‡ä»¤ï¼Œç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç å—ä¸­çš„ä»£ç ï¼Œé€€å‡ºåŒæ­¥ä»£ç å—çš„æ—¶å€™ä¼šæ‰§è¡Œ<code>monitorexit</code>æŒ‡ä»¤ ã€‚</p>
<blockquote>
<p>ä½¿ç”¨Synchronizedè¿›è¡ŒåŒæ­¥ï¼Œå…¶å…³é”®å°±æ˜¯å¿…é¡»è¦å¯¹å¯¹è±¡çš„ç›‘è§†å™¨monitorè¿›è¡Œè·å–ï¼Œå½“çº¿ç¨‹è·å–monitoråæ‰èƒ½ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå¦åˆ™å°±è¿›å…¥åŒæ­¥é˜Ÿåˆ—ï¼Œçº¿ç¨‹çŠ¶æ€å˜æˆBLOCKï¼ŒåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè·å–åˆ°monitorï¼Œå½“ç›‘å¬åˆ°monitorexitè¢«è°ƒç”¨ï¼Œé˜Ÿåˆ—é‡Œå°±æœ‰ä¸€ä¸ªçº¿ç¨‹å‡ºé˜Ÿï¼Œè·å–monitorã€‚è¯¦æƒ…å‚è€ƒï¼š<a href="https://link.juejin.cn/?target=https://www.jianshu.com/p/d53bf830fa09">www.jianshu.com/p/d53bf830fâ€¦</a></p>
</blockquote>
<p>æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“çº¿ç¨‹è·å–è¯¥å¯¹è±¡é”åï¼Œè®¡æ•°å™¨å°±ä¼šåŠ ä¸€ï¼Œé‡Šæ”¾é”åå°±ä¼šå°†è®¡æ•°å™¨å‡ä¸€ï¼Œæ‰€ä»¥åªè¦è¿™ä¸ªé”çš„è®¡æ•°å™¨å¤§äº0ï¼Œå…¶å®ƒçº¿ç¨‹è®¿é—®å°±åªèƒ½ç­‰å¾…ã€‚</p>
<h4 id="2-3-Synchronized-é”çš„å‡çº§"><a href="#2-3-Synchronized-é”çš„å‡çº§" class="headerlink" title="2.3 Synchronized é”çš„å‡çº§"></a>2.3 Synchronized é”çš„å‡çº§</h4><p>å¤§å®¶å¯¹Synchronizedçš„ç†è§£å¯èƒ½å°±æ˜¯é‡é‡çº§é”ï¼Œä½†æ˜¯Java1.6å¯¹ Synchronized è¿›è¡Œäº†å„ç§ä¼˜åŒ–ä¹‹åï¼Œæœ‰äº›æƒ…å†µä¸‹å®ƒå°±å¹¶ä¸é‚£ä¹ˆé‡ï¼ŒJava1.6 ä¸­ä¸ºäº†å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—è€Œå¼•å…¥çš„åå‘é”å’Œè½»é‡çº§é”ã€‚</p>
<p><strong>åå‘é”ï¼š</strong> å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”ä¸ä»…ä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œè€Œä¸”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—ï¼Œä¸ºäº†è®©çº¿ç¨‹è·å¾—é”çš„ä»£ä»·æ›´ä½è€Œå¼•å…¥äº†åå‘é”ã€‚</p>
<blockquote>
<p>å½“ä¸€ä¸ªçº¿ç¨‹Aè®¿é—®åŠ äº†åŒæ­¥é”çš„ä»£ç å—æ—¶ï¼Œä¼šåœ¨å¯¹è±¡å¤´ä¸­å­˜ å‚¨å½“å‰çº¿ç¨‹çš„idï¼Œåç»­è¿™ä¸ªçº¿ç¨‹è¿›å…¥å’Œé€€å‡ºè¿™æ®µåŠ äº†åŒæ­¥é”çš„ä»£ç å—æ—¶ï¼Œä¸éœ€è¦å†æ¬¡åŠ é”å’Œé‡Šæ”¾é”ã€‚</p>
</blockquote>
<p><strong>è½»é‡çº§é”ï¼š</strong> åœ¨åå‘é”æƒ…å†µä¸‹ï¼Œå¦‚æœçº¿ç¨‹Bä¹Ÿè®¿é—®äº†åŒæ­¥ä»£ç å—ï¼Œæ¯”è¾ƒå¯¹è±¡å¤´çš„çº¿ç¨‹idä¸ä¸€æ ·ï¼Œä¼šå‡çº§ä¸ºè½»é‡çº§é”ï¼Œå¹¶ä¸”é€šè¿‡è‡ªæ—‹çš„æ–¹å¼æ¥è·å–è½»é‡çº§é”ã€‚</p>
<p><strong>é‡é‡çº§é”ï¼š</strong> å¦‚æœçº¿ç¨‹Aå’Œçº¿ç¨‹BåŒæ—¶è®¿é—®åŒæ­¥ä»£ç å—ï¼Œåˆ™è½»é‡çº§é”ä¼šå‡çº§ä¸ºé‡é‡çº§é”ï¼Œçº¿ç¨‹Aè·å–åˆ°é‡é‡çº§é”çš„æƒ…å†µä¸‹ï¼Œçº¿ç¨‹Båªèƒ½å…¥é˜Ÿç­‰å¾…ï¼Œè¿›å…¥BLOCKçŠ¶æ€ã€‚</p>
<h4 id="2-4-Synchronized-ç¼ºç‚¹"><a href="#2-4-Synchronized-ç¼ºç‚¹" class="headerlink" title="2.4  Synchronized ç¼ºç‚¹"></a>2.4  Synchronized ç¼ºç‚¹</h4><ol>
<li>ä¸èƒ½è®¾ç½®é”è¶…æ—¶æ—¶é—´</li>
<li>ä¸èƒ½é€šè¿‡ä»£ç é‡Šæ”¾é”</li>
<li>å®¹æ˜“é€ æˆæ­»é”</li>
</ol>
<h3 id="ä¸‰ã€ReentrantLock"><a href="#ä¸‰ã€ReentrantLock" class="headerlink" title="ä¸‰ã€ReentrantLock"></a>ä¸‰ã€ReentrantLock</h3><p>ä¸Šé¢è¯´åˆ°<code>Synchronized</code>çš„ç¼ºç‚¹ï¼Œä¸èƒ½è®¾ç½®é”è¶…æ—¶æ—¶é—´å’Œä¸èƒ½é€šè¿‡ä»£ç é‡Šæ”¾é”ï¼Œ<code>ReentranLock</code>å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><strong>åœ¨å¤šä¸ªæ¡ä»¶å˜é‡å’Œé«˜åº¦ç«äº‰é”çš„åœ°æ–¹ï¼Œç”¨ReentrantLockæ›´åˆé€‚</strong>ï¼ŒReentrantLockè¿˜æä¾›äº†<code>Condition</code>ï¼Œå¯¹çº¿ç¨‹çš„ç­‰å¾…å’Œå”¤é†’ç­‰æ“ä½œæ›´åŠ çµæ´»ï¼Œä¸€ä¸ªReentrantLockå¯ä»¥æœ‰å¤šä¸ªConditionå®ä¾‹ï¼Œæ‰€ä»¥æ›´æœ‰æ‰©å±•æ€§ã€‚</p>
<h4 id="3-1-ReentrantLock-çš„ä½¿ç”¨"><a href="#3-1-ReentrantLock-çš„ä½¿ç”¨" class="headerlink" title="3.1 ReentrantLock çš„ä½¿ç”¨"></a>3.1 ReentrantLock çš„ä½¿ç”¨</h4><p><strong>lock å’Œ unlock</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">        ReentrantLock reentrantLock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;reentrantLock-&gt;lock&quot;</span>);</span><br><span class="line">        reentrantLock.<span class="keyword">lock</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            </span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;ç¡çœ 2ç§’...&quot;</span>);</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            reentrantLock.unlock();</span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;reentrantLock-&gt;unlock&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>å®ç°å¯å®šæ—¶çš„é”è¯·æ±‚ï¼štryLock</strong></p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">    public static void <span class="selector-tag">main</span>(String[] args) &#123;</span><br><span class="line">        ReentrantLock reentrantLock = new <span class="built_in">ReentrantLock</span>();</span><br><span class="line">        Thread thread1 = new <span class="built_in">Thread_tryLock</span>(reentrantLock);</span><br><span class="line">        thread1<span class="selector-class">.setName</span>(&quot;thread1&quot;);</span><br><span class="line">        thread1<span class="selector-class">.start</span>();</span><br><span class="line">        Thread thread2 = new <span class="built_in">Thread_tryLock</span>(reentrantLock);</span><br><span class="line">        thread2<span class="selector-class">.setName</span>(&quot;thread2&quot;);</span><br><span class="line">        thread2<span class="selector-class">.start</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    static class Thread_tryLock extends Thread &#123;</span><br><span class="line">        ReentrantLock reentrantLock;</span><br><span class="line"></span><br><span class="line">        public <span class="built_in">Thread_tryLock</span>(ReentrantLock reentrantLock) &#123;</span><br><span class="line">            this<span class="selector-class">.reentrantLock</span> = reentrantLock;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">@Override</span></span><br><span class="line">        public void run() &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                System<span class="selector-class">.out</span><span class="selector-class">.println</span>(&quot;try lock:&quot; + Thread.currentThread()<span class="selector-class">.getName</span>());</span><br><span class="line">                boolean tryLock = reentrantLock<span class="selector-class">.tryLock</span>(<span class="number">3</span>, TimeUnit.SECONDS);</span><br><span class="line">                if (tryLock) &#123;</span><br><span class="line">                    System<span class="selector-class">.out</span><span class="selector-class">.println</span>(&quot;try lock success :&quot; + Thread.currentThread()<span class="selector-class">.getName</span>());</span><br><span class="line">                    System<span class="selector-class">.out</span><span class="selector-class">.println</span>(&quot;ç¡çœ ä¸€ä¸‹ï¼š&quot; + Thread.currentThread()<span class="selector-class">.getName</span>());</span><br><span class="line">                    Thread<span class="selector-class">.sleep</span>(<span class="number">5000</span>);</span><br><span class="line">                    System<span class="selector-class">.out</span><span class="selector-class">.println</span>(&quot;é†’äº†ï¼š&quot; + Thread.currentThread()<span class="selector-class">.getName</span>());</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    System<span class="selector-class">.out</span><span class="selector-class">.println</span>(&quot;try lock è¶…æ—¶ :&quot; + Thread.currentThread()<span class="selector-class">.getName</span>());</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                e<span class="selector-class">.printStackTrace</span>();</span><br><span class="line">            &#125; finally &#123;</span><br><span class="line">                System<span class="selector-class">.out</span><span class="selector-class">.println</span>(&quot;unlock:&quot; + Thread.currentThread()<span class="selector-class">.getName</span>());</span><br><span class="line">                reentrantLock<span class="selector-class">.unlock</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ‰“å°çš„æ—¥å¿—ï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> lock:thread1</span><br><span class="line"><span class="keyword">try</span> lock:thread2</span><br><span class="line"><span class="keyword">try</span> lock success :thread2</span><br><span class="line">ç¡çœ ä¸€ä¸‹ï¼šthread2</span><br><span class="line"><span class="keyword">try</span> lock è¶…æ—¶ :thread1</span><br><span class="line">unlock:thread1</span><br><span class="line"><span class="built_in">Exception</span> in thread <span class="string">&quot;thread1&quot;</span> java.lang.IllegalMonitorStateException</span><br><span class="line">	at java.util.concurrent.locks.ReentrantLock<span class="variable">$Sync</span>.<span class="title function_ invoke__">tryRelease</span>(ReentrantLock.<span class="attr">java</span>:<span class="number">151</span>)</span><br><span class="line">	at java.util.concurrent.locks.AbstractQueuedSynchronizer.<span class="title function_ invoke__">release</span>(AbstractQueuedSynchronizer.<span class="attr">java</span>:<span class="number">1261</span>)</span><br><span class="line">	at java.util.concurrent.locks.ReentrantLock.<span class="title function_ invoke__">unlock</span>(ReentrantLock.<span class="attr">java</span>:<span class="number">457</span>)</span><br><span class="line">	at com.lanshifu.demo_module.test.lock.ReentranLockTest<span class="variable">$Thread_tryLock</span>.<span class="title function_ invoke__">run</span>(ReentranLockTest.<span class="attr">java</span>:<span class="number">60</span>)</span><br><span class="line">é†’äº†ï¼šthread2</span><br><span class="line">unlock:thread2</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ¼”ç¤ºäº†<code>trtLock</code>çš„ä½¿ç”¨ï¼Œ<code>trtLock</code>è®¾ç½®è·å–é”çš„ç­‰å¾…æ—¶é—´ï¼Œè¶…è¿‡3ç§’ç›´æ¥è¿”å›å¤±è´¥ï¼Œå¯ä»¥ä»æ—¥å¿—ä¸­çœ‹åˆ°ç»“æœã€‚ æœ‰å¼‚å¸¸æ˜¯å› ä¸ºthread1è·å–é”å¤±è´¥ï¼Œä¸åº”è¯¥è°ƒç”¨unlockã€‚</p>
<h4 id="3-2-Condition-æ¡ä»¶"><a href="#3-2-Condition-æ¡ä»¶" class="headerlink" title="3.2 Condition æ¡ä»¶"></a>3.2 Condition æ¡ä»¶</h4><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">        Thread_Condition thread_condition = <span class="keyword">new</span> Thread_Condition();</span><br><span class="line">        thread_condition.setName(<span class="string">&quot;æµ‹è¯•Conditionçš„çº¿ç¨‹&quot;</span>);</span><br><span class="line">        thread_condition.start();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        thread_condition.singal();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Thread_Condition</span> <span class="title">extends</span> <span class="title">Thread</span> &#123;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>()</span> &#123;</span><br><span class="line">            <span class="keyword">await</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> ReentrantLock <span class="keyword">lock</span> = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">        <span class="keyword">public</span> Condition condition = <span class="keyword">lock</span>.newCondition();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">await</span>()</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">                <span class="keyword">lock</span>.<span class="keyword">lock</span>();</span><br><span class="line">                System.<span class="keyword">out</span>.println(Thread.currentThread().getName() + <span class="string">&quot;:æˆ‘åœ¨ç­‰å¾…é€šçŸ¥çš„åˆ°æ¥...&quot;</span>);</span><br><span class="line">                condition.<span class="keyword">await</span>();<span class="comment">//await å’Œ signal å¯¹åº”</span></span><br><span class="line">                <span class="comment">//condition.await(2, TimeUnit.SECONDS); //è®¾ç½®ç­‰å¾…è¶…æ—¶æ—¶é—´</span></span><br><span class="line">                System.<span class="keyword">out</span>.println(Thread.currentThread().getName() + <span class="string">&quot;:ç­‰åˆ°é€šçŸ¥äº†ï¼Œæˆ‘ç»§ç»­æ‰§è¡Œ&gt;&gt;&gt;&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;unlock&quot;</span>);</span><br><span class="line">                <span class="keyword">lock</span>.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">singal</span>()</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">                <span class="keyword">lock</span>.<span class="keyword">lock</span>();</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;æˆ‘è¦é€šçŸ¥åœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œcondition.signal()&quot;</span>);</span><br><span class="line">                condition.signal();<span class="comment">//await å’Œ signal å¯¹åº”</span></span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;unlock&quot;</span>);</span><br><span class="line">                <span class="keyword">lock</span>.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿è¡Œæ‰“å°æ—¥å¿—</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lock</span></span><br><span class="line">æµ‹è¯•Conditionçš„çº¿ç¨‹:æˆ‘åœ¨ç­‰å¾…é€šçŸ¥çš„åˆ°æ¥...</span><br><span class="line"><span class="keyword">lock</span></span><br><span class="line">æˆ‘è¦é€šçŸ¥åœ¨ç­‰å¾…çš„çº¿ç¨‹ï¼Œcondition.signal()</span><br><span class="line">unlock</span><br><span class="line">æµ‹è¯•Conditionçš„çº¿ç¨‹:ç­‰åˆ°é€šçŸ¥äº†ï¼Œæˆ‘ç»§ç»­æ‰§è¡Œ&gt;&gt;&gt;</span><br><span class="line">unlock</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ¼”ç¤ºäº†<code>Conditionçš„ await å’Œ signal</code> ä½¿ç”¨ï¼Œå‰æè¦å…ˆlockã€‚</p>
<h4 id="3-3-å…¬å¹³é”ä¸éå…¬å¹³é”"><a href="#3-3-å…¬å¹³é”ä¸éå…¬å¹³é”" class="headerlink" title="3.3 å…¬å¹³é”ä¸éå…¬å¹³é”"></a>3.3 å…¬å¹³é”ä¸éå…¬å¹³é”</h4><p>ReentrantLock æ„é€ å‡½æ•°ä¼ trueè¡¨ç¤ºå…¬å¹³é”ã€‚</p>
<p>å…¬å¹³é”è¡¨ç¤ºçº¿ç¨‹è·å–é”çš„é¡ºåºæ˜¯æŒ‰ç…§çº¿ç¨‹åŠ é”çš„é¡ºåºæ¥åˆ†é…çš„ï¼Œå³å…ˆæ¥å…ˆå¾—çš„é¡ºåºã€‚è€Œéå…¬å¹³é”å°±æ˜¯ä¸€ç§é”çš„æŠ¢å æœºåˆ¶ï¼Œæ˜¯éšæœºè·å¾—é”çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŸäº›çº¿ç¨‹ä¸€è‡´æ‹¿ä¸åˆ°é”ï¼Œæ‰€ä»¥æ˜¯ä¸å…¬å¹³çš„ã€‚</p>
<h4 id="3-4-ReentrantLock-æ³¨æ„ç‚¹"><a href="#3-4-ReentrantLock-æ³¨æ„ç‚¹" class="headerlink" title="3.4 ReentrantLock  æ³¨æ„ç‚¹"></a>3.4 ReentrantLock  æ³¨æ„ç‚¹</h4><ol>
<li>ReentrantLockä½¿ç”¨lockå’Œunlockæ¥è·å¾—é”å’Œé‡Šæ”¾é”</li>
<li>unlockè¦æ”¾åœ¨finallyä¸­ï¼Œè¿™æ ·æ­£å¸¸è¿è¡Œæˆ–è€…å¼‚å¸¸éƒ½ä¼šé‡Šæ”¾é”</li>
<li>ä½¿ç”¨conditionçš„awaitå’Œsignalæ–¹æ³•ä¹‹å‰ï¼Œå¿…é¡»è°ƒç”¨lockæ–¹æ³•è·å¾—å¯¹è±¡ç›‘è§†å™¨</li>
</ol>
<h3 id="å››ã€å¹¶å‘åŒ…"><a href="#å››ã€å¹¶å‘åŒ…" class="headerlink" title="å››ã€å¹¶å‘åŒ…"></a>å››ã€å¹¶å‘åŒ…</h3><p>é€šè¿‡ä¸Šé¢åˆ†æï¼Œå¹¶å‘ä¸¥é‡çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨é”æ˜¾ç„¶æ•ˆç‡ä½ä¸‹ï¼Œå› ä¸ºåŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å¾—é”ï¼Œå…¶å®ƒçº¿ç¨‹åªèƒ½ä¹–ä¹–ç­‰å¾…ã€‚</p>
<p>Javaæä¾›äº†å¹¶å‘åŒ…è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¥ä¸‹æ¥ä»‹ç»å¹¶å‘åŒ…é‡Œä¸€äº›å¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚</p>
<h4 id="4-1-ConcurrentHashMap"><a href="#4-1-ConcurrentHashMap" class="headerlink" title="4.1 ConcurrentHashMap"></a>4.1 ConcurrentHashMap</h4><p>æˆ‘ä»¬éƒ½çŸ¥é“HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„æ•°æ®ç»“æ„ï¼ŒHashTableåˆ™åœ¨HashMapåŸºç¡€ä¸Šï¼Œgetæ–¹æ³•å’Œputæ–¹æ³•åŠ ä¸ŠSynchronizedä¿®é¥°å˜æˆçº¿ç¨‹å®‰å…¨ï¼Œä¸è¿‡åœ¨é«˜å¹¶å‘æƒ…å†µä¸‹æ•ˆç‡åº•ä¸‹ï¼Œæœ€ç»ˆè¢«<code>ConcurrentHashMap</code>æ›¿ä»£ã€‚</p>
<p>ConcurrentHashMap é‡‡ç”¨åˆ†æ®µé”ï¼Œå†…éƒ¨é»˜è®¤æœ‰16ä¸ªæ¡¶ï¼Œgetå’Œputæ“ä½œï¼Œé¦–å…ˆå°†keyè®¡ç®—hashcodeï¼Œç„¶åè·Ÿ16å–ä½™ï¼Œè½åˆ°16ä¸ªæ¡¶ä¸­çš„ä¸€ä¸ªï¼Œç„¶åæ¯ä¸ªæ¡¶ä¸­éƒ½åŠ äº†é”ï¼ˆReentrantLockï¼‰ï¼Œæ¡¶ä¸­æ˜¯HashMapç»“æ„ï¼ˆæ•°ç»„åŠ é“¾è¡¨ï¼Œé“¾è¡¨è¿‡é•¿è½¬çº¢é»‘æ ‘ï¼‰ã€‚</p>
<p>æ‰€ä»¥ç†è®ºä¸Šæœ€å¤šæ”¯æŒ16ä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ã€‚</p>
<h4 id="4-2-LinkBlockingQueue"><a href="#4-2-LinkBlockingQueue" class="headerlink" title="4.2 LinkBlockingQueue"></a>4.2 LinkBlockingQueue</h4><p>é“¾è¡¨ç»“æ„çš„é˜»å¡é˜Ÿåˆ—ï¼Œå†…éƒ¨ä½¿ç”¨å¤šä¸ªReentrantLock</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/** Lock held by take, poll, etc */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">takeLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Wait queue for waiting takes */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Condition</span> <span class="variable">notEmpty</span> <span class="operator">=</span> takeLock.newCondition();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Lock held by put, offer, etc */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">putLock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** Wait queue for waiting puts */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Condition</span> <span class="variable">notFull</span> <span class="operator">=</span> putLock.newCondition();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">signalNotEmpty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">takeLock</span> <span class="operator">=</span> <span class="built_in">this</span>.takeLock;</span><br><span class="line">        takeLock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            notEmpty.signal();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            takeLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Signals a waiting put. Called only from take/poll.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">signalNotFull</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">putLock</span> <span class="operator">=</span> <span class="built_in">this</span>.putLock;</span><br><span class="line">        putLock.lock();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            notFull.signal();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            putLock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æºç ä¸è´´å¤ªå¤šï¼Œç®€å•è¯´ä¸€ä¸‹<code>LinkBlockingQueue</code> çš„é€»è¾‘ï¼š</p>
<blockquote>
<ol>
<li>ä»é˜Ÿåˆ—è·å–æ•°æ®ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­æ²¡æœ‰æ•°æ®ï¼Œä¼šè°ƒç”¨<code>notEmpty.await();</code>è¿›å…¥ç­‰å¾…ã€‚</li>
<li>åœ¨æ”¾æ•°æ®è¿›å»é˜Ÿåˆ—çš„æ—¶å€™ä¼šè°ƒç”¨<code>notEmpty.signal();</code>ï¼Œé€šçŸ¥æ¶ˆè´¹è€…ï¼Œ1ä¸­çš„ç­‰å¾…ç»“æŸï¼Œå”¤é†’ç»§ç»­æ‰§è¡Œã€‚</li>
<li>ä»é˜Ÿåˆ—é‡Œå–åˆ°æ•°æ®çš„æ—¶å€™ä¼šè°ƒç”¨<code>notFull.signal();</code>ï¼Œé€šçŸ¥ç”Ÿäº§è€…ç»§ç»­ç”Ÿäº§ã€‚</li>
<li>åœ¨putæ•°æ®è¿›å…¥é˜Ÿåˆ—çš„æ—¶å€™ï¼Œå¦‚æœåˆ¤æ–­é˜Ÿåˆ—ä¸­çš„æ•°æ®è¾¾åˆ°æœ€å¤§å€¼ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨<code>notFull.await();</code>ï¼Œç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹æ‰ï¼Œä¹Ÿå°±æ˜¯ç­‰å¾…3å»å–æ•°æ®å¹¶ä¸”å‘å‡º<code>notFull.signal();</code>ï¼Œè¿™æ—¶å€™ç”Ÿäº§è€…æ‰èƒ½ç»§ç»­ç”Ÿäº§ã€‚</li>
</ol>
</blockquote>
<p><code>LinkBlockingQueue</code> æ˜¯å…¸å‹çš„ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼Œæºç ç»†èŠ‚å°±ä¸å¤šè¯´ã€‚</p>
<h4 id="4-3-åŸå­æ“ä½œç±»ï¼šAtomicInteger"><a href="#4-3-åŸå­æ“ä½œç±»ï¼šAtomicInteger" class="headerlink" title="4.3  åŸå­æ“ä½œç±»ï¼šAtomicInteger"></a>4.3  åŸå­æ“ä½œç±»ï¼šAtomicInteger</h4><p>å†…éƒ¨é‡‡ç”¨CASï¼ˆcompare and swapï¼‰ä¿è¯åŸå­æ€§</p>
<p>ä¸¾ä¸€ä¸ªintè‡ªå¢çš„ä¾‹å­</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">        AtomicInteger <span class="attr">atomicInteger</span> = new AtomicInteger(<span class="number">0</span>)<span class="comment">;</span></span><br><span class="line">        atomicInteger.incrementAndGet()<span class="comment">;//è‡ªå¢</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æºç çœ‹ä¸€ä¸‹</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Atomically increments by one the current value.</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * @return the updated value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title">incrementAndGet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> U.<span class="built_in">getAndAddInt</span>(<span class="keyword">this</span>, VALUE, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>U æ˜¯ Unsafeï¼Œçœ‹ä¸‹ <code>Unsafe#getAndAddInt</code></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title">getAndAddInt</span><span class="params">(Object var1, <span class="type">long</span> var2, <span class="type">int</span> var4)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> var5;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            var5 = <span class="keyword">this</span>.<span class="built_in">getIntVolatile</span>(var1, var2);</span><br><span class="line">        &#125; <span class="keyword">while</span>(!<span class="keyword">this</span>.<span class="built_in">compareAndSwapInt</span>(var1, var2, var5, var5 + var4));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> var5;</span><br><span class="line">    &#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>é€šè¿‡<code>compareAndSwapInt</code>ä¿è¯åŸå­æ€§ã€‚</p>
<h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>é¢è¯•ä¸­é—®åˆ°å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Œå¯ä»¥è¿™ä¹ˆç­”ï¼š</p>
<blockquote>
<ol>
<li>å½“åªæœ‰ä¸€ä¸ªçº¿ç¨‹å†™ï¼Œå…¶å®ƒçº¿ç¨‹éƒ½æ˜¯è¯»çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨<code>volatile</code>ä¿®é¥°å˜é‡</li>
<li>å½“å¤šä¸ªçº¿ç¨‹å†™ï¼Œé‚£ä¹ˆä¸€èˆ¬æƒ…å†µä¸‹å¹¶å‘ä¸ä¸¥é‡çš„è¯å¯ä»¥ç”¨<code>Synchronized</code>ï¼ŒSynchronizedå¹¶ä¸æ˜¯ä¸€å¼€å§‹å°±æ˜¯é‡é‡çº§é”ï¼Œåœ¨å¹¶å‘ä¸ä¸¥é‡çš„æ—¶å€™ï¼Œæ¯”å¦‚åªæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®çš„æ—¶å€™ï¼Œæ˜¯åå‘é”ï¼›å½“å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼Œä½†ä¸æ˜¯åŒæ—¶è®¿é—®ï¼Œè¿™æ—¶å€™é”å‡çº§ä¸ºè½»é‡çº§é”ï¼›å½“å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œè¿™æ—¶å€™å‡çº§ä¸ºé‡é‡çº§é”ã€‚æ‰€ä»¥åœ¨å¹¶å‘ä¸æ˜¯å¾ˆä¸¥é‡çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨Synchronizedæ˜¯å¯ä»¥çš„ã€‚ä¸è¿‡Synchronizedæœ‰å±€é™æ€§ï¼Œæ¯”å¦‚ä¸èƒ½è®¾ç½®é”è¶…æ—¶ï¼Œä¸èƒ½é€šè¿‡ä»£ç é‡Šæ”¾é”ã€‚</li>
<li><code>ReentranLock</code> å¯ä»¥é€šè¿‡ä»£ç é‡Šæ”¾é”ï¼Œå¯ä»¥è®¾ç½®é”è¶…æ—¶ã€‚</li>
<li>é«˜å¹¶å‘ä¸‹ï¼ŒSynchronizedã€ReentranLock æ•ˆç‡ä½ï¼Œå› ä¸ºåŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è¿›å…¥åŒæ­¥ä»£ç å—ï¼Œå¦‚æœåŒæ—¶æœ‰å¾ˆå¤šçº¿ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆå…¶å®ƒçº¿ç¨‹å°±éƒ½åœ¨ç­‰å¾…é”ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨å¹¶å‘åŒ…ä¸‹çš„æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚<code>ConcurrentHashMap</code>ï¼Œ<code>LinkBlockingQueue</code>ï¼Œä»¥åŠåŸå­æ€§çš„æ•°æ®ç»“æ„å¦‚ï¼š<code>AtomicInteger</code>ã€‚</li>
</ol>
</blockquote>
<p>é¢è¯•çš„æ—¶å€™æŒ‰ç…§ä¸Šé¢æ€»ç»“çš„è¿™ä¸ªæ€è·¯å›ç­”åŸºæœ¬å°±okäº†ã€‚æ—¢ç„¶è¯´åˆ°å¹¶å‘åŒ…ï¼Œé‚£ä¹ˆé™¤äº†<code>ConcurrentHashMap</code>ï¼Œå…¶å®ƒä¸€äº›å¸¸ç”¨çš„æ•°æ®ç»“æ„çš„åŸç†ä¹Ÿéœ€è¦å»äº†è§£ä¸‹ï¼Œä¾‹å¦‚<code>HashMapã€HashTableã€TreeMap</code>åŸç†ï¼Œ<code>ArrayListã€LinkedList</code>å¯¹æ¯”ï¼Œè¿™äº›éƒ½æ˜¯è€ç”Ÿå¸¸è°ˆçš„ï¼Œè‡ªå·±å»çœ‹æºç æˆ–è€…ä¸€äº›åšå®¢ã€‚</p>
</div><div class="tags"><a href="/tags/å¹¶å‘"><i class="fa fa-tag">å¹¶å‘</i></a></div><div class="post-nav"><a class="pre" href="/posts/8104/">æŠ€æœ¯ç®¡ç†è€…åº”è¯¥ç®¡äº›ä»€ä¹ˆï¼Ÿ</a><a class="next" href="/posts/16471/">é˜¿é‡Œæ¯•ç„ï¼šç³»ç»Ÿæ¶æ„å¸ˆå¦‚ä½•åšå¥½ç³»ç»Ÿè®¾è®¡ï¼Ÿ</a></div><div id="waline"></div><script src="//unpkg.com/@waline/client@v2/dist/waline.js"></script><link rel="stylesheet" type="text/css" href="//unpkg.com/@waline/client@v2/dist/waline.css"><script>let metaInfo = ['nick', 'mail', 'link']
let requiredMeta = 'nick,mail'.split(',').filter(item => {
  return metaInfo.indexOf(item) > -1
})
Waline.init({
  el: '#waline',
  comment: true,
  serverURL: 'https://comment.aimak.cn',
  pageSize: '30',
  wordLimit: '500',
  requiredMeta,
})
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img src="/img/avatar.png"/></a><p>è®¤çœŸç”Ÿæ´».</p><a class="info-icon" href="https://twitter.com/fantasykaicc" title="Twitter" target="_blank" style="margin-inline:5px"> <i class="fa fa-twitter-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:makren@126.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/fantasykai" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/">AI</a><span class="category-list-count">52</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/AI-%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4/">AI, ç½‘ç»œè¿ç»´</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%B9%E5%99%A8/">å®¹å™¨</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/">æŠ€æœ¯å°æ ˆ</a><span class="category-list-count">117</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%AE%B0/">æ‚è®°</a><span class="category-list-count">72</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">æµ‹è¯•</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%93%E5%AD%98/">ç¼“å­˜</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">ç½‘ç»œ</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%AD%E5%BD%95/">è¯­å½•</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%91%E6%AD%A5/">è·‘æ­¥</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 15px;">æ¶æ„</a> <a href="/tags/PMO/" style="font-size: 15px;">PMO</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%9B%A2%E9%98%9F/" style="font-size: 15px;">æŠ€æœ¯å›¢é˜Ÿ</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87/" style="font-size: 15px;">å¼€å‘æ•ˆç‡</a> <a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 15px;">æ‚è®°</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/thymeleaf/" style="font-size: 15px;">thymeleaf</a> <a href="/tags/idea/" style="font-size: 15px;">idea</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 15px;">äººå·¥æ™ºèƒ½</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 15px;">äººå·¥æ™ºèƒ½,</a> <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">æ·±åº¦å­¦ä¹ </a> <a href="/tags/AI-%E6%99%BA%E8%83%BD%E4%BD%93/" style="font-size: 15px;">AI æ™ºèƒ½ä½“</a> <a href="/tags/Deepseek-%E8%87%AA%E6%99%BA%E7%BD%91%E7%BB%9C-%E8%BF%90%E8%90%A5%E5%95%86-%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4/" style="font-size: 15px;">Deepseek, è‡ªæ™ºç½‘ç»œ, è¿è¥å•†, ç½‘ç»œè¿ç»´</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" style="font-size: 15px;">çŸ¥è¯†å›¾è°±</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD-%E6%8A%80%E6%9C%AF%E8%B6%8B%E5%8A%BF-%E8%A1%8C%E4%B8%9A%E5%8A%A8%E6%80%81/" style="font-size: 15px;">äººå·¥æ™ºèƒ½, æŠ€æœ¯è¶‹åŠ¿, è¡Œä¸šåŠ¨æ€</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/Mysql/" style="font-size: 15px;">Mysql</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 15px;">ç¼“å­˜</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 15px;">æµ‹è¯•</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/%E6%8A%A5%E5%91%8A%E5%88%86%E4%BA%AB/" style="font-size: 15px;">æŠ¥å‘Šåˆ†äº«</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 15px;">è¿ç»´</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/IPv6/" style="font-size: 15px;">IPv6</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">ç½‘ç»œ</a> <a href="/tags/SDN/" style="font-size: 15px;">SDN</a> <a href="/tags/%E8%AF%AD%E5%BD%95/" style="font-size: 15px;">è¯­å½•</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/Chrome-%E6%95%88%E7%8E%87%E6%8F%92%E4%BB%B6/" style="font-size: 15px;">Chrome æ•ˆç‡æ’ä»¶</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/" style="font-size: 15px;">é©¬æ‹‰æ¾</a> <a href="/tags/%E5%81%A5%E5%BA%B7/" style="font-size: 15px;">å¥åº·</a> <a href="/tags/Jenkins/" style="font-size: 15px;">Jenkins</a> <a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 15px;">å®¹å™¨</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/restful/" style="font-size: 15px;">restful</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">å‰ç«¯</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/" style="font-size: 15px;">æŠ€æœ¯å°æ ˆ</a> <a href="/tags/CAP/" style="font-size: 15px;">CAP</a> <a href="/tags/ideas/" style="font-size: 15px;">ideas</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">å¹¶å‘</a> <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">é«˜å¹¶å‘</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 15px;">æ—¥å¿—</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/11185/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11183/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11182/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11181/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11180/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11179/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11178/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11177/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11176/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/17953/">2025å¹´3æœˆ16æ—¥å—äº¬åŠç¨‹é©¬æ‹‰æ¾èµ›å‰è®­ç»ƒã€é¥®é£ŸåŠæˆç»©é¢„æµ‹</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><div id="widget-waline-list"></div><script type="text/javascript" id="recent-comment" serverURL="https://comment.aimak.cn" count="5" src="/js/recent-comments.js?v=1.0.0" async="async"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://landscape.cncf.io/" title="CNCF" target="_blank">CNCF</a><ul></ul><a href="https://segmentfault.com/" title="SegmentFault" target="_blank">SegmentFault</a><ul></ul><a href="https://blog.csdn.net/junbaozi/category_11649936_3.html" title="CloudNative" target="_blank">CloudNative</a><ul></ul><a href="https://excalidraw.com/" title="excalidraw" target="_blank">excalidraw</a><ul></ul><a href="https://tudan.blog.csdn.net/?type=lately" title="ç‹å¦" target="_blank">ç‹å¦</a><ul></ul><a href="https://aspoem.com/zh-Hans" target="_blank"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2025 <a href="/." rel="nofollow">æ«å“²'sæ–‡æ –å°ç­‘.</a><a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">ï½œè‹ICPå¤‡18013756å·-1</a><!--a(rel='nofollow', target='_blank', href='https://github.com/tufu9441/maupassant-hexo')  Theme--><!--|  by--><!--a(rel='nofollow', target='_blank', href='https://github.com/pagecho')  Cho.--></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>