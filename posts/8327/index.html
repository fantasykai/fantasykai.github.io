<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="fantasykai`blog"><title>é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿ | æ«å“²'sæ–‡æ –å°ç­‘</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement('script');
  hm.src = 'https://hm.baidu.com/hm.js?' + '2bb92548008bd1f1f88213efd40c8dad';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><div class="darkmode-toggle">ğŸŒ“</div><script>var prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)');
var toggle = document.querySelector('.darkmode-toggle');
var html = document.querySelector('html');

html.dataset.dark = localStorage.dark || prefersDarkMode.matches;

toggle.addEventListener('click', () => {
localStorage.dark = !(html.dataset.dark == 'true');
html.dataset.dark = localStorage.dark;
});</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿ</h1><a id="logo" href="/.">æ«å“²'sæ–‡æ –å°ç­‘</a><p class="description">å›å­ç»ˆæ—¥ä¹¾ä¹¾ï¼Œå¤•æƒ•è‹¥å‰ï¼Œæ— å’</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/tags/"><i class="fa fa-tag"> æ ‡ç­¾</i></a><a href="/timeline/"><i class="fa fa-book"> å†å²</i></a><a href="/blogroll/"><i class="fa fa-external-link"> æ”¶è—é“¾æ¥</i></a><a href="/2048/"><i class="fa fa-gamepad"> æ”¾æ¾ä¸‹</i></a><a href="/guestbook/"><i class="fa fa-comments"> ç•™è¨€</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿ</h1><div class="post-meta">2017-03-13<span> | </span><span class="category"><a href="/categories/%E6%9D%82%E8%AE%B0/">æ‚è®°</a></span></div><a class="disqus-comment-count" href="/posts/8327/#vcomment"><span class="waline-comment-count" id="/posts/8327/"></span><span> æ¡è¯„è®º</span></a><div class="post-content"><h1 id="é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿ"><a href="#é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿ" class="headerlink" title="é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿ"></a>é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿ</h1><h2 id="ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—ç®¡ç†ç³»ç»Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—ç®¡ç†ç³»ç»Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—ç®¡ç†ç³»ç»Ÿ</h2><p>æ—¥å¿—ï¼Œå¯¹äºä»»ä½•ç³»ç»Ÿéƒ½æ˜¯é‡è¦çš„ç»„æˆï¼Œä½œä¸ºç¨‹åºçŒ¿ï¼Œå®šä½é—®é¢˜ï¼ŒæŸ¥çœ‹ç³»ç»Ÿçš„å¥åº·è¿è½½æƒ…å†µï¼Œéƒ½éœ€è¦é€šè¿‡æŸ¥è¯¢æ—¥å¿—è¿›è¡Œåˆ†æã€‚</p>
<p>åˆç†çš„è½¯ä»¶æ¶æ„å¾€å¾€éƒ½ä¸ä¼šæ˜¯å•ç‚¹çš„ï¼Œå³ä½¿åœ¨åŒä¸€å°åº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œæ—¥å¿—æœ‰ä¸åŒçš„ç§ç±»ï¼Œnginxè®¿é—®æ—¥å¿—ï¼Œæ“ä½œç³»ç»Ÿï¼Œåº”ç”¨æœåŠ¡ï¼Œä¸šåŠ¡é€»è¾‘ç­‰ç­‰ã€‚</p>
<p>æ²¡æœ‰æ—¥å¿—ç®¡ç†ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ†ææ—¥å¿—ï¼š</p>
<p>tailï¼Œcatï¼Œgrepï¼Œsed ï¼Œawk ï¼Œwcâ€¦ æ˜¾ç„¶ä¸å¯èƒ½ç™»å½•åˆ°æ¯ä¸€å°åº”ç”¨æœåŠ¡å™¨ä¸Šæ•²å‘½ä»¤ã€‚</p>
<p>äºæ˜¯å»ºç«‹ä¸€å¥—é›†ä¸­å¼çš„æ–¹æ³•ï¼ŒæŠŠä¸åŒæ¥æºçš„æ•°æ®é›†ä¸­æ•´åˆåˆ°ä¸€èµ·ï¼Œæ–¹ä¾¿å½’çº³åˆ†æï¼Œå°±æˆä¸ºè§£å†³ä»¥ä¸Šç—›ç‚¹çš„æ–¹å¼æ–¹æ³•ã€‚</p>
<h2 id="ELK-ç®€ä»‹"><a href="#ELK-ç®€ä»‹" class="headerlink" title="ELK ç®€ä»‹"></a>ELK ç®€ä»‹</h2><p>ELK æ˜¯ Elasticsearchã€Logstash å’Œ Kibana ä¸‰ç§è½¯ä»¶äº§å“çš„é¦–å­—æ¯ç¼©å†™ã€‚è¿™ä¸‰è€…éƒ½æ˜¯å¼€æºè½¯ä»¶ï¼Œé€šå¸¸é…åˆä½¿ç”¨ï¼Œè€Œä¸”åˆå…ˆåå½’äº Elastic.co å…¬å¸åä¸‹ï¼Œæ‰€ä»¥è¢«ç®€ç§°ä¸º ELK Stack,ç›®å‰ELK Stack å·²ç»æˆä¸ºæœ€æµè¡Œçš„é›†ä¸­å¼æ—¥å¿—è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h3><p>Elasticsearch æ˜¯ä¸€ä¸ªå®æ—¶çš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œå®ƒå¯ä»¥ç”¨äºå…¨æ–‡æœç´¢ï¼Œç»“æ„åŒ–æœç´¢ä»¥åŠåˆ†æã€‚å®ƒæ˜¯ä¸€ä¸ªå»ºç«‹åœ¨å…¨æ–‡æœç´¢å¼•æ“ Apache Lucene åŸºç¡€ä¸Šçš„æœç´¢å¼•æ“ï¼Œä½¿ç”¨ Java è¯­è¨€ç¼–å†™</p>
<p>ä¸»è¦ç‰¹ç‚¹</p>
<ul>
<li>å®æ—¶åˆ†æ</li>
<li>åˆ†å¸ƒå¼å®æ—¶æ–‡ä»¶å­˜å‚¨ï¼Œå¹¶å°†æ¯ä¸€ä¸ªå­—æ®µéƒ½ç¼–å…¥ç´¢å¼•</li>
<li>æ–‡æ¡£å¯¼å‘ï¼Œæ‰€æœ‰çš„å¯¹è±¡å…¨éƒ¨æ˜¯æ–‡æ¡£</li>
<li>é«˜å¯ç”¨æ€§ï¼Œæ˜“æ‰©å±•ï¼Œæ”¯æŒé›†ç¾¤ï¼ˆClusterï¼‰ã€åˆ†ç‰‡å’Œå¤åˆ¶ï¼ˆShards å’Œ Replicasï¼‰ã€‚</li>
<li>æ”¯æŒ JSON</li>
</ul>
<h3 id="Logstash"><a href="#Logstash" class="headerlink" title="Logstash"></a>Logstash</h3><p>Logstash æ˜¯ä¸€ä¸ªå…·æœ‰å®æ—¶æ¸ é“èƒ½åŠ›çš„æ•°æ®æ”¶é›†å¼•æ“ã€‚ä½¿ç”¨ JRuby è¯­è¨€ç¼–å†™</p>
<p>ä¸»è¦ç‰¹ç‚¹</p>
<ul>
<li>å‡ ä¹å¯ä»¥è®¿é—®ä»»ä½•æ•°æ®</li>
<li>å¯ä»¥å’Œå¤šç§å¤–éƒ¨åº”ç”¨ç»“åˆ</li>
<li>æ”¯æŒå¼¹æ€§æ‰©å±•</li>
</ul>
<p>å®ƒç”±ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>Shipperï¼å‘é€æ—¥å¿—æ•°æ®</li>
<li>Brokerï¼æ”¶é›†æ•°æ®ï¼Œç¼ºçœå†…ç½® Redis</li>
<li>Indexerï¼æ•°æ®å†™å…¥</li>
</ul>
<h3 id="Kibana"><a href="#Kibana" class="headerlink" title="Kibana"></a>Kibana</h3><p>Kibana æ˜¯ä¸€æ¬¾åŸºäº Apache å¼€æºåè®®ï¼Œä¸º Elasticsearch æä¾›åˆ†æå’Œå¯è§†åŒ–çš„ Web å¹³å°ã€‚å®ƒå¯ä»¥åœ¨ Elasticsearch çš„ç´¢å¼•ä¸­æŸ¥æ‰¾ï¼Œäº¤äº’æ•°æ®ï¼Œå¹¶ç”Ÿæˆå„ç§ç»´åº¦çš„è¡¨å›¾ã€‚</p>
<p>Elastic.co åœ¨2016-10-27 å‘å¸ƒäº† Elastic Stack 5.0 ä»¥åç›®å‰æ›´æ–°çš„æ­¥ä¼è¿˜æ˜¯å¾ˆå¿«çš„ï¼Œå¹¶ä¸”Elastic.co å¯¹éƒ¨åˆ†å¥½ç”¨æ’ä»¶å¼€å§‹æ”¶è´¹ã€‚</p>
<h2 id="æ•´ä½“æ¶æ„å›¾"><a href="#æ•´ä½“æ¶æ„å›¾" class="headerlink" title="æ•´ä½“æ¶æ„å›¾"></a>æ•´ä½“æ¶æ„å›¾</h2><p>æˆ‘åœ¨å¯¹ELKæœ‰äº†ä¸€å®šäº†è§£æ¢ç´¢åï¼Œå†³å®šå…ˆä½¿ç”¨ ELK 5 ä¹‹å‰æ¯”è¾ƒæˆç†Ÿçš„æ–¹æ¡ˆåšä¸€æ¬¡æ­å»ºï¼Œå°è¯•åŠè¿›ä¸€æ­¥ç†Ÿæ‚‰äº†è§£é›†ä¸­å¼æ—¥å¿—ç›‘æ§ç³»ç»Ÿï¼Œä¹Ÿæ–¹ä¾¿åº”ç”¨åˆ°æˆ‘ä»¬çš„æµ‹è¯•åŠç”Ÿæˆç¯å¢ƒä¸­ã€‚</p>
<p>å„æ¨¡å—ç‰ˆæœ¬</p>
<ul>
<li>elasticsearch-2.4.4</li>
<li>logstash-2.3.4</li>
<li>kibana-4.6.3</li>
</ul>
<p>å¦å¤–è¿˜å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—</p>
<ul>
<li>zookeeper-3.4.9</li>
<li>kafka_2.11-0.10.2.0</li>
</ul>
<p>Logstash ä½œä¸ºæ—¥å¿—æ”¶é›†ç«¯ï¼Œæ¯”è¾ƒæ¶ˆè€— CPU å’Œå†…å­˜èµ„æº,ä»Elastic.coçš„å®˜ç½‘æ‰¾åˆ°äº†æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆï¼šBeatsç»„ä»¶</p>
<p>Beats ä½œä¸ºæ—¥å¿—shipper</p>
<ul>
<li>Packetbeatï¼ˆç½‘ç»œæ•°æ®ï¼‰ï¼›</li>
<li>Metricbeatï¼ˆä»ç³»ç»Ÿå’ŒæœåŠ¡æ”¶é›†æŒ‡æ ‡ã€‚ä»CPUåˆ°å†…å­˜ï¼ŒRedisåˆ°Nginxç­‰ç­‰ï¼ŒMetricbeatæ˜¯ä¸€ç§è½»é‡çº§çš„æ–¹å¼æ¥å‘é€ç³»ç»Ÿå’ŒæœåŠ¡ç»Ÿè®¡ä¿¡æ¯ï¼‰ï¼›</li>
<li>Filebeatï¼ˆæ—¥å¿—æ–‡ä»¶ï¼‰ï¼›</li>
<li>Winlogbeatï¼ˆæœé›† Windows äº‹ä»¶æ—¥å¿—æ•°æ®ï¼‰ã€‚</li>
<li>Heartbeat ï¼ˆä½¿ç”¨ä¸»åŠ¨æ¢æµ‹ç›‘è§†æœåŠ¡çš„å¯ç”¨æ€§ã€‚ç»™å‡ºä¸€ä¸ªURLåˆ—è¡¨ï¼ŒHeartbeatè¯¢é—®ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼šä½ æ´»ç€å—ï¼ŸHeartbeatå°†æ­¤ä¿¡æ¯å’Œå“åº”æ—¶é—´å‘é€åˆ°å¼¹æ€§å †æ ˆçš„å…¶ä½™éƒ¨åˆ†è¿›è¡Œè¿›ä¸€æ­¥åˆ†æï¼‰</li>
</ul>
<p>Beats å°†æœé›†åˆ°çš„æ•°æ®å‘é€åˆ° Logstashï¼Œç» Logstash è§£æã€è¿‡æ»¤åï¼Œå°†å…¶å‘é€åˆ° Elasticsearch å­˜å‚¨</p>
<p>ç›¸æ¯” Logstashï¼ŒBeats æ‰€å ç³»ç»Ÿçš„ CPU å’Œå†…å­˜å‡ ä¹å¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œè¿™æ ·è§£å†³äº†Logstash åœ¨å„æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šå ç”¨ç³»ç»Ÿèµ„æºé«˜çš„é—®é¢˜ã€‚å¦å¤–ï¼ŒBeats å’Œ Logstash ä¹‹é—´æ”¯æŒ SSL&#x2F;TLS åŠ å¯†ä¼ è¾“ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åŒå‘è®¤è¯ï¼Œä¿è¯äº†é€šä¿¡å®‰å…¨ã€‚</p>
<p><img src="https://ws1.sinaimg.cn/large/7108d6c2ly1fdj6dwfug4j20mo0jswft"></p>
<h2 id="éƒ¨ç½²å›¾"><a href="#éƒ¨ç½²å›¾" class="headerlink" title="éƒ¨ç½²å›¾"></a>éƒ¨ç½²å›¾</h2><p><img src="https://ws1.sinaimg.cn/large/7108d6c2ly1fdfbfjchczj214g10iwpx"></p>
<h2 id="éƒ¨ç½²è¿‡ç¨‹"><a href="#éƒ¨ç½²è¿‡ç¨‹" class="headerlink" title="éƒ¨ç½²è¿‡ç¨‹"></a>éƒ¨ç½²è¿‡ç¨‹</h2><p>ç®€å•æŠŠéƒ¨ç½²è¿‡ç¨‹åŠé…ç½®æ–‡ä»¶è¿›è¡Œè®°å½•ï¼Œæ–¹ä¾¿åç»­å›é¡¾åŠä¼˜åŒ–</p>
<h3 id="ç›¸å…³ç¯å¢ƒï¼š"><a href="#ç›¸å…³ç¯å¢ƒï¼š" class="headerlink" title="ç›¸å…³ç¯å¢ƒï¼š"></a>ç›¸å…³ç¯å¢ƒï¼š</h3><p>éƒ¨ç½²å¹³å°&#x2F;ç¯å¢ƒï¼š</p>
<ul>
<li>linux centos7.2</li>
<li>jdk1.8.0_74</li>
</ul>
<h3 id="1-éƒ¨ç½²Elasticsearché›†ç¾¤"><a href="#1-éƒ¨ç½²Elasticsearché›†ç¾¤" class="headerlink" title="1.éƒ¨ç½²Elasticsearché›†ç¾¤"></a>1.éƒ¨ç½²Elasticsearché›†ç¾¤</h3><ul>
<li><a target="_blank" rel="noopener" href="https://www.elastic.co/">elastic å®˜ç½‘</a></li>
</ul>
<p>æˆ‘ä»å®˜ç½‘ä¸‹è½½äº† <code>elasticsearch-2.4.4.tar.gz</code></p>
<h4 id="è§£å‹ç¼©tar-tz"><a href="#è§£å‹ç¼©tar-tz" class="headerlink" title="è§£å‹ç¼©tar.tz"></a>è§£å‹ç¼©tar.tz</h4><pre><code>    cd /usr/local/elasticsearch
    tar -zxvf elasticsearch-2.4.4.tar.gz
</code></pre>
<h4 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><pre><code>    cd /usr/local/elasticsearch/elasticsearch-2.4.4/config
    vim elasticsearch.yml
</code></pre>
<p>é…ç½®æ–‡ä»¶å…³é”®é…ç½®è¯´æ˜ï¼š</p>
<p>éƒ¨åˆ†é…ç½®å·²ç»åœ¨éƒ¨ç½²å›¾ä¸­æœ‰æ‰€è¯´æ˜ï¼Œè¿™é‡Œå†è¡¥å……ä¸€äº›å­—æ®µè¯´æ˜ï¼š</p>
<pre><code> 	#é…ç½®esçš„é›†ç¾¤åç§°ï¼Œä¸åŒçš„é›†ç¾¤ç”¨åå­—æ¥åŒºåˆ†ï¼Œesä¼šè‡ªåŠ¨å‘ç°åœ¨åŒä¸€ç½‘æ®µä¸‹çš„esï¼Œé…ç½®æˆç›¸åŒé›†ç¾¤åå­—çš„å„ä¸ªèŠ‚ç‚¹å½¢æˆä¸€ä¸ªé›†ç¾¤ã€‚å¦‚æœåœ¨åŒä¸€ç½‘æ®µä¸‹æœ‰å¤šä¸ªé›†ç¾¤ï¼Œå°±å¯ä»¥ç”¨è¿™ä¸ªå±æ€§æ¥åŒºåˆ†ä¸åŒçš„é›†ç¾¤ã€‚
    cluster.name: blu-es 

      #èŠ‚ç‚¹åç§°ï¼Œeså¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºèŠ‚ç‚¹åç§°ï¼Œè‡ªå·±é…ç½®ä¸‹æ›´æ–¹ä¾¿ç»´æŠ¤å§
    node.name: es01
    
     #æ˜¯å¦ä½œä¸ºä¸»èŠ‚ç‚¹
    node.master: true
    
    #æ˜¯å¦å­˜å‚¨æ•°æ® 
    node.data: false

    # é»˜è®¤æƒ…å†µä¸‹ï¼ŒElasticSearchä½¿ç”¨0.0.0.0åœ°å€ï¼Œå¹¶ä¸ºhttpä¼ è¾“å¼€å¯9200-9300ç«¯å£ï¼Œä¸ºèŠ‚ç‚¹åˆ°èŠ‚ç‚¹çš„é€šä¿¡å¼€å¯9300-9400ç«¯å£ï¼Œå¯ä»¥è‡ªè¡Œè®¾ç½®IPåœ°å€
    network.host: æˆ‘è®¾ç½®ä¸ºå†…ç½‘çš„IPäº†

    # è¾“ç›‘å¬å®šåˆ¶ç«¯å£
    http.port: 9200

    # æ•°æ®æ–‡ä»¶å­˜å‚¨è·¯å¾„ æ­¤è·¯å¾„è¦åˆ›å»ºå‡ºæ¥
    path.data: /home/elk/data

    # æ—¥å¿—æ–‡ä»¶å­˜å‚¨è·¯å¾„ï¼Œæ­¤è·¯å¾„è¦åˆ›å»ºå‡ºæ¥
    path.logs: /var/log/elasticsearch
</code></pre>
<h4 id="ESç¯å¢ƒå¯åŠ¨"><a href="#ESç¯å¢ƒå¯åŠ¨" class="headerlink" title="ESç¯å¢ƒå¯åŠ¨"></a>ESç¯å¢ƒå¯åŠ¨</h4><ul>
<li><strong>elasticsearché»˜è®¤æ˜¯ä¸æ”¯æŒç”¨rootç”¨æˆ·æ¥å¯åŠ¨çš„ã€‚</strong></li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li><p>1.æ–°å»ºä¸“é—¨çš„ç”¨æˆ·ç”¨æ¥ç®¡ç†elasticsearchï¼Œçº¿ä¸Šç¯å¢ƒç¡®å®ä¹Ÿä¸å»ºè®®ä½¿ç”¨rootç”¨æˆ·</p>
</li>
<li><p>2.å¯åŠ¨æ—¶ï¼Œè¿½åŠ  <code>Des.insecure.allow.root=true</code></p>
<pre><code>  åœ¨ `/usr/local/elasticsearch/elasticsearch-2.4.4/bin/elasticsearch` ä¸­å¢åŠ  ES_JAVA_OPTS=&quot;-Des.insecure.allow.root=true&quot;
</code></pre>
</li>
</ul>
<p>å¯åŠ¨ESç¯å¢ƒ</p>
<pre><code>    cd /usr/local/elasticsearch/elasticsearch-2.4.4/bin
    sh ./elasticsearch -d
</code></pre>
<ul>
<li>-dè¡¨ç¤ºåå°å¯åŠ¨</li>
</ul>
<h4 id="Elasticsearchæ’ä»¶å®‰è£…"><a href="#Elasticsearchæ’ä»¶å®‰è£…" class="headerlink" title="Elasticsearchæ’ä»¶å®‰è£…"></a>Elasticsearchæ’ä»¶å®‰è£…</h4><p>åœ¨ç†Ÿæ‚‰Elasticsearchè¿‡ç¨‹ä¸­ï¼Œäº†è§£åˆ°æœ‰è®¸å¤šä¸é”™çš„æ’ä»¶ï¼Œè¿™é‡ŒæŠŠç®€å•è®°å½•ä¸‹æ’ä»¶çš„å®‰è£…æ–¹æ³•</p>
<ul>
<li><p>é€šè¿‡plugin å‘½ä»¤è¿›è¡Œå®‰è£…</p>
<pre><code>  #head æ–¹ä¾¿å¯¹esè¿›è¡Œå„ç§æ“ä½œçš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥æŸ¥çœ‹å„ä¸ªç´¢å¼•çš„æ•°æ®é‡ä»¥åŠåˆ†ç‰‡çš„çŠ¶æ€ï¼Œ
  /usr/share/elasticsearch/bin/plugin install mobz/elasticsearch-head
  #kopf esçš„ç®¡ç†å·¥å…·ï¼Œä¹Ÿæä¾›äº†å¯¹ESé›†ç¾¤æ“ä½œçš„APIã€‚
  /usr/share/elasticsearch/bin/plugin install lmenezes/elasticsearch-kopf
  #bigdesk ç›‘æ§esçŠ¶æ€çš„æ’
  /usr/share/elasticsearch/bin/plugin install hlstudio/bigdesk
</code></pre>
</li>
<li><p>è¿˜å¯ä»¥åˆ°githubä¸ŠæŸ¥æ‰¾æ’ä»¶çš„æºç è¿›è¡Œæ‰‹åŠ¨å®‰è£…ï¼Œå®‰è£…ç»†èŠ‚ä¸å†èµ˜è¿°ã€‚</p>
</li>
<li><p>è®¿é—®æ’ä»¶ï¼š <code>/_plugin/æ’ä»¶åç§°</code></p>
<pre><code>  å¦‚è®¿é—®head
  http://ip:9200/_plugin/head/
</code></pre>
</li>
</ul>
<h4 id="Elasticsearché›†ç¾¤é…ç½®"><a href="#Elasticsearché›†ç¾¤é…ç½®" class="headerlink" title="Elasticsearché›†ç¾¤é…ç½®"></a>Elasticsearché›†ç¾¤é…ç½®</h4><p>ä¸»è¦æ˜¯é’ˆå¯¹ <code>elasticsearch.yml</code>çš„é…ç½®ï¼Œä¸Šè¿°æ­¥éª¤å·²ç»å¯¹è¯¥æ–‡ä»¶éƒ¨åˆ†å…³é”®å­—æ®µè¯´æ˜ï¼Œæˆ‘åœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨äº†3å°åšé›†ç¾¤é…ç½®ï¼Œé€šè¿‡headæ’ä»¶å¯ä»¥æŸ¥çœ‹é›†ç¾¤çš„çŠ¶æ€ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/7108d6c2ly1fdl4okw4u7j20o60hrdks"></p>
<p>ES é›†ç¾¤æ­å»ºOK~</p>
<h3 id="2-éƒ¨ç½²kafkaé›†ç¾¤"><a href="#2-éƒ¨ç½²kafkaé›†ç¾¤" class="headerlink" title="2.éƒ¨ç½²kafkaé›†ç¾¤"></a>2.éƒ¨ç½²kafkaé›†ç¾¤</h3><p>Kafkaé›†ç¾¤æ˜¯æŠŠçŠ¶æ€ä¿å­˜åœ¨Zookeeperä¸­çš„ï¼Œé¦–å…ˆè¦æ­å»ºZookeeperé›†ç¾¤ã€‚</p>
<ul>
<li>Zookeeperé€šè¿‡å¤åˆ¶æ¥å®ç°é«˜å¯ç”¨æ€§ï¼Œåªè¦é›†ç¾¤ä¸­åŠæ•°ä»¥ä¸Šçš„èŠ‚ç‚¹å¤„äºå¯ç”¨çŠ¶æ€ï¼Œå®ƒå°±èƒ½å¤Ÿä¿è¯æœåŠ¡ç»§ç»­ã€‚æ‰€ä»¥æ­å»ºé›†ç¾¤çš„æœåŠ¡å™¨å°æ•°åº”è¯¥ä¸ºï¼ˆ2*n+1ï¼‰å°ã€‚</li>
</ul>
<h4 id="1-Zookeeperçš„å®‰è£…é…ç½®"><a href="#1-Zookeeperçš„å®‰è£…é…ç½®" class="headerlink" title="1) Zookeeperçš„å®‰è£…é…ç½®"></a>1) Zookeeperçš„å®‰è£…é…ç½®</h4><ul>
<li><a target="_blank" rel="noopener" href="https://zookeeper.apache.org/">zookeeperå®˜ç½‘</a></li>
</ul>
<p>ä¸Šè¿°è¯´æ˜zookeeperé›†ç¾¤å¿…é¡»ä¿è¯3å°ä»¥ä¸Šçš„æœåŠ¡å™¨ï¼Œæˆ‘è¿™é‡Œæ­å»º3å°zookeeperæœåŠ¡å™¨</p>
<h5 id="åˆ›å»ºmyidæ–‡ä»¶"><a href="#åˆ›å»ºmyidæ–‡ä»¶" class="headerlink" title="åˆ›å»ºmyidæ–‡ä»¶"></a>åˆ›å»ºmyidæ–‡ä»¶</h5><ul>
<li>myid ä¸ºæœåŠ¡å™¨ç¼–å·ï¼Œç”¨äºæ ‡è¯†æœåŠ¡å™¨ï¼Œè¿™ä¸ªå€¼å¿…é¡»å’ŒdataDirç›®å½•ä¸‹myidæ–‡ä»¶ä¸­çš„å€¼ä¿è¯ä¸€è‡´</li>
</ul>
<table>
<thead>
<tr>
<th>æœåŠ¡IP</th>
<th>myid</th>
</tr>
</thead>
<tbody><tr>
<td>10.11.1.11</td>
<td>11</td>
</tr>
<tr>
<td>10.11.1.12</td>
<td>12</td>
</tr>
<tr>
<td>10.11.1.13</td>
<td>13</td>
</tr>
</tbody></table>
<pre><code>ä¸ºæ¯å°æœºå™¨åˆ›å»ºmyidæ–‡ä»¶
# 10.11.1.11
echo 11 &gt;/home/zookeeper/data/myid
# 10.11.1.12
echo 12 &gt;/home/zookeeper/data/myid
# 10.11.1.13
echo 13 &gt;/home/zookeeper/data/myid
</code></pre>
<h5 id="æˆ‘ä»å®˜ç½‘ä¸‹è½½äº†-zookeeper-3-4-9-tar-gz"><a href="#æˆ‘ä»å®˜ç½‘ä¸‹è½½äº†-zookeeper-3-4-9-tar-gz" class="headerlink" title="æˆ‘ä»å®˜ç½‘ä¸‹è½½äº† zookeeper-3.4.9.tar.gz"></a>æˆ‘ä»å®˜ç½‘ä¸‹è½½äº† <code>zookeeper-3.4.9.tar.gz</code></h5><h5 id="è§£å‹ç¼©tar-tz-1"><a href="#è§£å‹ç¼©tar-tz-1" class="headerlink" title="è§£å‹ç¼©tar.tz"></a>è§£å‹ç¼©tar.tz</h5><pre><code>    cd /usr/local/zookeeper
    tar -zxvf zookeeper-3.4.9.tar.gz
</code></pre>
<h5 id="ä¿®æ”¹é…ç½®æ–‡ä»¶-1"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶-1" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><pre><code>    cd /usr/local/zookeeper/zookeeper-3.4.9/conf
    cp zoo_sample.cfg zoo.cfg
    vim zoo.cfg


    # è¿™ä¸ªæ—¶é—´æ˜¯ä½œä¸ºZkæœåŠ¡å™¨ä¹‹é—´æˆ–å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ç»´æŒå¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œæ¯éš”tickTimeæ—¶é—´å°±ä¼šå‘é€ä¸€ä¸ªå¿ƒè·³ï¼›æœ€å° çš„sessionè¿‡æœŸæ—¶é—´ä¸º2å€tickTime 
    tickTime=2000
    # æ­¤é…ç½®è¡¨ç¤ºï¼Œå…è®¸follower(ç›¸å¯¹äºLeadererè¨€çš„â€œå®¢æˆ·ç«¯â€)è¿æ¥å¹¶åŒæ­¥åˆ°Leaderçš„åˆå§‹åŒ–è¿æ¥æ—¶é—´ï¼Œä»¥tickTimeä¸ºå•ä½ã€‚å½“åˆå§‹åŒ–è¿æ¥æ—¶é—´è¶…è¿‡è¯¥å€¼ï¼Œåˆ™è¡¨ç¤ºè¿æ¥å¤±è´¥ã€‚
    initLimit=10
    # æ­¤é…ç½®é¡¹è¡¨ç¤ºLeaderä¸Followerä¹‹é—´å‘é€æ¶ˆæ¯æ—¶ï¼Œè¯·æ±‚å’Œåº”ç­”æ—¶é—´é•¿åº¦ã€‚å¦‚æœfolloweråœ¨è®¾ç½®æ—¶é—´å†…ä¸èƒ½ä¸leaderé€šä¿¡ï¼Œé‚£ä¹ˆæ­¤followerå°†ä¼šè¢«ä¸¢å¼ƒã€‚
    syncLimit=5
    # æ•°æ®çš„å­˜æ”¾è·¯å¾„
    dataDir=/home/zookeeper/data
    # the port at which the clients will connect
    clientPort=2181
    # the maximum number of client connections.
    # æœ€å¤§çš„å¹¶å‘è¿æ¥æ•°é™åˆ¶ï¼Œè®¾ç½®ä¸º0æˆ–è€…ä¸è®¾ç½®è¯¥å‚æ•°ï¼Œè¡¨ç¤ºä¸è¿›è¡Œè¿æ¥æ•°çš„é™åˆ¶ã€‚
    #maxClientCnxns=60
    
    # é›†ç¾¤æ¨¡å¼çš„é…ç½®å‚æ•°
    # ç¬¬ä¸€ä¸ªç«¯å£æ˜¯masterå’Œslaveä¹‹é—´çš„é€šä¿¡ç«¯å£ï¼Œé»˜è®¤æ˜¯2888ï¼Œç¬¬äºŒä¸ªç«¯å£æ˜¯leaderé€‰ä¸¾çš„ç«¯å£ï¼Œé›†ç¾¤åˆšå¯åŠ¨çš„æ—¶å€™é€‰ä¸¾æˆ–è€…leaderæŒ‚æ‰ä¹‹åè¿›è¡Œæ–°çš„é€‰ä¸¾çš„ç«¯å£é»˜è®¤æ˜¯3888
    server.11=10.11.1.11:2888:3888
    server.12=10.11.1.12:2888:3888
    server.13=10.11.1.13:2888:3888
    
    #
    # Be sure to read the maintenance section of the 
    # administrator guide before turning on autopurge.
    #
    # http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance
    #
    # The number of snapshots to retain in dataDir
    #autopurge.snapRetainCount=3
    # Purge task interval in hours
    # Set to &quot;0&quot; to disable auto purge feature
    #autopurge.purgeInterval=1		
</code></pre>
<p>æ¯å°çš„zoo.cfgçš„é…ç½®ç›¸åŒï¼Œå¤åˆ¶åˆ°æ¯ä¸€å°å³å¯</p>
<h5 id="å¯åŠ¨zookeeperç¯å¢ƒ"><a href="#å¯åŠ¨zookeeperç¯å¢ƒ" class="headerlink" title="å¯åŠ¨zookeeperç¯å¢ƒ"></a>å¯åŠ¨zookeeperç¯å¢ƒ</h5><pre><code>åœ¨binç›®å½•ä¸‹æ‰§è¡Œ
nohup ./zkServer.sh start &amp;
</code></pre>
<h5 id="æŸ¥çœ‹çŠ¶æ€"><a href="#æŸ¥çœ‹çŠ¶æ€" class="headerlink" title="æŸ¥çœ‹çŠ¶æ€"></a>æŸ¥çœ‹çŠ¶æ€</h5><pre><code>./zkServer.sh status
Using config: /usr/local/zookeeper/zookeeper-3.4.9/bin/../conf/zoo.cfg
Mode: follower 
æˆ–è€… Mode: leader 
</code></pre>
<h4 id="2-kafkaçš„å®‰è£…é…ç½®"><a href="#2-kafkaçš„å®‰è£…é…ç½®" class="headerlink" title="2) kafkaçš„å®‰è£…é…ç½®"></a>2) kafkaçš„å®‰è£…é…ç½®</h4><ul>
<li><a target="_blank" rel="noopener" href="https://kafka.apache.org/">kafkaå®˜ç½‘</a></li>
</ul>
<h5 id="æˆ‘ä»kafkaçš„å®˜ç½‘ä¸‹è½½äº†-kafka-2-11-0-10-2-0-tgz"><a href="#æˆ‘ä»kafkaçš„å®˜ç½‘ä¸‹è½½äº†-kafka-2-11-0-10-2-0-tgz" class="headerlink" title="æˆ‘ä»kafkaçš„å®˜ç½‘ä¸‹è½½äº† kafka_2.11-0.10.2.0.tgz"></a>æˆ‘ä»kafkaçš„å®˜ç½‘ä¸‹è½½äº† <code>kafka_2.11-0.10.2.0.tgz</code></h5><h5 id="è§£å‹ç¼©tar-tz-2"><a href="#è§£å‹ç¼©tar-tz-2" class="headerlink" title="è§£å‹ç¼©tar.tz"></a>è§£å‹ç¼©tar.tz</h5><pre><code>    cd /usr/local/kafka
    tar -zxvf kafka_2.11-0.10.2.0.tgz
</code></pre>
<h5 id="ä¿®æ”¹é…ç½®æ–‡ä»¶-2"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶-2" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h5><pre><code>    vim /usr/local/kafka/kafka_2.11-0.10.2.0/config/server.properties
</code></pre>
<p>é…ç½®æ–‡ä»¶ä¸»è¦å‚æ•°è¯´æ˜</p>
<pre><code>    #å½“å‰æœºå™¨åœ¨é›†ç¾¤ä¸­çš„å”¯ä¸€æ ‡è¯†ï¼Œå’Œzookeeperçš„myidæ€§è´¨ä¸€æ ·
    broker.id=1  
    
    #å½“å‰kafkaå¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£é»˜è®¤æ˜¯9092
    port=9092 #ä¸é…ç½®çš„è¯ï¼Œé»˜è®¤ä¸º9092
    
    #è¿™ä¸ªæ˜¯borkerè¿›è¡Œç½‘ç»œå¤„ç†çš„çº¿ç¨‹æ•°
    num.network.threads=3 
    
    #è¿™ä¸ªæ˜¯borkerè¿›è¡ŒI/Oå¤„ç†çš„çº¿ç¨‹æ•°
    num.io.threads=8 
    
    #æ¶ˆæ¯å­˜æ”¾çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•å¯ä»¥é…ç½®ä¸ºâ€œï¼Œâ€é€—å·åˆ†å‰²çš„è¡¨è¾¾å¼ï¼Œä¸Šé¢çš„num.io.threadsè¦å¤§äºè¿™ä¸ªç›®å½•çš„ä¸ªæ•°è¿™ä¸ªç›®å½•ï¼Œå¦‚æœé…ç½®å¤šä¸ªç›®å½•ï¼Œæ–°åˆ›å»ºçš„topicä»–æŠŠæ¶ˆæ¯æŒä¹…åŒ–çš„åœ°æ–¹æ˜¯ï¼Œå½“å‰ä»¥é€—å·åˆ†å‰²çš„ç›®å½•ä¸­ï¼Œé‚£ä¸ªåˆ†åŒºæ•°æœ€å°‘å°±æ”¾é‚£ä¸€ä¸ª
    log.dirs=/usr/local/kafka/kafka_2.11-0.10.2.0/logs 
    
    
    #å‘é€ç¼“å†²åŒºbufferå¤§å°ï¼Œæ•°æ®ä¸æ˜¯ä¸€ä¸‹å­å°±å‘é€çš„ï¼Œå…ˆå›å­˜å‚¨åˆ°ç¼“å†²åŒºäº†åˆ°è¾¾ä¸€å®šçš„å¤§å°ååœ¨å‘é€ï¼Œèƒ½æé«˜æ€§èƒ½
    socket.send.buffer.bytes=102400 
    
    
    #kafkaæ¥æ”¶ç¼“å†²åŒºå¤§å°ï¼Œå½“æ•°æ®åˆ°è¾¾ä¸€å®šå¤§å°ååœ¨åºåˆ—åŒ–åˆ°ç£ç›˜
    socket.receive.buffer.bytes=102400 
    
    #è¿™ä¸ªå‚æ•°æ˜¯å‘kafkaè¯·æ±‚æ¶ˆæ¯æˆ–è€…å‘kafkaå‘é€æ¶ˆæ¯çš„è¯·è¯·æ±‚çš„æœ€å¤§æ•°ï¼Œè¿™ä¸ªå€¼ä¸èƒ½è¶…è¿‡javaçš„å †æ ˆå¤§å°
    socket.request.max.bytes=104857600 
    
    #é»˜è®¤çš„åˆ†åŒºæ•°ï¼Œä¸€ä¸ªtopicé»˜è®¤1ä¸ªåˆ†åŒºæ•°
    num.partitions=6
    
    #é»˜è®¤æ¶ˆæ¯çš„æœ€å¤§æŒä¹…åŒ–æ—¶é—´ï¼ˆå°æ—¶ï¼‰
    log.retention.hours=60 
    
    #è¿™ä¸ªå‚æ•°æ˜¯ï¼šå› ä¸ºkafkaçš„æ¶ˆæ¯æ˜¯ä»¥è¿½åŠ çš„å½¢å¼è½åœ°åˆ°æ–‡ä»¶ï¼Œå½“è¶…è¿‡è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œkafkaä¼šæ–°èµ·ä¸€ä¸ªæ–‡ä»¶
    log.segment.bytes=1073741824
    
    #æ¯éš”300000æ¯«ç§’å»æ£€æŸ¥ä¸Šé¢é…ç½®çš„logå¤±æ•ˆæ—¶é—´ï¼ˆlog.retention.hours=168 ï¼‰ï¼Œåˆ°ç›®å½•æŸ¥çœ‹æ˜¯å¦æœ‰è¿‡æœŸçš„æ¶ˆæ¯å¦‚æœæœ‰ï¼Œåˆ é™¤
    log.retention.check.interval.ms=300000 
    
    #è®¾ç½®zookeeperçš„è¿æ¥ç«¯å£
    zookeeper.connect=10.11.1.11:2181,10.11.1.12:2181,10.11.1.13:2181
    
    æŒ‡å®šå®¢æˆ·ç«¯è¿æ¥zookeeperçš„æœ€å¤§è¶…æ—¶æ—¶é—´
    zookeeper.connection.timeout.ms=6000
</code></pre>
<ul>
<li>å¦å¤–2å°çš„é…ç½®åªæ˜¯éœ€è¦ä¿®æ”¹broker.idå³å¯ï¼Œ3å°æœåŠ¡å™¨ä¿è¯broker.idä¸ç›¸åŒã€‚</li>
</ul>
<h5 id="é…ç½®ä¸»æœºåå¯¹åº”IPçš„è§£æ"><a href="#é…ç½®ä¸»æœºåå¯¹åº”IPçš„è§£æ" class="headerlink" title="é…ç½®ä¸»æœºåå¯¹åº”IPçš„è§£æ"></a>é…ç½®ä¸»æœºåå¯¹åº”IPçš„è§£æ</h5><p><strong>3å°é…ç½®ç›¸åŒ</strong></p>
<pre><code>    vim /etc/hosts
     
    10.11.1.11 server1
    10.11.1.12 server2
    10.11.1.13 server3
</code></pre>
<h5 id="å¯åŠ¨kafkaç¯å¢ƒ"><a href="#å¯åŠ¨kafkaç¯å¢ƒ" class="headerlink" title="å¯åŠ¨kafkaç¯å¢ƒ"></a>å¯åŠ¨kafkaç¯å¢ƒ</h5><pre><code>    nohup ./kafka-server-start.sh ../config/server.properties &amp;
</code></pre>
<p>kafkaé›†ç¾¤æ­å»ºOK</p>
<h3 id="3-éƒ¨ç½²logstashæœåŠ¡"><a href="#3-éƒ¨ç½²logstashæœåŠ¡" class="headerlink" title="3.éƒ¨ç½²logstashæœåŠ¡"></a>3.éƒ¨ç½²logstashæœåŠ¡</h3><p>åœ¨æ­¤æ¶æ„ä¸­ï¼Œlogstashæ‹…ä»»ä¸¤ç§è§’è‰²ï¼Œä¹Ÿå¤„äºä¸åŒçš„å±‚æ¬¡</p>
<ul>
<li>å¯¹æ—¥å¿—è¿›è¡Œæ ¼å¼åŒ–ç­‰å¤„ç†ï¼Œå¯¹æ¥è½¬å­˜åˆ°kafkaé›†ç¾¤ä¸­ã€‚</li>
<li>ä½œä¸ºï¼ˆæ¶ˆè´¹è€…ï¼‰ä»kafkaé›†ç¾¤ä¸­æ‹‰å–æ—¥å¿—æ¶ˆæ¯ã€‚åŒæ­¥åˆ°ESé›†ç¾¤ã€‚</li>
</ul>
<h4 id="éƒ¨ç½²æ—¥å¿—å¤„ç†å±‚çš„logstash"><a href="#éƒ¨ç½²æ—¥å¿—å¤„ç†å±‚çš„logstash" class="headerlink" title="éƒ¨ç½²æ—¥å¿—å¤„ç†å±‚çš„logstash"></a>éƒ¨ç½²æ—¥å¿—å¤„ç†å±‚çš„logstash</h4><p>è¿™é‡Œç”¨åˆ°äº† <code>GeoLite</code>, å¯ç”¨äºè½¬æ¢IPï¼Œå˜æˆåœ°ç†ä½ç½®ä¿¡æ¯ã€‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://dev.maxmind.com/">GeoLiteå®˜ç½‘</a></li>
</ul>
<h5 id="ä»GeoLiteå®˜ç½‘ä¸‹è½½-GeoLiteCity-dat-gz"><a href="#ä»GeoLiteå®˜ç½‘ä¸‹è½½-GeoLiteCity-dat-gz" class="headerlink" title="ä»GeoLiteå®˜ç½‘ä¸‹è½½ GeoLiteCity.dat.gz"></a>ä»GeoLiteå®˜ç½‘ä¸‹è½½ <code>GeoLiteCity.dat.gz</code></h5><h5 id="ä»elasticå®˜ç½‘ä¸‹è½½-logstash-2-3-4-tar-gz"><a href="#ä»elasticå®˜ç½‘ä¸‹è½½-logstash-2-3-4-tar-gz" class="headerlink" title="ä»elasticå®˜ç½‘ä¸‹è½½ logstash-2.3.4.tar.gz"></a>ä»elasticå®˜ç½‘ä¸‹è½½ <code>logstash-2.3.4.tar.gz</code></h5><h5 id="è§£å‹logstash-2-3-4-tar-gz"><a href="#è§£å‹logstash-2-3-4-tar-gz" class="headerlink" title="è§£å‹logstash-2.3.4.tar.gz"></a>è§£å‹logstash-2.3.4.tar.gz</h5><pre><code>    cd /usr/local/logstash
    tar -zxvf logstash-2.3.4.tar.gz
</code></pre>
<h5 id="è§£å‹GeoLiteCity-dat-gz"><a href="#è§£å‹GeoLiteCity-dat-gz" class="headerlink" title="è§£å‹GeoLiteCity.dat.gz"></a>è§£å‹GeoLiteCity.dat.gz</h5><pre><code>    cd /usr/local/logstash
    tar -zxvf GeoLiteCity.dat.gz
</code></pre>
<h5 id="ç¼–è¾‘è·å–æ—¥å¿—å¹¶è¾“å‡ºåˆ°kafkaçš„é…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘è·å–æ—¥å¿—å¹¶è¾“å‡ºåˆ°kafkaçš„é…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘è·å–æ—¥å¿—å¹¶è¾“å‡ºåˆ°kafkaçš„é…ç½®æ–‡ä»¶"></a>ç¼–è¾‘è·å–æ—¥å¿—å¹¶è¾“å‡ºåˆ°kafkaçš„é…ç½®æ–‡ä»¶</h5><p><code>vim logstash_in_kafka.conf</code></p>
<pre><code>    # ç”¨äºæ¥æ”¶Beatsç»„ä»¶ä¼ é€çš„æ—¥å¿—ä¿¡æ¯
    input &#123;
        beats &#123;
        port =&gt; 5044
        codec =&gt; &quot;json&quot;
    &#125;
    &#125;
    
    # è¿‡æ»¤æ—¥å¿—å†…å®¹ï¼Œè¿™é‡Œåˆ¤æ–­nginxæ—¥å¿—æ—¶ï¼Œå¢åŠ ipè½¬æ¢çš„å†…å®¹  
    filter &#123;
        if [type] == &quot;nginxacclog&quot; &#123;
     
        geoip &#123;
            source =&gt; &quot;clientip&quot;
            target =&gt; &quot;geoip&quot;
            database =&gt; &quot;/usr/local/logstash/GeoLiteCity.dat&quot;
            add_field =&gt; [ &quot;[geoip][coordinates]&quot;,&quot;%&#123;[geoip][longitude]&#125;&quot; ]
            add_field =&gt; [ &quot;[geoip][coordinates]&quot;,&quot;%&#123;[geoip][latitude]&#125;&quot; ]
    &#125;
    
        mutate &#123;
            convert =&gt; [ &quot;[geoip][coordinates]&quot;,&quot;float&quot; ]
     
    &#125;
    &#125;
    &#125;

    # è¾“å‡ºåˆ°kafkaä¸­
    output &#123;
      kafka &#123;
        workers =&gt; 2
        bootstrap_servers =&gt; &quot;10.11.1.11:9092,10.11.1.12:9092,10.11.1.13:9092&quot;
        topic_id =&gt; &quot;peiyinlog&quot;
    &#125;
    &#125;
</code></pre>
<ul>
<li>workersï¼šç”¨äºå†™å…¥æ—¶çš„å·¥ä½œçº¿ç¨‹</li>
<li>bootstrap_serversï¼šæŒ‡å®šå¯ç”¨çš„kafka brokerå®ä¾‹åˆ—è¡¨</li>
<li>topic_idï¼šæŒ‡å®štopicåç§°ï¼Œå¯ä»¥åœ¨å†™å…¥å‰æ‰‹åŠ¨åœ¨brokeråˆ›å»ºå®šä¹‰å¥½åˆ†ç‰‡æ•°å’Œå‰¯æœ¬æ•°ï¼Œä¹Ÿå¯ä»¥ä¸æå‰åˆ›å»ºï¼Œé‚£ä¹ˆåœ¨logstashå†™å…¥æ—¶ä¼šè‡ªåŠ¨åˆ›å»º</li>
<li>topicï¼Œåˆ†ç‰‡æ•°å’Œå‰¯æœ¬æ•°åˆ™é»˜è®¤ä¸ºbrokeré…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„ã€‚</li>
</ul>
<h5 id="å¯åŠ¨logstash"><a href="#å¯åŠ¨logstash" class="headerlink" title="å¯åŠ¨logstash"></a>å¯åŠ¨logstash</h5><pre><code>    nohup ./logstash agent -f logstash_in_kafka.conf &amp;
</code></pre>
<h4 id="éƒ¨ç½²ä½œä¸ºconsumerçš„logstash"><a href="#éƒ¨ç½²ä½œä¸ºconsumerçš„logstash" class="headerlink" title="éƒ¨ç½²ä½œä¸ºconsumerçš„logstash"></a>éƒ¨ç½²ä½œä¸ºconsumerçš„logstash</h4><p>åŒæ ·è§£å‹logstash-2.3.4.tar.gzï¼Œåªæ˜¯è¿™é‡Œçš„é…ç½®æ–‡ä»¶ä¸åŒ</p>
<h5 id="ç¼–è¾‘ä»kafkaè·å–æ—¥å¿—å†…å®¹ï¼Œä¼ è¾“åˆ°ESé›†ç¾¤çš„é…ç½®æ–‡ä»¶"><a href="#ç¼–è¾‘ä»kafkaè·å–æ—¥å¿—å†…å®¹ï¼Œä¼ è¾“åˆ°ESé›†ç¾¤çš„é…ç½®æ–‡ä»¶" class="headerlink" title="ç¼–è¾‘ä»kafkaè·å–æ—¥å¿—å†…å®¹ï¼Œä¼ è¾“åˆ°ESé›†ç¾¤çš„é…ç½®æ–‡ä»¶"></a>ç¼–è¾‘ä»kafkaè·å–æ—¥å¿—å†…å®¹ï¼Œä¼ è¾“åˆ°ESé›†ç¾¤çš„é…ç½®æ–‡ä»¶</h5><p><code>vim kafka_to_es.conf</code></p>
<pre><code>    # ä»kafkaè·å–æ—¥å¿—å†…å®¹
    input&#123;
        kafka &#123;
            zk_connect =&gt; &quot;10.11.1.11:2181,10.11.1.12:2181,10.11.1.13:2181&quot;
            group_id =&gt; &quot;logstash&quot;
            topic_id =&gt; &quot;peiyinlog&quot;
            reset_beginning =&gt; false
            consumer_threads =&gt; 50
            decorate_events =&gt; true
     
    &#125;
     
    &#125;
     
    # åˆ é™¤ä¸€äº›ä¸éœ€è¦çš„å­—æ®µ  
    filter &#123;
      if [type] == &quot;nginxacclog&quot; &#123;
     
         mutate &#123;
         remove_field =&gt; [&quot;slbip&quot;,&quot;kafka&quot;,&quot;domain&quot;,&quot;serverip&quot;,&quot;url&quot;,&quot;@version&quot;,&quot;offset&quot;,&quot;input_type&quot;,&quot;count&quot;,&quot;source&quot;,&quot;fields&quot;,&quot;beat.hostname&quot;,&quot;host&quot;,&quot;tags&quot;]
        &#125;
    &#125;
     
    &#125;
     
    # è¾“å‡ºæ—¥å¿—åˆ°ESé›†ç¾¤
    output &#123;
        if [type] == &quot;nginxacclog&quot; &#123;
           # stdout &#123;codec =&gt; rubydebug &#125;
            elasticsearch &#123;
                hosts =&gt; [&quot;x.x.x.x:9200&quot;,&quot;x.x.x.x:9200&quot;]
                index =&gt; &quot;logstash-nginxacclog-%&#123;+YYYY.MM.dd&#125;&quot;
                manage_template =&gt; true
                flush_size =&gt; 50000
                idle_flush_time =&gt; 10
                workers =&gt; 2
    &#125;
     
    &#125;
        if [type] == &quot;messages&quot; &#123;
            elasticsearch &#123;
                hosts =&gt; [&quot;x.x.x.x:9200&quot;,&quot;x.x.x.x:9200&quot;]
                index =&gt; &quot;logstash-messages-%&#123;+YYYY.MM.dd&#125;&quot;
                manage_template =&gt; true
                flush_size =&gt; 50000
                idle_flush_time =&gt; 30
                workers =&gt; 1
    &#125;
     
    &#125;
     
    &#125;
</code></pre>
<h5 id="å¯åŠ¨logstash-1"><a href="#å¯åŠ¨logstash-1" class="headerlink" title="å¯åŠ¨logstash"></a>å¯åŠ¨logstash</h5><pre><code>    nohup ./logstash agent -f kafka_to_es.conf &amp;
</code></pre>
<h3 id="4-éƒ¨ç½²æ—¥å¿—é‡‡é›†ç¨‹åºFilebeat"><a href="#4-éƒ¨ç½²æ—¥å¿—é‡‡é›†ç¨‹åºFilebeat" class="headerlink" title="4.éƒ¨ç½²æ—¥å¿—é‡‡é›†ç¨‹åºFilebeat"></a>4.éƒ¨ç½²æ—¥å¿—é‡‡é›†ç¨‹åºFilebeat</h3><p>ä¸Šè¿°å·²è¯´æ˜ä½¿ç”¨beatsç»„ä»¶ä½œä¸ºæ—¥å¿—é‡‡é›†ç¨‹åºï¼Œè¿™é‡Œåªä½¿ç”¨äº†<code>filebeat</code>ç»„ä»¶æ”¶é›†æˆ‘ä»¬æµ‹è¯•ç¯å¢ƒä¸Šçš„nginxæ—¥å¿—centosæ“ä½œç³»ç»Ÿæ—¥å¿—ï¼Œå¹¶ä¼ è¾“åˆ°logstashä¸­ã€‚</p>
<h4 id="ä»elasticå®˜ç½‘ä¸‹è½½-filebeat-1-2-3-x86-64-tar-gz"><a href="#ä»elasticå®˜ç½‘ä¸‹è½½-filebeat-1-2-3-x86-64-tar-gz" class="headerlink" title="ä»elasticå®˜ç½‘ä¸‹è½½ filebeat-1.2.3-x86_64.tar.gz"></a>ä»elasticå®˜ç½‘ä¸‹è½½ <code>filebeat-1.2.3-x86_64.tar.gz</code></h4><h4 id="è§£å‹logstash-2-3-4-tar-gz-1"><a href="#è§£å‹logstash-2-3-4-tar-gz-1" class="headerlink" title="è§£å‹logstash-2.3.4.tar.gz"></a>è§£å‹logstash-2.3.4.tar.gz</h4><pre><code>    cd /usr/local/filebeat
    tar -zxvf ogstash-2.3.4.tar.gz
</code></pre>
<h4 id="é…ç½®filebeat-yml-æ–‡ä»¶"><a href="#é…ç½®filebeat-yml-æ–‡ä»¶" class="headerlink" title="é…ç½®filebeat.yml æ–‡ä»¶"></a>é…ç½®filebeat.yml æ–‡ä»¶</h4><pre><code>    ################### Filebeat Configuration Example #########################
     
    ############################# Filebeat ######################################
     
    filebeat:
      prospectors:
        -
          paths:
            - /var/log/messages
     
          input_type: log
           
          document_type: messages
     
        -
          paths:
            - /var/log/nginx/access.log
           
          input_type: log
     
          document_type: nginxacclog
         
     
          multiline: 
              pattern: &#39;^[[:space:]]&#39;
              negate: true
              match: after
     
      registry_file: /var/lib/filebeat/registry
     
       
    ############################# Output ##########################################
       
    output:
      logstash: 
        hosts: [&quot;x.x.x.x:5044&quot;,&quot;x.x.x.x:5044&quot;]
       
     
    ############################# Shipper #########################################
       
    shipper: 
      name: &quot;blu_test&quot;
       
       
    ############################# Logging ######################################### 
       
    logging:  
      files:
        rotateeverybytes: 10485760 # = 10MB
</code></pre>
<h4 id="è¿™é‡ŒæŠŠnginxçš„accessæ—¥å¿—æºæ”¹ä¸ºjsonæ ¼å¼ï¼Œæ–¹ä¾¿åç»­å¤„ç†"><a href="#è¿™é‡ŒæŠŠnginxçš„accessæ—¥å¿—æºæ”¹ä¸ºjsonæ ¼å¼ï¼Œæ–¹ä¾¿åç»­å¤„ç†" class="headerlink" title="è¿™é‡ŒæŠŠnginxçš„accessæ—¥å¿—æºæ”¹ä¸ºjsonæ ¼å¼ï¼Œæ–¹ä¾¿åç»­å¤„ç†"></a>è¿™é‡ŒæŠŠnginxçš„accessæ—¥å¿—æºæ”¹ä¸ºjsonæ ¼å¼ï¼Œæ–¹ä¾¿åç»­å¤„ç†</h4><pre><code>    log_format json &#39;&#123; &quot;@timestamp&quot;:&quot;$time_local&quot;,&#39;
             &#39;&quot;clientip&quot;:&quot;$remote_addr&quot;,&#39;
             &#39;&quot;remote_user&quot;: &quot;$remote_user&quot;, &#39;
             &#39;&quot;http_x_forwarded_for&quot;:&quot;$http_x_forwarded_for&quot;,&#39;
             &#39;&quot;serverip&quot;:&quot;$server_addr&quot;,&#39;
             &#39;&quot;size&quot;:$body_bytes_sent,&#39;
             &#39;&quot;request_time&quot;:$request_time,&#39;
             &#39;&quot;domain&quot;:&quot;$host&quot;,&#39;
             &#39;&quot;request&quot;: &quot;$request&quot;, &#39;
             &#39;&quot;method&quot;:&quot;$request_method&quot;,&#39;
             &#39;&quot;requesturi&quot;:&quot;$request_uri&quot;,&#39;
             &#39;&quot;url&quot;:&quot;$uri&quot;,&#39;
             &#39;&quot;appversion&quot;:&quot;$HTTP_APP_VERSION&quot;,&#39;
             &#39;&quot;referer&quot;:&quot;$http_referer&quot;,&#39;
             &#39;&quot;agent&quot;:&quot;$http_user_agent&quot;,&#39;
             &#39;&quot;status&quot;:&quot;$status&quot;&#125;&#39;;
</code></pre>
<h4 id="é‡å¯nginxæœåŠ¡"><a href="#é‡å¯nginxæœåŠ¡" class="headerlink" title="é‡å¯nginxæœåŠ¡"></a>é‡å¯nginxæœåŠ¡</h4><pre><code>    nginx -s reload
</code></pre>
<h4 id="å¯åŠ¨-filebeat"><a href="#å¯åŠ¨-filebeat" class="headerlink" title="å¯åŠ¨ filebeat"></a>å¯åŠ¨ filebeat</h4><pre><code>    cd /usr/local/filebeat/filebeat-1.2.3-x86_64
    nohup ./filebeat start &amp;
</code></pre>
<h3 id="5-å®‰è£…é…ç½®kibana"><a href="#5-å®‰è£…é…ç½®kibana" class="headerlink" title="5.å®‰è£…é…ç½®kibana"></a>5.å®‰è£…é…ç½®kibana</h3><h4 id="å®‰è£…kibana"><a href="#å®‰è£…kibana" class="headerlink" title="å®‰è£…kibana"></a>å®‰è£…kibana</h4><p>kibanaæœ€æ—©æ˜¯ä¸ºäº†ä»£æ›¿logstash-web ç”¨æ¥æŸ¥çœ‹ ES ä¸­çš„æ•°æ®ï¼Œç”¨PHPç¼–å†™çš„web</p>
<p>k2 æ˜¯k1ä½œè€…ä½¿ç”¨rubyé‡å†™</p>
<p>K3 æ˜¯çº¯å‰ç«¯æ¡†æ¶æ­å»ºï¼Œä½¿ç”¨angularjs ç¼–å†™</p>
<p>K4 æ˜¯ä½¿ç”¨node.jsç¼–å†™</p>
<p>ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬å·²ç»æ˜¯K5 </p>
<p>æœ¬æ¬¡éƒ¨ç½²ä¾ç„¶é€‰ç”¨äº†æ¯”è¾ƒæˆç†Ÿçš„k4,å®‰è£…ä¹Ÿç›¸å¯¹æ¯”è¾ƒç®€å•</p>
<h5 id="ä»elasticå®˜ç½‘ä¸‹è½½-kibana-4-6-3-linux-x86-64-tar-gz"><a href="#ä»elasticå®˜ç½‘ä¸‹è½½-kibana-4-6-3-linux-x86-64-tar-gz" class="headerlink" title="ä»elasticå®˜ç½‘ä¸‹è½½ kibana-4.6.3-linux-x86_64.tar.gz"></a>ä»elasticå®˜ç½‘ä¸‹è½½ <code>kibana-4.6.3-linux-x86_64.tar.gz</code></h5><h5 id="è§£å‹kibana-4-6-3-linux-x86-64-tar-gz"><a href="#è§£å‹kibana-4-6-3-linux-x86-64-tar-gz" class="headerlink" title="è§£å‹kibana-4.6.3-linux-x86_64.tar.gz"></a>è§£å‹kibana-4.6.3-linux-x86_64.tar.gz</h5><pre><code>    cd /usr/local/kibana
    tar -zxvf kibana-4.6.3-linux-x86_64.tar.gz
</code></pre>
<h5 id="é…ç½®kibana-yml-æ–‡ä»¶"><a href="#é…ç½®kibana-yml-æ–‡ä»¶" class="headerlink" title="é…ç½®kibana.yml æ–‡ä»¶"></a>é…ç½®kibana.yml æ–‡ä»¶</h5><pre><code>    cd /usr/local/kibana/kibana-4.6.3-linux-x86_64/config
    vim kibana.yml
</code></pre>
<p>ä¸€å †å‚æ•°ï¼Œåªéœ€ä¿®æ”¹è¿™3ä¸ªï¼Œå³å¯å¯åŠ¨</p>
<pre><code>    # Kibana is served by a back end server. This controls which port to use.
    server.port: 5601
    
    # The host to bind the server to.
    server.host: &quot;0.0.0.0&quot;
    
    # The Elasticsearch instance to use for all your queries.
    elasticsearch.url: &quot;http://IP:9200&quot;
</code></pre>
<h5 id="å¯åŠ¨kibana"><a href="#å¯åŠ¨kibana" class="headerlink" title="å¯åŠ¨kibana"></a>å¯åŠ¨kibana</h5><pre><code>    nohup ./kibana &amp;
</code></pre>
<h4 id="è®¿é—®kibanaï¼Œé…ç½®æ—¥å¿—ç´¢å¼•"><a href="#è®¿é—®kibanaï¼Œé…ç½®æ—¥å¿—ç´¢å¼•" class="headerlink" title="è®¿é—®kibanaï¼Œé…ç½®æ—¥å¿—ç´¢å¼•"></a>è®¿é—®kibanaï¼Œé…ç½®æ—¥å¿—ç´¢å¼•</h4><ul>
<li>è®¿é—®åœ°å€ï¼š <code>http://IP:5601</code></li>
</ul>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒKibana è®¤ä¸ºä½ è¦è®¿é—®çš„æ˜¯é€šè¿‡ Logstash å¯¼å…¥ Elasticsearch çš„æ•°æ®ã€‚è¿™æ—¶å€™ä½ å¯ä»¥ç”¨é»˜è®¤çš„ logstash-* ä½œä¸ºä½ çš„ index patternã€‚é€šé…ç¬¦(*) åŒ¹é…ç´¢å¼•åä¸­é›¶åˆ°å¤šä¸ªå­—ç¬¦ã€‚å¦‚æœä½ çš„ Elasticsearch ç´¢å¼•æœ‰å…¶ä»–å‘½åçº¦å®šï¼Œè¾“å…¥åˆé€‚çš„ patternã€‚pattern ä¹Ÿå¼€å§‹æ˜¯æœ€ç®€å•çš„å•ä¸ªç´¢å¼•çš„åå­—ã€‚</p>
<p><img src="https://ws1.sinaimg.cn/mw690/7108d6c2ly1fdlec8xlpfj210z0hbtae"></p>
<p>å¦‚æœä¸€ä¸ªæ–°ç´¢å¼•æ˜¯å®šæœŸç”Ÿæˆï¼Œè€Œä¸”ç´¢å¼•åä¸­å¸¦æœ‰æ—¶é—´æˆ³ï¼Œé€‰æ‹© <code>Use event times to create index names</code> é€‰é¡¹ï¼Œç„¶åå†é€‰æ‹© <code>Index pattern interval</code>ã€‚è¿™å¯ä»¥æé«˜æœç´¢æ€§èƒ½ï¼ŒKibana ä¼šè‡³æœç´¢ä½ æŒ‡å®šçš„æ—¶é—´èŒƒå›´å†…çš„ç´¢å¼•ã€‚åœ¨ä½ ç”¨ Logstash è¾“å‡ºæ•°æ®ç»™ Elasticsearch çš„æƒ…å†µä¸‹å°¤å…¶æœ‰æ•ˆã€‚</p>
<p>ç‚¹å‡» <code>Create</code> æ·»åŠ  <code>index pattern</code>ã€‚ç¬¬ä¸€ä¸ªè¢«æ·»åŠ çš„ pattern ä¼šè‡ªåŠ¨è¢«è®¾ç½®ä¸ºé»˜è®¤å€¼ã€‚å¦‚æœä½ æœ‰å¤šä¸ª index pattern çš„æ—¶å€™ï¼Œä½ å¯ä»¥åœ¨ Settings &gt; Indices é‡Œè®¾ç½®å…·ä½“å“ªä¸ªæ˜¯é»˜è®¤å€¼ã€‚</p>
<p><img src="https://ws1.sinaimg.cn/mw690/7108d6c2ly1fdleezdoyrj21070pgq78"></p>
<h4 id="kibanaç®€å•ä»‹ç»"><a href="#kibanaç®€å•ä»‹ç»" class="headerlink" title="kibanaç®€å•ä»‹ç»"></a>kibanaç®€å•ä»‹ç»</h4><p>ç®€å•ä»‹ç»ä¸‹kibanaçš„ä¸‰ä¸ªæ¨¡å—</p>
<h5 id="Discover"><a href="#Discover" class="headerlink" title="Discover"></a>Discover</h5><p>å¯ä»¥ä» <strong><code>Discover</code></strong> é¡µé¢ä»¥äº¤äº’æ–¹å¼æ¢ç´¢æ—¥å¿—æ•°æ®ï¼Œå¯ä»¥è¿‡æ»¤æœç´¢ç»“æœä»¥åŠæŸ¥çœ‹æ–‡æ¡£æ•°æ®ã€‚ è¿˜å¯ä»¥æŸ¥çœ‹ä¸æœç´¢æŸ¥è¯¢åŒ¹é…çš„æ–‡æ¡£æ•°ï¼Œå¹¶è·å–å­—æ®µå€¼ç»Ÿè®¡ä¿¡æ¯ï¼Œå¯ä»¥é…ç½®æ—¶é—´å­—æ®µï¼Œåˆ™æ—¥å¿—éšæ—¶é—´çš„åˆ†å¸ƒå°†æ˜¾ç¤ºåœ¨é¡µé¢é¡¶éƒ¨çš„ç›´æ–¹å›¾ä¸­ã€‚</p>
<p><img src="https://ws1.sinaimg.cn/large/7108d6c2ly1fdlh5o8arrj218m0ekwgf"></p>
<h5 id="Visualize"><a href="#Visualize" class="headerlink" title="Visualize"></a>Visualize</h5><p><strong><code>Visualize</code></strong> ç”¨æ¥æ„å»ºæ˜¾ç¤ºç›¸å…³å¯è§†åŒ–çš„ä»ªè¡¨æ¿.Kibanaå¯è§†åŒ–åŸºäºElasticsearchæŸ¥è¯¢ã€‚ é€šè¿‡ä½¿ç”¨ä¸€ç³»åˆ—Elasticsearchèšåˆæ¥æå–å’Œå¤„ç†æ•°æ®</p>
<p><img src="https://ws1.sinaimg.cn/large/7108d6c2ly1fdlh5z4x7ej210p0k6tb6"></p>
<h5 id="Dashboard"><a href="#Dashboard" class="headerlink" title="Dashboard"></a>Dashboard</h5><p>Kibanaä»ªè¡¨æ¿æ˜¾ç¤ºå·²ä¿å­˜çš„å¯è§†åŒ–å¯¹è±¡çš„é›†åˆã€‚ å¯ä»¥æ ¹æ®éœ€è¦å®‰æ’å’Œè°ƒæ•´å¯è§†åŒ–å¯¹è±¡ï¼Œå¹¶ä¿å­˜ä»ªè¡¨æ¿ï¼Œä»¥ä¾¿é‡æ–°åŠ è½½å’Œå…±äº«ã€‚</p>
<p>æˆ‘åœ¨Visualizeä¸­åˆ¶ä½œäº†ä¸€äº›ç®€å•çš„ç»Ÿè®¡ï¼Œç»˜åˆ¶äº†ä¸€ä¸ªDashboard</p>
<p><img src="https://ws1.sinaimg.cn/large/7108d6c2ly1fdlhexd03kj21f30qzqfa"></p>
<p>ç›®å‰å¯¹KibanaåŠESå°šæœªæ·±å…¥äº†è§£ï¼Œåç»­æœ‰ä¸€å®šæŒæ¡ä¹‹åå†åšæ€»ç»“åˆ†äº«ã€‚</p>
<h3 id="åç»­ä¼˜åŒ–ï¼š"><a href="#åç»­ä¼˜åŒ–ï¼š" class="headerlink" title="åç»­ä¼˜åŒ–ï¼š"></a>åç»­ä¼˜åŒ–ï¼š</h3><ul>
<li>éƒ¨ç½²çš„çš„ç›¸å…³åº”ç”¨ç»Ÿä¸€ç®¡ç†ç­‰</li>
<li>ES è°ƒä¼˜</li>
<li>kafkaé›†ç¾¤è°ƒä¼˜</li>
<li>kibanaæ‰©å±•</li>
<li>kibanaæ¥å…¥åˆ°nginxä¸­</li>
<li>ç­‰ç­‰</li>
</ul>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://www.gitbook.com/book/chenryn/elk-stack-guide-cn/details">elk-stack-guide-cn</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://www.elastic.co/">elastic.co</a></p>
</li>
</ul>
</div><div class="tags"><a href="/tags/æ—¥å¿—"><i class="fa fa-tag">æ—¥å¿—</i></a></div><div class="post-nav"><a class="pre" href="/posts/29501/">vue2ç®€å•æ€»ç»“</a><a class="next" href="/posts/24257/">å¤šè¯´è¯„è®ºä¸€ç¯‡æ–‡ç« è¢«è¯„è®ºåï¼Œå…¶ä»–æ–‡ç« éƒ½æ·»åŠ äº†ç›¸åŒçš„è¯„è®º</a></div><div id="waline"></div><script src="//unpkg.com/@waline/client@v2/dist/waline.js"></script><link rel="stylesheet" type="text/css" href="//unpkg.com/@waline/client@v2/dist/waline.css"><script>let metaInfo = ['nick', 'mail', 'link']
let requiredMeta = 'nick,mail'.split(',').filter(item => {
  return metaInfo.indexOf(item) > -1
})
Waline.init({
  el: '#waline',
  comment: true,
  serverURL: 'https://comment.aimak.cn',
  pageSize: '30',
  wordLimit: '500',
  requiredMeta,
})
</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img src="/img/avatar.png"/></a><p>è®¤çœŸç”Ÿæ´».</p><a class="info-icon" href="https://twitter.com/fantasykaicc" title="Twitter" target="_blank" style="margin-inline:5px"> <i class="fa fa-twitter-square" style="margin-inline:5px"></i></a><a class="info-icon" href="mailto:makren@126.com" title="Email" target="_blank" style="margin-inline:5px"> <i class="fa fa-envelope-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/fantasykai" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/AI/">AI</a><span class="category-list-count">50</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/AI-%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4/">AI, ç½‘ç»œè¿ç»´</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java/">java</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%B9%E5%99%A8/">å®¹å™¨</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">å·¥å…·</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/">æŠ€æœ¯å°æ ˆ</a><span class="category-list-count">117</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">æ•°æ®åº“</a><span class="category-list-count">12</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E8%AE%B0/">æ‚è®°</a><span class="category-list-count">72</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">æµ‹è¯•</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AE%B0/">ç¬”è®°</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%93%E5%AD%98/">ç¼“å­˜</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">ç½‘ç»œ</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%AD%E5%BD%95/">è¯­å½•</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%B7%91%E6%AD%A5/">è·‘æ­¥</a><span class="category-list-count">4</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/%E6%9E%B6%E6%9E%84/" style="font-size: 15px;">æ¶æ„</a> <a href="/tags/PMO/" style="font-size: 15px;">PMO</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%9B%A2%E9%98%9F/" style="font-size: 15px;">æŠ€æœ¯å›¢é˜Ÿ</a> <a href="/tags/%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87/" style="font-size: 15px;">å¼€å‘æ•ˆç‡</a> <a href="/tags/%E6%9D%82%E8%AE%B0/" style="font-size: 15px;">æ‚è®°</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/thymeleaf/" style="font-size: 15px;">thymeleaf</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/idea/" style="font-size: 15px;">idea</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 15px;">äººå·¥æ™ºèƒ½</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" style="font-size: 15px;">äººå·¥æ™ºèƒ½,</a> <a href="/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" style="font-size: 15px;">æ·±åº¦å­¦ä¹ </a> <a href="/tags/AI-%E6%99%BA%E8%83%BD%E4%BD%93/" style="font-size: 15px;">AI æ™ºèƒ½ä½“</a> <a href="/tags/Deepseek-%E8%87%AA%E6%99%BA%E7%BD%91%E7%BB%9C-%E8%BF%90%E8%90%A5%E5%95%86-%E7%BD%91%E7%BB%9C%E8%BF%90%E7%BB%B4/" style="font-size: 15px;">Deepseek, è‡ªæ™ºç½‘ç»œ, è¿è¥å•†, ç½‘ç»œè¿ç»´</a> <a href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/" style="font-size: 15px;">çŸ¥è¯†å›¾è°±</a> <a href="/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD-%E6%8A%80%E6%9C%AF%E8%B6%8B%E5%8A%BF-%E8%A1%8C%E4%B8%9A%E5%8A%A8%E6%80%81/" style="font-size: 15px;">äººå·¥æ™ºèƒ½, æŠ€æœ¯è¶‹åŠ¿, è¡Œä¸šåŠ¨æ€</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/Chrome-%E6%95%88%E7%8E%87%E6%8F%92%E4%BB%B6/" style="font-size: 15px;">Chrome æ•ˆç‡æ’ä»¶</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 15px;">è¿ç»´</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/Mysql/" style="font-size: 15px;">Mysql</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/%E7%BC%93%E5%AD%98/" style="font-size: 15px;">ç¼“å­˜</a> <a href="/tags/Jenkins/" style="font-size: 15px;">Jenkins</a> <a href="/tags/%E5%AE%B9%E5%99%A8/" style="font-size: 15px;">å®¹å™¨</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/restful/" style="font-size: 15px;">restful</a> <a href="/tags/IPv6/" style="font-size: 15px;">IPv6</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 15px;">å‰ç«¯</a> <a href="/tags/%E6%8A%80%E6%9C%AF%E5%B0%8F%E6%A0%88/" style="font-size: 15px;">æŠ€æœ¯å°æ ˆ</a> <a href="/tags/CAP/" style="font-size: 15px;">CAP</a> <a href="/tags/ideas/" style="font-size: 15px;">ideas</a> <a href="/tags/%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">å¹¶å‘</a> <a href="/tags/%E9%AB%98%E5%B9%B6%E5%8F%91/" style="font-size: 15px;">é«˜å¹¶å‘</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 15px;">æµ‹è¯•</a> <a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 15px;">æ—¥å¿—</a> <a href="/tags/%E6%8A%A5%E5%91%8A%E5%88%86%E4%BA%AB/" style="font-size: 15px;">æŠ¥å‘Šåˆ†äº«</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/%E7%BD%91%E7%BB%9C/" style="font-size: 15px;">ç½‘ç»œ</a> <a href="/tags/SDN/" style="font-size: 15px;">SDN</a> <a href="/tags/%E8%AF%AD%E5%BD%95/" style="font-size: 15px;">è¯­å½•</a> <a href="/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/" style="font-size: 15px;">é©¬æ‹‰æ¾</a> <a href="/tags/%E5%81%A5%E5%BA%B7/" style="font-size: 15px;">å¥åº·</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/posts/11182/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11181/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11180/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11179/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11178/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11177/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11176/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/17953/">2025å¹´3æœˆ16æ—¥å—äº¬åŠç¨‹é©¬æ‹‰æ¾èµ›å‰è®­ç»ƒã€é¥®é£ŸåŠæˆç»©é¢„æµ‹</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11175/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li><li class="post-list-item"><a class="post-list-link" href="/posts/11174/">AIé¢†åŸŸæœ€æ–°èµ„è®¯ï¼šçªç ´ã€è¶‹åŠ¿ä¸å±•æœ›</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><div id="widget-waline-list"></div><script type="text/javascript" id="recent-comment" serverURL="https://comment.aimak.cn" count="5" src="/js/recent-comments.js?v=1.0.0" async="async"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="https://landscape.cncf.io/" title="CNCF" target="_blank">CNCF</a><ul></ul><a href="https://segmentfault.com/" title="SegmentFault" target="_blank">SegmentFault</a><ul></ul><a href="https://blog.csdn.net/junbaozi/category_11649936_3.html" title="CloudNative" target="_blank">CloudNative</a><ul></ul><a href="https://excalidraw.com/" title="excalidraw" target="_blank">excalidraw</a><ul></ul><a href="https://tudan.blog.csdn.net/?type=lately" title="ç‹å¦" target="_blank">ç‹å¦</a><ul></ul><a href="https://aspoem.com/zh-Hans" target="_blank"></a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2025 <a href="/." rel="nofollow">æ«å“²'sæ–‡æ –å°ç­‘.</a><a rel="nofollow" target="_blank" href="https://beian.miit.gov.cn/">ï½œè‹ICPå¤‡18013756å·-1</a><!--a(rel='nofollow', target='_blank', href='https://github.com/tufu9441/maupassant-hexo')  Theme--><!--|  by--><!--a(rel='nofollow', target='_blank', href='https://github.com/pagecho')  Cho.--></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸ!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css?v=1.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>